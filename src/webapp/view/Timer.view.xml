<?xml version="1.0" encoding="utf-8"?>
<!--
  This file is part of snailcrypt-jsclient. For more information visit
  https://www snailcrypt.com
  Copyright (C) 2022-2023  Richard BÃ¤ck <richard.baeck@icloud.com>
  
  This program is free software; you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation; either version 2 of the License, or
  (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public License along
  with this program; if not, write to the Free Software Foundation, Inc.,
  51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
-->

<mvc:View
    controllerName="snailcrypt-jsclient.controller.Timer"
    xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:grid="sap.ui.layout.cssgrid"
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc">
  <ObjectHeader title="{i18n>timer.title}"
                intro="{i18n>timer.titleHelp}"
                responsive="true"
                icon="/snailcrypt-jsclient/assets/logo.png" />

  <VBox class="sapUiSmallMargin">
    <FlexBox alignItems="Center"
             justifyContent="Center">
      <Label id="timerLabel" />
      <Label id="messageAvailableLabel"
      		 text="{i18n>timer.decryptionKeyIsReleased}"
      		 visible="false" />
    </FlexBox>

    <FlexBox alignItems="Center"
             justifyContent="Center">
      <VBox>
        <FlexBox alignItems="Center"
                 class="sapUiLargeMarginTop">
          <Label id="decryptedDateTimeLabel"
                 text="{i18n>timer.encryptedUntil}"
                 labelFor="decryptedDateTimePicker"
                 class="sapUiSmallMarginEnd" />
          <DateTimePicker id="decryptedDateTimePicker"
                          editable="false"
                          valueFormat="yyyy-MM-ddTHH:mm:ssZ"
                          displayFormat="short" />
        </FlexBox>
        
        <VBox class="sapUiSmallMarginTop">
          <Label id="hintLabel"
                 text="{i18n>timer.hintText}"
                 labelFor="hintTextArea"
                 visible="false"
                 width="100%" />

          <TextArea id="hintTextArea"
                    editable="false"
                    visible="false"
                    rows="5"
                    width="100%" />
        </VBox>

        <VBox class="sapUiSmallMarginTop">
          <Label id="decryptedLabel"
                 text="{i18n>timer.decryptedText}"
                 labelFor="decryptedTextArea"
                 visible="false"
                 width="100%" />

          <core:HTML id="decryptedHTML"
                     content="
        &lt;div id=&quot;decrypted-editor&quot; class=&quot;html-editor&quot;&gt;
            &lt;div id=&quot;decrypted-editor-editor&quot; class=&quot;html-editor-editor&quot; /&gt;
        &lt;/div&gt;
                     "
                     visible="false"
                     afterRendering="onDecryptedHTMLAfterRendering" />
                 
          <TextArea id="decryptedTextArea"
                    editable="false"
                    visible="false"
                    rows="20"
                    width="100%" />
        </VBox>
      </VBox>
    </FlexBox>

    <FlexBox alignItems="Center"
             justifyContent="Center">
      <FlexBox alignItems="Center"
               class="sapUiLargeMarginTop">
        <Label id="appLinkLabel"
               text="{i18n>timer.appLinkLabel}"
               labelFor="appLink"
               class="sapUiSmallMarginEnd" />
        <Link id="appLink"
              text="{i18n>timer.appLink}" />
      </FlexBox>
    </FlexBox>

    <Toolbar width="100%"
             height="1px"
             class="sapUiLargeMarginTop" />

    <VBox class="sapUiLargeMarginBottom">
        <Panel expandable="true"
               headerText="{i18n>timer.faq1Title}">
          <content>
            <Text text="{i18n>timer.faq1Text}" />
          </content>
        </Panel>

        <Panel expandable="true"
               headerText="{i18n>timer.faq2Title}">
          <content>
            <Text text="{i18n>timer.faq2Text}" />
          </content>
        </Panel>
    </VBox>

    <Toolbar width="100%"
             height="1px"
             class="sapUiLargeMarginTop" />

    <mvc:XMLView viewName="snailcrypt-jsclient.view.Footer" />

    <mvc:XMLView viewName="snailcrypt-jsclient.view.CookieMessageStrip"
                 class="sapUiLargeMarginTop" />
  </VBox>
</mvc:View>
