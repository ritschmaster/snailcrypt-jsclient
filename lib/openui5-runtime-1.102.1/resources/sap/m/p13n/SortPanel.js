/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./QueryPanel","sap/m/Text","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/ui/layout/Grid","sap/ui/layout/GridData"],function(Q,T,S,a,G,b){"use strict";var c=Q.extend("sap.m.p13n.SortPanel",{metadata:{library:"sap.m"},renderer:{apiVersion:2}});c.prototype.PRESENCE_ATTRIBUTE="sorted";c.prototype.CHANGE_REASON_SORTORDER="sortorder";c.prototype._createRemoveButton=function(){var r=Q.prototype._createRemoveButton.apply(this,arguments);r.setLayoutData(new b({span:"XL3 L3 M3 S4"}));return r;};c.prototype._createOrderSwitch=function(k,d){var s=new S({enabled:k?true:false,layoutData:new b({span:"XL2 L2 M2 S4"}),items:[new a({key:"asc",icon:"sap-icon://sort-ascending"}),new a({key:"desc",icon:"sap-icon://sort-descending"})],select:function(e){var f=e.getParameter("key");var t=e.getSource().getParent().getContent()[2];t.setText(this._getSortOrderText(f==="desc"));var k=e.oSource.getParent().getContent()[0].getSelectedItem().getKey();this._changeOrder(k,f=="desc");}.bind(this)});s.setSelectedItem(d?s.getItems()[1]:s.getItems()[0]);return s;};c.prototype._createSortOrderText=function(k,d){return new T({layoutData:new b({span:"XL3 L3 M3 S3",visibleS:false}),text:this._getSortOrderText(d)}).addStyleClass("sapUiTinyMarginTop");};c.prototype._createQueryRowGrid=function(i){var s=this._createKeySelect(i.name);var o=this._createOrderSwitch(i.name,i.descending);var d=this._createSortOrderText(i.name,i.descending);return new G({containerQuery:true,defaultSpan:"XL4 L4 M4 S4",content:[s,o,d]}).addStyleClass("sapUiTinyMargin");};c.prototype._getPlaceholderText=function(){return this._getResourceText("p13n.SORT_PLACEHOLDER");};c.prototype._getRemoveButtonTooltipText=function(){return this._getResourceText("p13n.SORT_REMOVEICONTOOLTIP");};c.prototype._selectKey=function(C){Q.prototype._selectKey.apply(this,arguments);var l=C.getParent().getParent();var n=C.getSelectedKey();var d=l.getContent()[0].getContent();d[1].setEnabled(!!n);var D=d[1].getSelectedKey()==="desc";this._changeOrder(n,D);};c.prototype._getSortOrderText=function(d){return d?this._getResourceText("p13n.SORT_DESCENDING"):this._getResourceText("p13n.SORT_ASCENDING");};c.prototype._changeOrder=function(k,d){var i=this._getP13nModel().getProperty("/items").filter(function(I){return I.name===k;});if(i.length>0){i[0].descending=d;this.fireChange({reason:this.CHANGE_REASON_SORTORDER,item:i[0]});}};return c;});
