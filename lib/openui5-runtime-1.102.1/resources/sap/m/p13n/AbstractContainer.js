/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/m/Page"],function(C,P){"use strict";var A=C.extend("sap.m.p13n.AbstractContainer",{metadata:{library:"sap.m",defaultAggregation:"views",properties:{defaultView:{type:"string"}},aggregations:{header:{type:"sap.m.IBar",multiple:false,forwarding:{idSuffix:"-AbstractContainer",aggregation:"customHeader",forwardBinding:true}},subHeader:{type:"sap.m.IBar",multiple:false,forwarding:{idSuffix:"-AbstractContainer",aggregation:"subHeader",forwardBinding:true}},footer:{type:"sap.m.IBar",multiple:false,forwarding:{idSuffix:"-AbstractContainer",aggregation:"footer",forwardBinding:true}},views:{type:"sap.m.p13n.AbstractContainerItem",multiple:true},_content:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},events:{beforeViewSwitch:{allowPreventDefault:true,parameters:{source:{type:"string"},target:{type:"string"}}},afterViewSwitch:{allowPreventDefault:true,parameters:{source:{type:"string"},target:{type:"string"}}}}},renderer:{apiVersion:2,render:function(r,c){r.openStart("div",c);r.style("height","100%");r.openEnd();r.renderControl(c.getAggregation("_content"));r.close("div");}}});A.prototype.init=function(){C.prototype.init.apply(this,arguments);this.addStyleClass("sapMAbstractContainer");this._initializeContent();};A.prototype.applySettings=function(){C.prototype.applySettings.apply(this,arguments);this.switchView(this.getDefaultView());return this;};A.prototype._initializeContent=function(){this.oLayout=new P(this.getId()+"-AbstractContainer");this.setAggregation("_content",this.oLayout);};A.prototype.removeView=function(c,s){var o=typeof c=="string"?this.getView(c):c;o=this.removeAggregation("views",o,s);if(o&&o.getKey()===this.getCurrentViewKey()){this.switchView();}return this;};A.prototype.addView=function(c){if(c&&c.getContent()&&!c.getContent().hasStyleClass("sapUiMAbstractContainerContent")){c.getContent().addStyleClass("sapUiMAbstractContainerContent");}this.addAggregation("views",c);return this;};A.prototype.getCurrentViewKey=function(){return this._sCurrentView?this._sCurrentView:this.getDefaultView();};A.prototype.getCurrentViewContent=function(){return this.getView(this.getCurrentViewKey()).getContent();};A.prototype.switchView=function(k){var n=this.getView(k);if(!n){n=this.getViews()[0];if(!n){return;}}if(!this.fireBeforeViewSwitch({source:c,target:k})){this._bPrevented=true;return;}this._bPrevented=false;var c=this.getCurrentViewKey();this._sCurrentView=n.getKey();this.oLayout.removeAllContent();this.oLayout.addContent(n.getContent());if(c!==k){this.oAfterRenderingDelegate={onAfterRendering:function(){this.removeEventDelegate(this.oAfterRenderingDelegate);this.fireAfterViewSwitch({source:c,target:k});}.bind(this)};this.addEventDelegate(this.oAfterRenderingDelegate,this);}};A.prototype.getView=function(k){return this.getViews().find(function(v){if(v.getKey()===k){return v;}});};A.prototype.getViewMap=function(){return this.getViews().map(function(o){return{key:o.getKey(),content:o.getContent()};});};A.prototype.exit=function(){C.prototype.exit.apply(this,arguments);this._sCurrentView=null;this.oResourceBundle=null;};return A;});
