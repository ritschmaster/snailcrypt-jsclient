/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./QueryPanel","sap/m/HBox","sap/m/CheckBox","sap/ui/layout/Grid"],function(Q,H,C,G){"use strict";var a=Q.extend("sap.m.p13n.GroupPanel",{metadata:{library:"sap.m",properties:{enableShowField:{type:"boolean",defaultValue:false}}},renderer:{apiVersion:2}});a.prototype.PRESENCE_ATTRIBUTE="grouped";a.prototype.CHANGE_REASON_SHOWIFGROUPED="showifgrouped";a.prototype._createQueryRowGrid=function(i){var k=i.name;var s=this._createKeySelect(k);var g=new G({containerQuery:true,defaultSpan:this.getEnableShowField()?"XL4 L4 M4 S4":"XL6 L6 M6 S6",content:[s]}).addStyleClass("sapUiTinyMargin");if(this.getEnableShowField()){var c=this._createCheckBox(i);g.addContent(c);}return g;};a.prototype._createCheckBox=function(i){var k=i.name;var c=new H({alignItems:"Center",items:[new C({enabled:k?true:false,selected:i.hasOwnProperty("showIfGrouped")?i.showIfGrouped:true,select:function(e){var p=e.getSource().getParent().getParent().getParent().getParent().getParent().getParent();var k=e.oSource.getParent().getParent().getContent()[0].getSelectedItem().getKey();this._changeShowIfGrouped(k,e.getParameter("selected"));p.fireChange({reason:"change",item:{name:k,grouped:true,showIfGrouped:e.getParameter("selected")}});}.bind(this),text:this._getResourceText("p13n.GROUP_CHECKBOX")})]});return c;};a.prototype._changeShowIfGrouped=function(k,s){var i=this._getP13nModel().getProperty("/items").filter(function(I){return I.name===k;});i[0].showIfGrouped=s;this.fireChange({reason:this.CHANGE_REASON_SHOWIFGROUPED,item:i[0]});};a.prototype._getPlaceholderText=function(){return this._getResourceText("p13n.GROUP_PLACEHOLDER");};a.prototype._getRemoveButtonTooltipText=function(){return this._getResourceText("p13n.GROUP_REMOVEICONTOOLTIP");};a.prototype._selectKey=function(c){Q.prototype._selectKey.apply(this,arguments);var l=c.getParent().getParent();var n=c.getSelectedKey();var b=l.getContent()[0].getContent();b[1].getItems()[0].setEnabled(!!n);};return a;});
