/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/m/BadgeCustomData','sap/base/Log','sap/m/library','sap/ui/thirdparty/jquery'],function(B,L,l,q){"use strict";var I="sapMBadge";var a={topLeft:"sapMBadgeTopLeft",topRight:"sapMBadgeTopRight",inline:"sapMBadgeInline"};var b=l.BadgeState;var c=l.BadgeStyle;var d=["","undefined","null",false];var e=function(){this.initBadgeEnablement=function(C,o){var D=o?o:this;this._oBadgeConfig=C||{};D.addEventDelegate({onAfterRendering:f},this);};function _(C,o){if(C.suffix){return o.$(C.suffix);}if(C.selector){return o.$().find(C.selector).first();}}function f(){this._isBadgeAttached=false;if(!this.getBadgeCustomData()||!this.getBadgeCustomData().getVisible()){return false;}j.call(this);if(!Object.keys(this._oBadgeConfig).length){return this;}return this;}function g(){var o=h.call(this);o.removeClass("sapMBadgeAnimationUpdate");o.removeClass("sapMBadgeAnimationAdd");o.width();o.addClass("sapMBadgeAnimationRemove");o.on("animationend",function(){o.css("display","none");o.off();});o.removeAttr("aria-label");this._isBadgeAttached=false;m.call(this,"",b["Disappear"]);return this;}function h(){return this.$(I);}function i(){return this.getId()+"-"+I;}function j(){var o,s=i.call(this),p=h.call(this),r=typeof this.badgeValueFormatter==="function"&&this.badgeValueFormatter,v=n(r?r.call(this,this.getBadgeCustomData().getValue()):this.getBadgeCustomData().getValue())||"",S=this._oBadgeConfig.style?this._oBadgeConfig.style:c.Default,A=this.getBadgeCustomData().getAnimation();this._oBadgeContainer=this._oBadgeConfig&&this._oBadgeConfig.selector?_(this._oBadgeConfig.selector,this):this.$();if(p.length){p.remove();}o=q('<div></div>').addClass(I+"Indicator");o.addClass(I+S);o.attr("id",s);o.attr("data-badge",v);o.attr("aria-label",k.call(this));o.appendTo(this._oBadgeContainer);o.addClass("sapMBadgeAnimationAdd");this._isBadgeAttached=true;this._oBadgeContainer.addClass(I);if(this._oBadgeConfig.position){this._oBadgeContainer.addClass(a[this._oBadgeConfig.position]);}if(this._oBadgeConfig.accentColor){this._oBadgeContainer.addClass(I+this._oBadgeConfig.accentColor);}this._oBadgeContainer.addClass(this.getBadgeAnimationClass(this.getBadgeCustomData().getAnimation()));this._badgeAnimaionType=A;m.call(this,v,b["Appear"]);}this.updateBadgeValue=function(v){var o=typeof this.badgeValueFormatter==="function"&&this.badgeValueFormatter,p;v=n((o?o.call(this,v):v))||"";if(!this.getBadgeCustomData().getVisible()){return false;}p=h.call(this);p.removeClass("sapMBadgeAnimationUpdate");p.attr("data-badge",v);p.attr("aria-label",k.call(this));p.width();p.addClass("sapMBadgeAnimationUpdate");m.call(this,v,b["Updated"]);};function k(){var A=this.getAriaLabelBadgeText;return A&&typeof A==="function"&&A.call(this);}function m(v,s){if(this.onBadgeUpdate&&typeof this.onBadgeUpdate==="function"){var o=i.call(this);return this.onBadgeUpdate(v,s,o);}}function n(v){return d.indexOf(v)===-1&&v;}this.addCustomData=function(C){if(C.isA("sap.m.BadgeCustomData")){this.removeAggregation("customData",this._oBadgeCustomData,true);this._oBadgeCustomData=C;this.addAggregation("customData",C,true);return this.updateBadgeVisibility(C.getVisible());}return this.addAggregation("customData",C);};this.insertCustomData=function(C){if(C.isA("sap.m.BadgeCustomData")){this.removeAggregation("customData",this._oBadgeCustomData,true);this._oBadgeCustomData=C;this.addAggregation("customData",C,true);return this.updateBadgeVisibility(C.getVisible());}return this.insertAggregation("customData",C);};this.getBadgeCustomData=function(){var o=this.getCustomData().filter(function(p){return p instanceof B;});return o.length?o[0]:undefined;};this.getBadgeAnimationClass=function(A){return I+"AnimationType"+A;};this.removeBadgeCustomData=function(){var o;o=this._oBadgeCustomData;this._oBadgeCustomData=null;return this.removeAggregation("customData",o,true);};this.setBadgeAccentColor=function(v){if(!this._oBadgeContainer){return false;}this._oBadgeContainer.removeClass(I+this._oBadgeConfig.accentColor);this._oBadgeContainer.addClass(I+v);this._oBadgeConfig.accentColor=v;};this.setBadgePosition=function(v){if(!this._oBadgeContainer){return false;}this._oBadgeContainer.removeClass(I+this._oBadgeConfig.position);this._oBadgeContainer.addClass(a[v]);this._oBadgeConfig.position=v;};this.updateBadgeVisibility=function(v){return v?j.call(this):g.call(this);};this._renderBadge=function(){f.call(this);};this.updateBadgeAnimation=function(A){if(this._oBadgeContainer){this._badgeAnimaionType&&this._oBadgeContainer.removeClass(this.getBadgeAnimationClass(this._badgeAnimaionType));this._oBadgeContainer.addClass(this.getBadgeAnimationClass(A));}this._badgeAnimaionType=A;};};return e;});
