/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./InputBase","./Input","./NumericInputRenderer","./library","sap/ui/core/format/NumberFormat","sap/ui/Device","sap/ui/events/KeyCodes","sap/ui/dom/jquery/cursorPos"],function(I,a,N,l,b,D,K){"use strict";var c=l.InputType;var d=a.extend("sap.m.NumericInput",{metadata:{library:"sap.m"},renderer:N});d.prototype.onBeforeRendering=function(){I.prototype.onBeforeRendering.call(this);this.setWidth("100%");this._deregisterEvents();};d.prototype.setValue=function(v){a.prototype.setValue.apply(this,arguments);if(this.getDomRef()){this.getDomRef("inner").setAttribute("aria-valuenow",v);}return this;};d.prototype.setType=function(t){return a.prototype.setType.call(this,c.Number);};d.prototype.onkeydown=function(e){var t,C,p;a.prototype.onkeydown.apply(this,arguments);if(!D.system.desktop||e.ctrlKey||e.metaKey||(e.originalEvent.key&&e.originalEvent.key.length!==1)){return;}C=this._$input.cursorPos();if(e.which===K.NUMPAD_COMMA){e.preventDefault();t=this.getValue().substring(0,C)+this._getNumberFormat().oFormatOptions.decimalSeparator+this.getValue().substring(C);p=this._getNumberFormat().parse(t);if(p||p===0){this.setDOMValue(t);}return;}t=this.getValue().substring(0,C)+e.originalEvent.key+this.getValue().substring(C);p=this._getNumberFormat().parse(t);if(!i(e.which)||(!p&&p!==0)){e.preventDefault();}};var n=[[K.A,K.Z],[K.OPEN_BRACKET,K.OPEN_BRACKET],[K.PIPE,K.SEMICOLON],[K.GREAT_ACCENT,K.BACKSLASH]];function i(k){return Object.values(K).includes(k)&&!n.some(function(r){return k>=r[0]&&k<=r[1];});}d.prototype._getNumberFormat=function(){if(!this._oNumberFormat){this._oNumberFormat=b.getFloatInstance();}return this._oNumberFormat;};return d;});
