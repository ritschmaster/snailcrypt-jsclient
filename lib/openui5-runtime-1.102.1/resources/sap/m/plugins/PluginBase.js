/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element"],function(E){"use strict";var P=E.extend("sap.m.plugins.PluginBase",{metadata:{"abstract":true,library:"sap.m",properties:{enabled:{type:"boolean",defaultValue:true}}}});var p={};P.setConfigs=function(c,v){var s=(typeof v=="function")?v.getMetadata().getName():v;Object.assign(p[s]=p[s]||{},c);};P.setControlConfig=function(c,C,v){var m={};var s=(typeof c=="function")?c.getMetadata().getName():c;m[s]=C;this.setConfigs(m,v);};P.getPlugin=function(c,v){if(v==undefined){v=this.getMetadata().getName();}else if(typeof v=="function"){v=v.getMetadata().getName();}return c.findElements(false,function(e){return e.isA(v);})[0];};P.prototype.isActive=function(){return!!(this._bActive);};P.prototype.getControl=function(){var o=this.getParent();if(o){var s="get"+this.getMetadata().getName().split(".").pop()+"PluginOwner";o=o[s]?o[s](this):o;}return o;};P.prototype.getConfig=function(k,v,a){var c=this.getControl();if(!c){return;}var s=this.getMetadata().getName();var C=c.getMetadata().getName();var m=p[s]||{};var b=m[C]||{};var r=function(e){return(typeof e[k]=="function")?e[k].call(e,v,a):e[k];};if(k in b){return r(b);}for(var d in m){if(c.isA(d)){if(!k){return m[d];}if(k in m[d]){return r(m[d]);}}}};P.prototype.isApplicable=function(c){return Object.keys(this.getConfig()||{}).length>0;};P.prototype.onActivate=function(c){};P.prototype.onDeactivate=function(c){};P.prototype.setParent=function(){this._deactivate();E.prototype.setParent.apply(this,arguments);if(this.getEnabled()){this._activate();}return this;};P.prototype.setEnabled=function(e){var o=this.getEnabled();this.setProperty("enabled",e,true);if(this.getEnabled()!=o){if(o){this._deactivate();}else{this._activate();}}return this;};P.prototype.setProperty=function(s,v,S){S=S||(this.getMetadata().getProperty(s).appData||{}).invalidate===false;return E.prototype.setProperty.call(this,s,v,S);};P.prototype._activate=function(){if(this._bActive){return;}var c=this.getControl();if(!c){return;}if(c instanceof Promise){return c.then(this._activate.bind(this));}if(!this.isApplicable(c)){throw new Error(this+" is not applicable to "+c);}this.getConfig("onActivate",c,this);this.onActivate(c);this._bActive=true;};P.prototype._deactivate=function(){if(!this._bActive){return;}var c=this.getControl();this.getConfig("onDeactivate",c,this);this.onDeactivate(c);this._bActive=false;};return P;});
