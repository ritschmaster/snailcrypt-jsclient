/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/test/selectors/_Selector","sap/ui/model/resource/ResourceModel","sap/ui/model/StaticBinding"],function(_,R,S){"use strict";var a=_.extend("sap.ui.test.selectors._BindingPath",{_generate:function(c){return Object.keys(c.mBindingInfos).map(function(p){return this._getBindingSelector(c,p);}.bind(this));},_getBindingSelector:function(c,p){var b=this._getBinding(c,p);if(b){return b.map(function(B){var r={};if(B.model.type===R.getMetadata().getName()){this._oLogger.debug("Control "+c+" property "+p+" has i18n binding for model "+B.model.name+" with key "+B.path);r={i18NText:{propertyName:p,key:B.path}};if(B.model.name&&B.model.name!=="i18n"){r.i18NText.modelName=B.model.name;}}else{this._oLogger.debug("Control "+c+" property "+p+" has data binding for model "+B.model.name+" with context "+B.contextPath+" and path "+B.path);r={bindingPath:{}};if(B.value){r.bindingPath.value=B.value;}else{r.bindingPath.path=B.contextPath;r.bindingPath.propertyPath=B.path;}if(B.model.name){r.bindingPath.modelName=B.model.name;}}return r;}.bind(this));}else{this._oLogger.debug("Control "+c+" does not have data binding for property "+p);return[];}},_getBinding:function(c,p){var b=c.getBinding(p);var B=c.getBindingInfo(p);if(b){if(b.getBindings){this._oLogger.debug("Control "+c+" has composite binding for property "+p);return b.getBindings().map(function(b,i){return this._mapBindingData(b,B.parts[i]);}.bind(this));}else{this._oLogger.debug("Control "+c+" has simple binding for property "+p);return[this._mapBindingData(b,B.parts?B.parts[0]:B)];}}},_mapBindingData:function(b,B){var m=b.getModel();var c=b.getContext();if(b instanceof S){return{value:b.getValue(),model:{type:"static"}};}return{path:b.getPath(),contextPath:c?c.getPath():"",model:{name:B.model||undefined,type:m.getMetadata().getName(),data:m.getData?m.getData():undefined}};}});return a;});
