/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/test/generic/Utils","sap/ui/dom/includeStylesheet","sap/ui/core/Element","require"],function(B,U,i,E,r){"use strict";return B.extend("sap.ui.test.generic.TestBase",{shouldIgnoreControl:function(c,a){return false;},testControl:function(c,a){},getObjectCapabilities:function(c){if(c){return this._mObjectCapabilities[c];}else{return this._mObjectCapabilities;}},run:function(c){return i({url:r.toUrl("test-resources/sap/ui/core/qunit/generic/helper/_cleanupStyles.css")}).then(function(){return Promise.all(c.map(function(C){var s=C.className;var a=s.startsWith(this._sLibName)?s.slice(this._sLibName.length):s;QUnit.test(a,function(b){if(!this.shouldIgnoreControl(C,b)){this._iFullyTestedControls++;return this.testControl.apply(this,[C,b]);}else{this._iIgnoredOrExcludedControls++;return Promise.resolve();}}.bind(this));}.bind(this))).then(function(){QUnit.test("Statistics",function(a){a.ok(true,"Total number of found controls: "+this._iAllControls);a.ok(true,"Total number of ignored or excluded controls: "+this._iIgnoredOrExcludedControls);a.ok(true,"Number of fully tested controls: "+this._iFullyTestedControls);}.bind(this));}.bind(this));}.bind(this));},setupAndStart:function(p){this._iAllControls=0;this._iIgnoredOrExcludedControls=0;this._iFullyTestedControls=0;this._oTestParameters=window["sap-ui-test-config"];this._mObjectCapabilities=this._oTestParameters.objectCapabilities||{};this._sLibName=this._oTestParameters.library;return U.loadAllControls(this._oTestParameters,{includeElements:p&&p.includeElements}).then(function(c){QUnit.module(this.getMetadata().getName()+" Tests - "+this._sLibName,{afterEach:function(){E.registry.forEach(function(e,I){e.destroy();});}});if(c.length===0){QUnit.test("No classes to test for library '"+this._sLibName+"'.",function(a){a.ok(true,"Nothing to test.");});}else{this._iAllControls=c.length;return this.run(c);}}.bind(this));}});});
