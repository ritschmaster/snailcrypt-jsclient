/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/ManagedObject","sap/ui/test/actions/Action","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery"],function(M,A,K,q){"use strict";var E=A.extend("sap.ui.test.actions.EnterText",{metadata:{properties:{text:{type:"string"},clearTextFirst:{type:"boolean",defaultValue:true},keepFocus:{type:"boolean",defaultValue:false},pressEnterKey:{type:"boolean",defaultValue:false}},publicMethods:["executeOn"]},constructor:function(s){if(s&&s.text){s.text=M.escapeSettingsValue(s.text);}A.prototype.constructor.call(this,s);},init:function(){A.prototype.init.apply(this,arguments);this.controlAdapters=q.extend(this.controlAdapters,E.controlAdapters);},executeOn:function(c){var a=this.$(c),o=a[0];if(!o){return;}if(this.getText()===undefined||(!this.getClearTextFirst()&&!this.getText())){this.oLogger.error("Please provide a text for this EnterText action");return;}if(o.readOnly){this.oLogger.debug("Cannot enter text in control "+c+": control is not editable!");return;}if(o.disabled){this.oLogger.debug("Cannot enter text in control "+c+": control is not enabled!");return;}var u=this.getUtils();this.oLogger.timestamp("opa.actions.enterText");this.oLogger.debug("Enter text in control "+c);this._tryOrSimulateFocusin(a,c);if(this.getClearTextFirst()){u.triggerKeydown(o,K.DELETE);u.triggerKeyup(o,K.DELETE);a.val("");u.triggerEvent("input",o);}var v=a.val();this.getText().split("").forEach(function(C){v+=C;u.triggerCharacterInput(o,C,v);u.triggerEvent("input",o);});if(this.getPressEnterKey()){u.triggerKeydown(o,K.ENTER);u.triggerKeyup(o,K.ENTER);u.triggerEvent("input",o);u.triggerEvent("search",o);}else if(!this.getKeepFocus()){this._simulateFocusout(o);u.triggerEvent("search",o);}}});E.controlAdapters={};E.controlAdapters["sap.m.StepInput"]="input-inner";return E;});
