/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/test/matchers/Matcher',"sap/base/strings/capitalize"],function(M,c){"use strict";return M.extend("sap.ui.test.matchers.I18NText",{metadata:{publicMethods:["isMatching"],properties:{propertyName:{type:"string"},key:{type:"string"},parameters:{type:"any"},modelName:{type:"string",defaultValue:"i18n"},useLibraryBundle:{type:"boolean"}}},isMatching:function(C){var k=this.getKey(),p=this.getPropertyName(),P=this.getParameters(),m=this.getModelName(),o=C.getModel(m),u=this.getUseLibraryBundle(),f=C["get"+c(p,0)];if(!o){this._oLogger.debug("The '"+C+"' has no model with name '"+m+"'");return false;}if(!o.getResourceBundle){this._oLogger.debug("The model '"+o+"' is not a valid resource model");return false;}var a=this._getApplicationWindow();var b;if(u){var l=C.getMetadata().getLibraryName();b=sap.ui.getCore().getLibraryResourceBundle(l);}else{b=o.getResourceBundle();if(b instanceof a.Promise){if(o._oResourceBundle instanceof a.Object&&o._oResourceBundle.getText){b=o._oResourceBundle;}else{this._oLogger.debug("The model '"+m+"' of '"+C+"' is in async mode and not loaded yet");return false;}}}if(!f){this._oLogger.debug("The '"+C+"' has no '"+p+"' property");return false;}var s=f.call(C);var t=b.getText(k,P,true);if(!t){var d="No value for the key '"+k+"' in the model '"+m+"' of '"+C+"'";this._oLogger.debug(d);return false;}var r=s===t;if(!r){this._oLogger.debug("The text '"+t+"' does not match the value '"+s+"' of the '"+p+"' property for '"+C+"'");}return r;}});});
