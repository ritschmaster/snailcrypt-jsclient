/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/test/matchers/Matcher"],function(L,M){"use strict";var l=L.getLogger("sap.ui.test.matchers.Sibling");var m=new M();return function(s,o){return function(c){if(!s){l.debug("No sibling was defined so no controls will be filtered.");return true;}var r=false;var S;if(typeof s==="string"){var a=m._getApplicationWindow();S=a.sap.ui.getCore().byId(s);}else{S=s;}if(o&&o.useDom){var b=-1;var C=-1;var p=S.getDomRef().parentNode;for(var i=0;i<p.children.length;i+=1){var I=p.children[i].getAttribute("data-sap-ui");if(I===S.getId()){b=i;}if(I===c.getId()){C=i;}}if(C>-1){if(o.prev){if(C<b){r=true;}else{l.debug("Control '"+c+"' has sibling '"+S+"' but it isn't ordered before the sibling");}}else if(o.next){if(C>b){r=true;}else{l.debug("Control '"+c+"' has sibling '"+S+"' but it isn't ordered after the sibling");}}else{l.debug("Sibling order should be defined");}}}else{var P=S.getParent();var d=0;var e=o&&o.level>=0&&o.level||Number.MAX_SAFE_INTEGER;while(d<e&&P&&!r){var A=_(P.mAggregations);A.forEach(function(f){if(f!==S){if(f===c){r=true;}else{if(_(f.mAggregations).includes(c)){r=true;}}}});d+=1;P=P.getParent();}}l.debug("Control '"+c+"' "+(r?"has":"does not have")+" sibling '"+S);return r;};};function _(a){var r=[];for(var A in a){var v=a[A];if(Array.isArray(v)){r=r.concat(v.slice(0,20));}else if(v){r.push(v);}}r=r.filter(function(c){return c.getMetadata&&c.getMetadata().getName()&&c.$().length;});return r;}},true);
