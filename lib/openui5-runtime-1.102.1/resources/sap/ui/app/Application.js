/*
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/base/assert','./ApplicationMetadata','sap/ui/core/Component','sap/ui/core/ComponentContainer','sap/ui/model/Model','sap/ui/model/json/JSONModel','jquery.sap.sjax'],function(a,A,C,b,M,J,q){"use strict";var c=C.extend("sap.ui.app.Application",{metadata:{"abstract":true,properties:{root:"string",config:"any"},aggregations:{rootComponent:{type:"sap.ui.core.UIComponent",multiple:false}},publicMethods:["getView"],deprecated:true},constructor:function(i,s){if(this.onError){this.onWindowError=this.onError;}if(this.onBeforeExit){this.onWindowBeforeUnload=this.onBeforeExit;}if(this.onExit){this.onWindowUnload=this.onExit;}C.apply(this,arguments);if(sap.ui.getApplication){throw new Error("Only one instance of sap.ui.app.Application is allowed");}sap.ui.getApplication=this._getInstance.bind(this);sap.ui.getCore().attachInit(function(){this._initRootComponent();this.main();}.bind(this));},_initRootComponent:function(){var r=this.createRootComponent();if(r){this.setRootComponent(r);var o=new b({component:r});o.placeAt(this.getRoot()||document.body);}},createRootComponent:function(){var r=this.getMetadata().getRootComponent();var R;if(r){R=sap.ui.component({name:r});}return R;},getView:function(){return this.getRootComponent();},_getInstance:function(){return this;},main:function(){},onBeforeExit:function(){},onExit:function(){},onError:null,setConfig:function(v){if(typeof v==="string"){var u=v;v=new J();var r=q.sap.sjax({url:u,dataType:'json'});if(r.success){v.setData(r.data);}else{throw new Error("Could not load config file: "+u);}}if(typeof v==="object"&&!(v instanceof M)){v=new J(v);}a(v instanceof M,"the config property value must be a string, an object or an instance of sap.ui.model.Model");this.setProperty("config",v);},destroy:function(s){delete sap.ui.getApplication;C.prototype.destroy.apply(this,arguments);}},A);return c;});
