/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/unified/calendar/CalendarUtils','sap/ui/unified/calendar/CalendarDate','./library','sap/ui/unified/CalendarDateInterval','sap/ui/unified/CalendarDateIntervalRenderer',"sap/ui/unified/DateRange"],function(C,a,l,b,c,D){"use strict";var d=b.extend("sap.ui.unified.CalendarWeekInterval",{renderer:c});d.prototype._getDaysLarge=function(){return 6;};d.prototype._handleFocus=function(e){var o=!!e.getParameter("_outsideBorder"),f,F,g;if(o){f=e.getParameter("date");this._oFocusDateWeek=a.fromLocalJSDate(f);F=C._getFirstDateOfWeek(this._oFocusDateWeek);g=this.getAggregation("month")[0];if(g.getDomRef()){this._setStartDate(F,false,true);}}return b.prototype._handleFocus.apply(this,arguments);};d.prototype._focusDateExtend=function(o,O,n){var e,L;if(!this._oFocusDateWeek){return b.prototype._focusDateExtend.apply(this,arguments);}e=this.getAggregation("month")[0];L=this._oFocusDateWeek.toLocalJSDate();this._setFocusedDate(this._oFocusDateWeek);e.setDate(L);this._oFocusDateWeek=null;return!n;};d.prototype._dateMatchesVisibleRange=function(o){var i=this.getDays(),e=a.fromLocalJSDate(o),s=a.fromLocalJSDate(this.getStartDate()),E=a.fromLocalJSDate(this.getStartDate());E.setDate(E.getDate()+i);return e.isSameOrAfter(s)&&e.isBefore(E);};d.prototype._showCalendarPicker=function(){var o=this._getFocusedDate(),e=this._getStartDate(),f=this._getCalendar(),s=new D(),g;g=new a(e);g.setDate(g.getDate()+this._getDays()-1);s.setStartDate(e.toLocalJSDate());s.setEndDate(g.toLocalJSDate());f.displayDate(o.toLocalJSDate(),false);f.removeAllSelectedDates();f.addSelectedDate(s);f.setMinDate(this.getMinDate());f.setMaxDate(this.getMaxDate());this._openPickerPopup(f);};d.prototype._handleCalendarPickerDateSelect=function(e){var o=this._getCalendar(),s=o.getSelectedDates()[0].getStartDate(),f=a.fromLocalJSDate(s),F;if(this._dateMatchesVisibleRange(f.toLocalJSDate())){this._oFocusDateWeek=f;this._focusDate(this._oFocusDateWeek,false,true);}else{F=C._getFirstDateOfWeek(f);this._setStartDate(F);this._oFocusDateWeek=f;this._focusDate(this._oFocusDateWeek,false,true);}this._closeCalendarPicker(true);};d.prototype._calculateStartDate=function(m,M,s){var m=new a(this._oMaxDate,this.getPrimaryCalendarType());m=this._getMaxDateAlignedToMinDate(m,this._oMinDate);s=this._getStartDateAlignedToMinAndMaxDate(m,this._oMinDate,s);return s;};return d;});
