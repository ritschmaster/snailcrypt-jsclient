/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./YearPicker","./YearRangePickerRenderer","./CalendarDate","./CalendarUtils","sap/ui/thirdparty/jquery"],function(Y,a,C,b,q){"use strict";var c=Y.extend("sap.ui.unified.calendar.YearRangePicker",{metadata:{library:"sap.ui.unified",properties:{years:{type:"int",group:"Appearance",defaultValue:9},columns:{type:"int",group:"Appearance",defaultValue:3},rangeSize:{type:"int",group:"Appearance",defaultValue:20}}},renderer:a});c.prototype.setDate=function(r){var o,y,i,f,h;r&&b._checkJSDateObject(r);y=r.getFullYear();b._checkYearInValidRange(y);o=C.fromLocalJSDate(r,this.getPrimaryCalendarType());o.setMonth(0,1);this.setProperty("date",r);this.setProperty("year",o.getYear());this._oDate=o;i=this.getYears();h=Math.floor(i/2);f=new C(this._oDate,this.getPrimaryCalendarType());f=this._checkFirstDate(f);this._iSelectedIndex=h;this.setProperty("_middleDate",f);return this;};c.prototype._checkFirstDate=function(d){var y=this.getYears();var m=new C(this._oMaxDate,this.getPrimaryCalendarType());if(!m.isSame(b._maxDate(this.getPrimaryCalendarType()))){return d;}m.setYear(m.getYear()-Math.floor(y/2)*this.getRangeSize()+1-Math.floor(this.getRangeSize()/2));if(d.isAfter(m)&&d.getYear()!=m.getYear()){d=new C(m,this.getPrimaryCalendarType());d.setMonth(0,1);}else if(d.isBefore(this._oMinDate)&&d.getYear()!=this._oMinDate.getYear()){d=new C(this._oMinDate,this.getPrimaryCalendarType());d.setMonth(0,1);}return d;};c.prototype._updatePage=function(f,s,F){var d=this._oItemNavigation.getItemDomRefs(),o=C.fromUTCDate(this._oFormatYyyymmdd.parse(q(d[0]).attr("data-sap-year-start"),true),this.getPrimaryCalendarType()),y=this.getYears(),i=this.getRangeSize();if(f){var m=new C(this._oMaxDate,this.getPrimaryCalendarType());m.setYear(m.getYear()-y*i+1);if(o.isBefore(m)){o.setYear(o.getYear()+y*i+Math.floor(i/2)+Math.floor(y/2)*i);o=this._checkFirstDate(o);}else{return;}}else{if(o.isAfter(this._oMinDate)){o.setYear(o.getYear()-y*i);if(o.isBefore(this._oMinDate)){o=new C(this._oMinDate,this.getPrimaryCalendarType());}o.setYear(o.getYear()+Math.floor(y/2)*i+Math.floor(i/2));o=this._checkFirstDate(o);}else{return;}}this._iSelectedIndex=s;this.setProperty("_middleDate",o);if(F){this.firePageChange();}};c.prototype._checkDateEnabled=function(f,s){if(b._isBetween(this._oMinDate,f,s,true)||b._isBetween(this._oMaxDate,f,s,true)||this._oMinDate.isBefore(f)&&this._oMaxDate.isAfter(s)){return true;}return false;};c.prototype._selectYear=function(i){var d=this._oItemNavigation.getItemDomRefs(),D=q(d[i]),y=D.attr("data-sap-year-start"),o=C.fromUTCDate(this._oFormatYyyymmdd.parse(y,true),this.getPrimaryCalendarType());if(D.hasClass("sapUiCalItemDsbl")){return false;}this.setProperty("date",o.toLocalJSDate());this.setProperty("year",o.getYear());return true;};return c;});
