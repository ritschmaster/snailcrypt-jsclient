/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/Popover","sap/ui/core/Core",'sap/ui/core/Control','sap/ui/core/LocaleData','sap/ui/unified/calendar/CalendarUtils','./calendar/Header','./calendar/TimesRow','./calendar/DatesRow','./calendar/MonthPicker','./calendar/YearPicker','sap/ui/core/date/UniversalDate','./library','sap/ui/core/format/DateFormat','sap/ui/Device','sap/ui/core/Locale',"./CalendarTimeIntervalRenderer","sap/ui/dom/containsOrEquals","sap/base/util/deepEqual","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/unified/DateRange","sap/ui/unified/Calendar"],function(P,C,a,L,b,H,T,D,M,Y,U,l,c,d,e,f,g,h,i,q,j,k){"use strict";var m=a.extend("sap.ui.unified.CalendarTimeInterval",{metadata:{library:"sap.ui.unified",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},startDate:{type:"object",group:"Data"},intervalSelection:{type:"boolean",group:"Behavior",defaultValue:false},singleSelection:{type:"boolean",group:"Behavior",defaultValue:true},items:{type:"int",group:"Appearance",defaultValue:12},intervalMinutes:{type:"int",group:"Appearance",defaultValue:60},pickerPopup:{type:"boolean",group:"Appearance",defaultValue:false},minDate:{type:"object",group:"Misc",defaultValue:null},maxDate:{type:"object",group:"Misc",defaultValue:null},_currentPicker:{type:"string",group:"Appearance",defaultValue:"timesRow",visibility:"hidden"}},aggregations:{selectedDates:{type:"sap.ui.unified.DateRange",multiple:true,singularName:"selectedDate"},specialDates:{type:"sap.ui.unified.DateTypeRange",multiple:true,singularName:"specialDate"},header:{type:"sap.ui.unified.calendar.Header",multiple:false,visibility:"hidden"},timesRow:{type:"sap.ui.unified.calendar.TimesRow",multiple:false,visibility:"hidden"},datesRow:{type:"sap.ui.unified.calendar.Month",multiple:false,visibility:"hidden"},monthPicker:{type:"sap.ui.unified.calendar.MonthPicker",multiple:false,visibility:"hidden"},yearPicker:{type:"sap.ui.unified.calendar.YearPicker",multiple:false,visibility:"hidden"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"},legend:{type:"sap.ui.unified.CalendarLegend",multiple:false}},events:{select:{},cancel:{},startDateChange:{}}},renderer:f});var n={TIMES_ROW:"timesRow",DATES_ROW:"datesRow",MONTH_PICKER:"monthPicker",YEAR_PICKER:"yearPicker"};m.prototype.init=function(){this._iMode=0;this._oYearFormat=c.getDateInstance({format:"y"});this.data("sap-ui-fastnavgroup","true",true);this._oMinDate=new U(new Date(Date.UTC(1,0,1)));this._oMinDate.getJSDate().setUTCFullYear(1);this._oMaxDate=new U(new Date(Date.UTC(9999,11,31,23,59,59)));this._initializeHeader();this._initializeTimesRow();this._initializeMonthPicker();this._initializeYearPicker();this.setPickerPopup(false);this._iItemsHead=15;};m.prototype._initializeHeader=function(){var a1=new H(this.getId()+"--Head");a1.attachEvent("pressPrevious",this._handlePrevious,this);a1.attachEvent("pressNext",this._handleNext,this);this.setAggregation("header",a1);};m.prototype._initializeTimesRow=function(){var a1=new T(this.getId()+"--TimesRow");a1.attachEvent("focus",J,this);a1.attachEvent("select",I,this);a1._bNoThemeChange=true;this.setAggregation("timesRow",a1);};m.prototype._initializeMonthPicker=function(){var a1=this._createMonthPicker();this.setAggregation("monthPicker",a1);a1._setSelectedDatesControlOrigin(this);};m.prototype._initializeYearPicker=function(){var a1=this._createYearPicker();this.setAggregation("yearPicker",a1);a1._setSelectedDatesControlOrigin(this);};m.prototype._createDatesRow=function(){var a1=new D(this.getId()+"--DatesRow",{days:18,selectedDates:[new j(this.getId()+"--Range")]});a1.attachEvent("focus",O,this);a1.attachEvent("select",N,this);a1._bNoThemeChange=true;a1.getIntervalSelection=function(){return this.getProperty("intervalSelection");};a1.getSingleSelection=function(){return this.getProperty("singleSelection");};a1.getSelectedDates=function(){return this.getAggregation("selectedDates",[]);};a1.getSpecialDates=function(){return this.getAggregation("specialDates",[]);};a1.getAriaLabelledBy=function(){return this.getAssociation("ariaLabelledBy",[]);};return a1;};m.prototype._createMonthPicker=function(){var a1=new M(this.getId()+"--MP",{columns:0,months:6});a1.attachEvent("select",Q,this);a1._bNoThemeChange=true;a1.attachEvent("pageChange",Z,this);return a1;};m.prototype._createYearPicker=function(){var a1=new Y(this.getId()+"--YP",{columns:0,years:6});a1.attachEvent("select",R,this);a1.attachEvent("pageChange",$,this);a1._oMinDate.setYear(this._oMinDate.getUTCFullYear());a1._oMaxDate.setYear(this._oMaxDate.getUTCFullYear());return a1;};m.prototype.exit=function(){if(this._oPopup){this._oPopup.destroy();this._oPopup=null;}if(this._oCalendar){this._oCalendar.removeDelegate(this._oFocusCalendarDelegate);this._oCalendar.destroy();this._oCalendar=null;}if(this._sInvalidateContent){clearTimeout(this._sInvalidateContent);}};m.prototype.onBeforeRendering=function(){var a1=this.getAggregation("timesRow");var b1=this._getFocusedDate();w.call(this);a1.displayDate(b._createLocalDate(b1,true));};m.prototype._setAriaRole=function(a1){var b1=this.getAggregation("timesRow");b1._setAriaRole(a1);b1.invalidate();return this;};m.prototype._getCalendar=function(){var a1;if(!this._oCalendar){a1=new k(this.getId()+"--Cal",{});a1.attachEvent("select",K,this);a1.attachEvent("cancel",function(b1){this._oPopup.close();var c1=this.getAggregation("header").getDomRef("B1");if(c1){c1.focus();}},this);this._oFocusCalendarDelegate={onAfterRendering:function(){this.focus();}};a1.addDelegate(this._oFocusCalendarDelegate,a1);this._oCalendar=a1;}return this._oCalendar;};m.prototype._getMonthPicker=function(){return this.getAggregation("monthPicker");};m.prototype._getYearPicker=function(){return this.getAggregation("yearPicker");};m.prototype.setStartDate=function(a1){b._checkJSDateObject(a1);if(h(this.getStartDate(),a1)){return this;}var b1=a1.getFullYear();b._checkYearInValidRange(b1);var c1=this.getMinDate();if(c1&&a1.getTime()<c1.getTime()){i.warning("startDate < minDate -> minDate as startDate set",this);a1=new Date(c1);}var d1=this.getMaxDate();if(d1&&a1.getTime()>d1.getTime()){i.warning("startDate > maxDate -> maxDate as startDate set",this);a1=new Date(d1);}this.setProperty("startDate",a1);var e1=this.getAggregation("timesRow");e1.setStartDate(a1);this._oUTCStartDate=new U(e1._getStartDate().getTime());w.call(this);var f1=b._createLocalDate(this._getFocusedDate(),true);if(!e1.checkDateFocusable(f1)){this._setFocusedDate(this._oUTCStartDate);e1.displayDate(a1);}return this;};m.prototype.removeAllSelectedDates=function(){this._bDateRangeChanged=true;var a1=this.removeAllAggregation("selectedDates");return a1;};m.prototype.destroySelectedDates=function(){this._bDateRangeChanged=true;var a1=this.destroyAggregation("selectedDates");return a1;};m.prototype.removeAllSpecialDates=function(){this._bDateRangeChanged=true;var a1=this.removeAllAggregation("specialDates");return a1;};m.prototype.destroySpecialDates=function(){this._bDateRangeChanged=true;var a1=this.destroyAggregation("specialDates");return a1;};m.prototype.setIntervalMinutes=function(a1){if(a1>=720){throw new Error("Only intervals < 720 minutes are allowed; "+this);}if(1440%a1>0){throw new Error("A day must be divisible by the interval size; "+this);}this.setProperty("intervalMinutes",a1);var b1=this.getAggregation("timesRow");var c1=b._createLocalDate(this._getFocusedDate(),true);if(!b1.checkDateFocusable(c1)){var d1=o.call(this);this._setFocusedDate(d1);b1.setDate(b._createLocalDate(d1,true));}return this;};m.prototype.setLocale=function(a1){if(this._sLocale!=a1){this._sLocale=a1;this._oLocaleData=undefined;this.invalidate();}return this;};m.prototype.getLocale=function(){if(!this._sLocale){this._sLocale=C.getConfiguration().getFormatSettings().getFormatLocale().toString();}return this._sLocale;};m.prototype._getFocusedDate=function(){if(!this._oFocusedDate){r.call(this);}return this._oFocusedDate;};m.prototype._setFocusedDate=function(a1){if(!(a1 instanceof U)){throw new Error("Date must be a UniversalDate object "+this);}this._oFocusedDate=new U(a1.getTime());};m.prototype.focusDate=function(a1){var b1=false;var c1=this.getAggregation("timesRow");if(!c1.checkDateFocusable(a1)){var d1=b._createUniversalUTCDate(a1,undefined,true);S.call(this,d1);b1=true;}B.call(this,a1,false);if(b1){this.fireStartDateChange();}return this;};m.prototype.displayDate=function(a1){B.call(this,a1,true);return this;};m.prototype.setItems=function(a1){this.setProperty("items",a1);a1=this._getItems();var b1=this.getAggregation("timesRow");b1.setItems(a1);var c1=b._createLocalDate(this._getFocusedDate(),true);if(!b1.checkDateFocusable(c1)){var d1=o.call(this);this._setFocusedDate(d1);b1.setDate(b._createLocalDate(d1,true));}if(!this.getPickerPopup()){var e1=this.getAggregation("datesRow");var f1=Math.floor(a1*1.5);if(f1>31){f1=31;}e1.setDays(f1);var g1=this._getMonthPicker();var h1=Math.floor(a1/2);if(h1>12){h1=12;}g1.setMonths(h1);var i1=this._getYearPicker();var j1=Math.floor(a1/2);if(j1>20){j1=20;}i1.setYears(j1);}w.call(this);return this;};m.prototype._getItems=function(){var a1=this.getItems();if(d.system.phone&&a1>6){return 6;}else{return a1;}};m.prototype._getLocaleData=function(){if(!this._oLocaleData){var a1=this.getLocale();var b1=new e(a1);this._oLocaleData=L.getInstance(b1);}return this._oLocaleData;};m.prototype.setPickerPopup=function(a1){var b1=this.getAggregation("header"),c1,d1,e1;this.setProperty("pickerPopup",a1);if(c1){c1.destroy();}if(a1){b1.setVisibleButton0(false);b1.setVisibleButton1(true);b1.setVisibleButton2(false);b1.detachEvent("pressButton1",F,this);b1.attachEvent("pressButton1",F,this);if(this.getAggregation("datesRow")){this.getAggregation("datesRow").destroy();}if(this._getMonthPicker()){this._getMonthPicker().destroy();}if(this._getYearPicker()){this._getYearPicker().destroy();}}else{b1.setVisibleButton0(true);b1.setVisibleButton1(true);b1.setVisibleButton2(true);b1.detachEvent("pressButton0",E,this);b1.attachEvent("pressButton0",E,this);b1.detachEvent("pressButton1",F,this);b1.attachEvent("pressButton1",F,this);b1.detachEvent("pressButton2",G,this);b1.attachEvent("pressButton2",G,this);if(!this.getAggregation("datesRow")){this.setAggregation("datesRow",this._createDatesRow());}if(!this._getYearPicker()){this.setAggregation("yearPicker",this._createYearPicker());}if(!this._getMonthPicker()){this.setAggregation("monthPicker",this._createMonthPicker());}d1=this._getMonthPicker();e1=this._getYearPicker();d1.setColumns(0);d1.setMonths(6);e1.setColumns(0);e1.setYears(6);}return this;};m.prototype.setMinDate=function(a1){var b1,c1,d1,e1;if(h(a1,this.getMinDate())){return this;}if(!a1){b._updateUTCDate(this._oMinDate.getJSDate(),1,0,1,0,0,0,0);}else{b._checkJSDateObject(a1);this._oMinDate=b._createUniversalUTCDate(a1,undefined,true);b1=this.getAggregation("timesRow");this._oMinDate=b1._getIntervalStart(this._oMinDate);c1=this._oMinDate.getUTCFullYear();b._checkYearInValidRange(c1);if(this._oMaxDate.getTime()<this._oMinDate.getTime()){i.warning("minDate > maxDate -> maxDate set to end of the month",this);this._oMaxDate=b._createUniversalUTCDate(a1,undefined,true);b._updateUTCDate(this._oMaxDate,null,this._oMaxDate.getUTCMonth()+1,0,23,59,59,0);this.setProperty("maxDate",b._createLocalDate(this._oMaxDate,true));}if(this._oFocusedDate){if(this._oFocusedDate.getTime()<this._oMinDate.getTime()){i.warning("focused date < minDate -> minDate focused",this);this.focusDate(a1);}}if(this._oUTCStartDate&&this._oUTCStartDate.getTime()<this._oMinDate.getTime()){i.warning("start date < minDate -> minDate set as start date",this);_.call(this,new U(this._oMinDate.getTime()),true,true);}}this.setProperty("minDate",a1);if(this.getPickerPopup()){e1=this._getCalendar();e1.setMinDate(a1);}else{d1=this._getYearPicker();d1._oMinDate.setYear(this._oMinDate.getUTCFullYear());}return this;};m.prototype.setMaxDate=function(a1){var b1,c1,d1,e1,f1,g1;if(h(a1,this.getMaxDate())){return this;}if(!a1){b._updateUTCDate(this._oMaxDate.getJSDate(),9999,11,31,23,59,59,0);}else{b._checkJSDateObject(a1);this._oMaxDate=b._createUniversalUTCDate(a1,undefined,true);b1=this.getAggregation("timesRow");this._oMaxDate=b1._getIntervalStart(this._oMaxDate);this._oMaxDate.setUTCMinutes(this._oMaxDate.getUTCMinutes()+this.getIntervalMinutes());this._oMaxDate.setUTCMilliseconds(-1);c1=this._oMaxDate.getUTCFullYear();b._checkYearInValidRange(c1);if(this._oMinDate.getTime()>this._oMaxDate.getTime()){i.warning("maxDate < minDate -> minDate set to begin of the month",this);this._oMinDate=b._createUniversalUTCDate(a1,undefined,true);b._updateUTCDate(this._oMinDate,null,null,1,0,0,0,0);this.setProperty("minDate",b._createLocalDate(this._oMinDate,true));}if(this._oFocusedDate){if(this._oFocusedDate.getTime()>this._oMaxDate.getTime()){i.warning("focused date > maxDate -> maxDate focused",this);this.focusDate(a1);}}if(this._oUTCStartDate){d1=new U(this._oUTCStartDate.getTime());d1.setUTCMinutes(d1.getUTCMinutes()+this.getIntervalMinutes()*(this._getItems()-1));if(d1.getTime()>this._oMaxDate.getTime()){e1=new U(this._oMaxDate.getTime());e1.setUTCMinutes(e1.getUTCMinutes()-this.getIntervalMinutes()*(this._getItems()-1));if(e1.getTime()>=this._oMinDate.getTime()){i.warning("end date > maxDate -> maxDate set as end date",this);_.call(this,e1,true,true);}}}}this.setProperty("maxDate",a1);if(this.getPickerPopup()){g1=this._getCalendar();g1.setMaxDate(a1);}else{f1=this._getYearPicker();f1._oMaxDate.setYear(this._oMaxDate.getUTCFullYear());}return this;};m.prototype.onclick=function(a1){if(a1.isMarked("delayedMouseEvent")){return;}if(a1.target.id==this.getId()+"-cancel"){this.onsapescape(a1);}};m.prototype.onmousedown=function(a1){a1.preventDefault();a1.setMark("cancelAutoClose");};m.prototype.onsapescape=function(a1){if(this.getPickerPopup()){s.call(this);this.fireCancel();}else{switch(this._iMode){case 0:this.fireCancel();break;case 1:case 2:case 3:this.setProperty("_currentPicker",n.TIMES_ROW);break;}}};m.prototype.setProperty=function(){var a1=arguments[0],b1=arguments[1];a.prototype.setProperty.apply(this,arguments);if(a1==="_currentPicker"){switch(b1){case"timesRow":this._iMode=0;break;case"datesRow":this._iMode=1;break;case"monthPicker":this._iMode=2;break;case"yearPicker":this._iMode=3;break;default:return;}}return this;};m.prototype._handlePrevious=function(a1){var b1=this._getFocusedDate(),c1,d1,e1,f1,g1,h1,i1,j1;switch(this._iMode){case 0:c1=this._getItems();d1=new U(o.call(this).getTime());e1=this.getIntervalMinutes();d1.setUTCMinutes(d1.getUTCMinutes()-c1*e1);b1.setUTCMinutes(b1.getUTCMinutes()-c1*e1);this._setFocusedDate(b1);_.call(this,d1,true);break;case 1:if(!this.getPickerPopup()){f1=this.getAggregation("datesRow");g1=b._createUniversalUTCDate(f1.getDate());h1=f1.getDays();if(g1.getUTCDate()<=h1){g1.setUTCDate(1);}else{g1.setUTCDate(g1.getUTCDate()-h1);}V.call(this,g1);}break;case 2:if(!this.getPickerPopup()){i1=this._getMonthPicker();if(i1.getMonths()<12){i1.previousPage();x.call(this);}else{b1.setUTCFullYear(b1.getUTCFullYear()-1);S.call(this,b1);this._setFocusedDate(b1);w.call(this);X.call(this,b1.getUTCFullYear(),i1);this.fireStartDateChange();}}break;case 3:if(!this.getPickerPopup()){j1=this._getYearPicker();j1.previousPage();y.call(this);}break;}};m.prototype._handleNext=function(a1){var b1=this._getFocusedDate();switch(this._iMode){case 0:var c1=this._getItems();var d1=new U(o.call(this).getTime());var e1=this.getIntervalMinutes();d1.setUTCMinutes(d1.getUTCMinutes()+c1*e1);b1.setUTCMinutes(b1.getUTCMinutes()+c1*e1);this._setFocusedDate(b1);_.call(this,d1,true);break;case 1:if(!this.getPickerPopup()){var f1=this.getAggregation("datesRow");var g1=b._createUniversalUTCDate(f1.getDate());var h1=new U(g1.getTime());h1.setUTCDate(1);h1.setUTCMonth(h1.getUTCMonth()+1);h1.setUTCDate(0);var i1=f1.getDays();if(g1.getUTCDate()+i1>h1.getUTCDate()){g1.setUTCDate(h1.getUTCDate());}else{g1.setUTCDate(g1.getUTCDate()+i1);}V.call(this,g1);}break;case 2:if(!this.getPickerPopup()){var j1=this._getMonthPicker();if(j1.getMonths()<12){j1.nextPage();x.call(this);}else{b1.setUTCFullYear(b1.getUTCFullYear()+1);S.call(this,b1);this._setFocusedDate(b1);w.call(this);X.call(this,b1.getUTCFullYear(),j1);this.fireStartDateChange();}}break;case 3:if(!this.getPickerPopup()){var k1=this._getYearPicker();k1.nextPage();y.call(this);}break;}};m.prototype._getShowItemHeader=function(){var a1=this.getItems();if(a1>this._iItemsHead){return true;}else{return false;}};function _(a1,b1,c1){var d1=new U(this._oMaxDate.getTime());d1.setUTCMinutes(d1.getUTCMinutes()-this.getIntervalMinutes()*(this._getItems()-1));if(d1.getTime()<this._oMinDate.getTime()){d1=new U(this._oMinDate.getTime());d1.setUTCMinutes(d1.getUTCMinutes()+this.getIntervalMinutes()*(this._getItems()-1));}if(a1.getTime()<this._oMinDate.getTime()){a1=new U(this._oMinDate.getTime());}else if(a1.getTime()>d1.getTime()){a1=d1;}var e1=this.getAggregation("timesRow");var f1=b._createLocalDate(a1,true);e1.setStartDate(f1);this._oUTCStartDate=new U(e1._getStartDate().getTime());f1=b._createLocalDate(this._oUTCStartDate,true);this.setProperty("startDate",f1);w.call(this);if(b1){var g1=b._createLocalDate(this._getFocusedDate(),true);if(!e1.checkDateFocusable(g1)){this._setFocusedDate(a1);e1.setDate(f1);}else{e1.setDate(g1);}}if(!c1){this.fireStartDateChange();}}function o(){if(!this._oUTCStartDate){var a1=this.getAggregation("timesRow");a1.setStartDate(b._createLocalDate(this._getFocusedDate(),true));this._oUTCStartDate=new U(a1._getStartDate().getTime());this._setFocusedDate(this._oUTCStartDate);}return this._oUTCStartDate;}function p(a1){var b1=this._getFocusedDate();var c1=this.getAggregation("timesRow");if(!a1){c1.setDate(b._createLocalDate(b1,true));}else{c1.displayDate(b._createLocalDate(b1,true));}w.call(this);}function r(){var a1=this.getSelectedDates();if(a1&&a1[0]&&a1[0].getStartDate()){this._oFocusedDate=b._createUniversalUTCDate(a1[0].getStartDate(),undefined,true);}else{var b1=new Date();this._oFocusedDate=b._createUniversalUTCDate(b1,undefined,true);}if(this._oFocusedDate.getTime()<this._oMinDate.getTime()){this._oFocusedDate=new U(this._oMinDate.getTime());}else if(this._oFocusedDate.getTime()>this._oMaxDate.getTime()){this._oFocusedDate=new U(this._oMaxDate.getTime());}}m.prototype._showCalendarPicker=function(){var a1=b._createLocalDate(this._getFocusedDate(),true);var b1=this._getCalendar();var c1=new j({startDate:a1});b1.displayDate(a1,false);b1.removeAllSelectedDates();b1.addSelectedDate(c1);b1.setMinDate(this.getMinDate());b1.setMaxDate(this.getMaxDate());W.call(this,b1);this._showOverlay();};m.prototype._showOverlay=function(){this.$("contentOver").css("display","");};m.prototype._hideOverlay=function(){this.$("contentOver").css("display","none");};function s(a1){if(this._oPopup&&this._oPopup.isOpen()){this._oPopup.close();}this._hideOverlay();if(!a1){p.call(this);}this._getCalendar()._closePickers();}function t(){var a1=this._getFocusedDate();var b1=this._getItems();var c1=this.getAggregation("datesRow");var d1=c1.getSelectedDates()[0];d1.setStartDate(b._createLocalDate(a1,true));var e1=new U(a1.getTime());e1.setUTCDate(1);e1.setUTCMonth(e1.getUTCMonth()+1);e1.setUTCDate(0);var f1=e1.getUTCDate();var g1=Math.floor(b1*1.5);if(g1>f1){g1=f1;}c1.setDays(g1);this.setProperty("_currentPicker",n.DATES_ROW);this._showOverlay();V.call(this,a1);this._iMode=1;}function u(){var a1=this._getFocusedDate();var b1=this._getMonthPicker();this.setProperty("_currentPicker",n.MONTH_PICKER);this._showOverlay();b1.setMonth(a1.getUTCMonth());X.call(this,a1.getUTCFullYear(),b1);this._iMode=2;x.call(this);}function v(){var a1=this._getFocusedDate();var b1=this._getYearPicker();this.setProperty("_currentPicker",n.YEAR_PICKER);this._showOverlay();b1.setDate(a1.getJSDate());y.call(this);this._iMode=3;}function w(){z.call(this);x.call(this);}function x(a1){var b1=new U(o.call(this).getTime());var c1=this._getItems();var d1=b1.getJSDate().getUTCFullYear();var e1=this._oMaxDate.getJSDate().getUTCFullYear();var f1=this._oMinDate.getJSDate().getUTCFullYear();var g1=b1.getJSDate().getUTCMonth();var h1=this._oMaxDate.getJSDate().getUTCMonth();var i1=this._oMinDate.getJSDate().getUTCMonth();var j1=b1.getJSDate().getUTCDate();var k1=this._oMaxDate.getJSDate().getUTCDate();var l1=this._oMinDate.getJSDate().getUTCDate();var m1=b1.getJSDate().getUTCHours();var n1=this._oMaxDate.getJSDate().getUTCHours();var o1=this._oMinDate.getJSDate().getUTCHours();var p1=b1.getJSDate().getUTCMinutes();var q1=this._oMaxDate.getJSDate().getUTCMinutes();var r1=this._oMinDate.getJSDate().getUTCMinutes();var s1=this.getAggregation("header");if(this._iMode==2&&!a1){var t1=this._getMonthPicker();var u1=t1.getMonths();var v1=t1.getStartMonth();var w1=v1+u1-1;if(v1==0||(d1==f1&&v1<=i1)){s1.setEnabledPrevious(false);}else{s1.setEnabledPrevious(true);}if(w1>10||(d1==e1&&w1>=h1)){s1.setEnabledNext(false);}else{s1.setEnabledNext(true);}return;}if((d1<f1||(d1==f1&&(a1||(g1<i1||(g1==i1&&(j1<l1||(j1==l1&&(m1<o1||(m1==o1&&p1<=r1)))))))))||((this._iMode==1||this._iMode==2)&&this.getPickerPopup())){s1.setEnabledPrevious(false);}else{s1.setEnabledPrevious(true);}b1.setUTCMinutes(b1.getUTCMinutes()+(c1)*this.getIntervalMinutes()-1);d1=b1.getJSDate().getUTCFullYear();g1=b1.getJSDate().getUTCMonth();j1=b1.getJSDate().getUTCDate();m1=b1.getJSDate().getUTCHours();p1=b1.getJSDate().getUTCMinutes();if((d1>e1||(d1==e1&&(!a1||(g1>h1||(g1==h1&&(j1>k1||(j1==k1&&(m1>n1||(m1==n1&&p1>=q1)))))))))||((this._iMode==1||this._iMode==2)&&this.getPickerPopup())){s1.setEnabledNext(false);}else{s1.setEnabledNext(true);}if(this._iMode===1){var x1=new U(b1.getTime());x1.setUTCDate(1);x1.setUTCMonth(x1.getUTCMonth()+1);x1.setUTCDate(0);var y1=this.getAggregation("datesRow").getDays();b1.setUTCDate(1+(Math.ceil(b1.getUTCDate()/y1)-1)*y1);if(x1.getUTCDate()-b1.getUTCDate()<y1){b1.setUTCDate(x1.getUTCDate()-y1+1);}j1=b1.getUTCDate();if(j1<=1||(d1==f1&&g1==i1&&j1<=l1)){s1.setEnabledPrevious(false);}else{s1.setEnabledPrevious(true);}if((j1+y1)>=x1.getUTCDate()||(d1==e1&&g1==h1&&j1>=k1)){s1.setEnabledNext(false);}else{s1.setEnabledNext(true);}}}function y(){var a1=this._getYearPicker();var b1=a1.getYears();var c1=b._createUniversalUTCDate(a1.getProperty("_middleDate").toLocalJSDate());c1.setUTCFullYear(c1.getUTCFullYear()+Math.floor(b1/2));var d1=this.getAggregation("header");var e1=new U(this._oMaxDate);e1.setUTCFullYear(e1.getUTCFullYear()-Math.ceil(b1/2));e1.setUTCMonth(11,31);var f1=new U(this._oMinDate);f1.setUTCFullYear(f1.getUTCFullYear()+Math.floor(b1/2)+1);f1.setUTCMonth(0,1);if(c1.getTime()>e1.getTime()){d1.setEnabledNext(false);}else{d1.setEnabledNext(true);}if(c1.getTime()<f1.getTime()){d1.setEnabledPrevious(false);}else{d1.setEnabledPrevious(true);}}function z(){var a1=this.getAggregation("header");var b1;var c1=o.call(this);var d1;var e1=this._getLocaleData();var f1=[];var g1=[];var h1;var i1=false;var j1;var k1=false;if(e1.oLocale.sLanguage.toLowerCase()==="ja"||e1.oLocale.sLanguage.toLowerCase()==="zh"){j1=c.getDateInstance({format:"d"}).format(c1,true);}else{j1=(c1.getUTCDate()).toString();}if(this._bLongMonth||!this._bNamesLengthChecked){f1=e1.getMonthsStandAlone("wide");}else{i1=true;f1=e1.getMonthsStandAlone("abbreviated");g1=e1.getMonthsStandAlone("wide");}var l1=c1.getUTCMonth();b1=f1[l1];if(i1){h1=g1[f1[l1]];}if(!this.getPickerPopup()){a1.setTextButton0(j1);a1.setTextButton1(b1);a1.setTextButton2(this._oYearFormat.format(c1,true));}else{d1=c.getInstance({style:"long",strictParsing:true,relative:k1},e1.oLocale);h1=j1=d1.format(b._createLocalDate(c1,true));a1.setTextButton1(j1);}if(i1){a1.setAriaLabelButton1(h1);}}function A(a1,b1){var c1;var d1=false;if(a1.getTime()<this._oMinDate.getTime()){c1=this._oMinDate;d1=true;}else if(a1.getTime()>this._oMaxDate.getTime()){c1=this._oMaxDate;d1=true;}else{c1=a1;}this._setFocusedDate(c1);if(d1||b1){S.call(this,c1);p.call(this,false);this.fireStartDateChange();}}function B(a1,b1){if(a1&&(!this._oFocusedDate||this._oFocusedDate.getTime()!=a1.getTime())){b._checkJSDateObject(a1);a1=b._createUniversalUTCDate(a1,undefined,true);var c1=a1.getUTCFullYear();b._checkYearInValidRange(c1);if(a1.getTime()<this._oMinDate.getTime()||a1.getTime()>this._oMaxDate.getTime()){throw new Error("Date must not be in valid range (minDate and maxDate); "+this);}this._setFocusedDate(a1);if(this.getDomRef()&&this._iMode==0){p.call(this,b1);}}}function E(a1){if(this._iMode!=1){t.call(this);}else{this.setProperty("_currentPicker",n.TIMES_ROW);}}function F(a1){var b1;if(this.getPickerPopup()){this._showCalendarPicker();}else{if(this._iMode!=2){b1=function(){var c1=this._getMonthPicker();c1._oItemNavigation.focusItem(c1.getProperty("_focusedMonth"));c1.removeDelegate(b1);};u.call(this);this._getMonthPicker().addDelegate({onAfterRendering:b1},this);}else{this.setProperty("_currentPicker",n.TIMES_ROW);}}}function G(a1){var b1;if(this._iMode!=3){b1=function(){var c1=this._getYearPicker();c1.focus();c1.removeDelegate(b1);};v.call(this);this._getYearPicker().addDelegate({onAfterRendering:b1},this);}else{this.setProperty("_currentPicker",n.TIMES_ROW);}}function I(a1){this.fireSelect();}function J(a1){var b1=b._createUniversalUTCDate(a1.getParameter("date"),undefined,true);var c1=a1.getParameter("notVisible");A.call(this,b1,c1);}function K(a1){var b1=a1.getSource(),c1=b1.getSelectedDates()[0].getStartDate();var d1=new U(this._getFocusedDate().getTime());var e1=b._createUniversalUTCDate(c1);d1.setUTCFullYear(e1.getUTCFullYear());d1.setUTCMonth(e1.getUTCMonth(),e1.getUTCDate());A.call(this,d1,true);s.call(this);}function N(a1){var b1=new U(this._getFocusedDate().getTime());var c1=a1.oSource;var d1=c1.getSelectedDates()[0];var e1=b._createUniversalUTCDate(d1.getStartDate());if(!this.getPickerPopup()||e1.getUTCMonth()==b1.getUTCMonth()){b1.setUTCDate(e1.getUTCDate());b1.setUTCMonth(e1.getUTCMonth());b1.setUTCFullYear(e1.getUTCFullYear());A.call(this,b1,true);this.setProperty("_currentPicker",n.TIMES_ROW);}this._addTimesRowFocusDelegate();}function O(a1){var b1=new U(this._getFocusedDate().getTime());var c1=b._createUniversalUTCDate(a1.getParameter("date"),undefined,true);var d1=a1.getParameter("otherMonth");if(d1&&c1.getUTCMonth()==b1.getUTCMonth()&&c1.getUTCFullYear()==b1.getUTCFullYear()){V.call(this,c1);}}function Q(a1){var b1=new U(this._getFocusedDate().getTime());var c1=this._getMonthPicker();var d1=c1.getMonth();b1.setUTCMonth(d1);if(d1!=b1.getUTCMonth()){b1.setUTCDate(0);}A.call(this,b1,true);this.setProperty("_currentPicker",n.TIMES_ROW);this._addTimesRowFocusDelegate();}function R(a1){var b1=new U(this._getFocusedDate().getTime());var c1=this._getYearPicker();var d1=b._createUniversalUTCDate(c1.getDate());var e1=b1.getUTCMonth();d1.setUTCMonth(b1.getUTCMonth(),b1.getUTCDate());d1.setUTCHours(b1.getUTCHours());d1.setUTCMinutes(b1.getUTCMinutes());b1=d1;if(e1!=b1.getUTCMonth()){b1.setUTCDate(0);}A.call(this,b1,true);this.setProperty("_currentPicker",n.TIMES_ROW);this._addTimesRowFocusDelegate();}m.prototype._addTimesRowFocusDelegate=function(){var a1={onAfterRendering:function(){this._oItemNavigation.focusItem(this._oItemNavigation.getFocusedIndex());this.removeDelegate(a1);}},b1=this.getAggregation("timesRow");b1.addDelegate(a1,b1);};function S(a1){var b1=this.getAggregation("timesRow");var c1=o.call(this);var d1=b1._oItemNavigation.getFocusedIndex();c1=new U(a1.getTime());c1.setUTCMinutes(c1.getUTCMinutes()-d1*this.getIntervalMinutes());_.call(this,c1,false,true);}function V(a1){var b1=this.getAggregation("datesRow");var c1=this.getAggregation("header");if(!this.getPickerPopup()){var d1=new U(a1.getTime());d1.setUTCDate(1);d1.setUTCMonth(d1.getUTCMonth()+1);d1.setUTCDate(0);var e1=b1.getDays();var f1=new U(a1.getTime());f1.setUTCDate(1+(Math.ceil(a1.getUTCDate()/e1)-1)*e1);if(d1.getUTCDate()-f1.getUTCDate()<e1){f1.setUTCDate(d1.getUTCDate()-e1+1);}b1.setStartDate(b._createLocalDate(f1,true));var g1=f1.getJSDate().getUTCFullYear();var h1=this._oMaxDate.getJSDate().getUTCFullYear();var i1=this._oMinDate.getJSDate().getUTCFullYear();var j1=f1.getJSDate().getUTCMonth();var k1=this._oMaxDate.getJSDate().getUTCMonth();var l1=this._oMinDate.getJSDate().getUTCMonth();var m1=f1.getJSDate().getUTCDate();var n1=this._oMaxDate.getJSDate().getUTCDate();var o1=this._oMinDate.getJSDate().getUTCDate();if(m1<=1||(g1==i1&&j1==l1&&m1<=o1)){c1.setEnabledPrevious(false);}else{c1.setEnabledPrevious(true);}if((m1+e1)>=d1.getUTCDate()||(g1==h1&&j1==k1&&m1>=n1)){c1.setEnabledNext(false);}else{c1.setEnabledNext(true);}if(!this._oFocusDatesRowDelegate){this._oFocusDatesRowDelegate={onAfterRendering:function(){this.focus();}};b1.addDelegate(this._oFocusDatesRowDelegate,b1);}}else{c1.setEnabledPrevious(false);c1.setEnabledNext(false);}b1.setDate(b._createLocalDate(a1,true));}function W(a1){if(!this._oPopup){var b1=new P({placement:"VerticalPreferredBottom",showHeader:false,showArrow:false,verticalScrolling:false});b1.oPopup.setDurations(0,0);b1.addEventDelegate({onsapescape:this._oCalendar.onsapescape},this._oCalendar);this._oPopup=b1;}this._oPopup.addContent(a1);this._oPopup.attachAfterClose(function(){this._hideOverlay();this._addTimesRowFocusDelegate();},this);this._oPopup.attachAfterOpen(function(){var d1=c1.$("B1");var e1=this._oPopup.$();var f1=Math.floor((e1.width()-d1.width())/2);this._oPopup.setOffsetX(C.getConfiguration().getRTL()?f1:-f1);var g1=d1.height();this._oPopup.setOffsetY(this._oPopup._getCalculatedPlacement()==="Top"?g1:-g1);},this);var c1=this.getAggregation("header");this._oPopup.openBy(c1.getDomRef("B1"));}function X(a1,b1){var c1=0;var d1=11;if(a1==this._oMinDate.getUTCFullYear()){c1=this._oMinDate.getUTCMonth();}if(a1==this._oMaxDate.getUTCFullYear()){d1=this._oMaxDate.getUTCMonth();}b1.setMinMax(c1,d1);}function Z(a1){x.call(this);}function $(a1){y.call(this);}return m;});
