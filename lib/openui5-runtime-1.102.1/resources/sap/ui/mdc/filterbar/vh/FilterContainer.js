/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/filterbar/IFilterContainer","sap/ui/layout/AlignedFlowLayout","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/VBox"],function(I,A,T,a,V){"use strict";var F=I.extend("sap.ui.mdc.filterbar.vh.FilterContainer",{metadata:{aggregations:{_layout:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}}}});F.prototype.init=function(){this.aLayoutItems=[];this.oToolbar=new T(this.getId()+"-tbr",{content:[new a()]});this.oAlgnLayout=new A(this.getId()+"-aflayout",{visible:"{$sap.ui.filterbar.mdc.FilterBarBase>/expandFilterFields}"}).addStyleClass("sapUiMdcFilterBarBaseAFLayout");this.oLayout=new V(this.getId()+"-vbox",{items:[this.oToolbar,this.oAlgnLayout]});this.setAggregation("_layout",this.oLayout,true);};F.prototype.exit=function(){this.aLayoutItems.forEach(function(i){i.destroy();});this.aLayoutItems=null;};F.prototype.addControl=function(c){this.oToolbar.addContent(c);};F.prototype.insertControl=function(c,i){this.oToolbar.insertContent(c,i);};F.prototype.removeControl=function(c){this.oToolbar.removeContent(c);};F.prototype.addEndContent=function(c){this.oAlgnLayout.addEndContent(c);};F.prototype.insertFilterField=function(c,i){this.aLayoutItems.splice(i,0,c);this._updateFilterBarLayout();};F.prototype.removeFilterField=function(c){var n=-1;this.aLayoutItems.some(function(l,i){if(c===l){n=i;return true;}return false;});if(n>=0){this.aLayoutItems.splice(n,1);this._updateFilterBarLayout();}};F.prototype.getFilterFields=function(){return this.oAlgnLayout.getContent();};F.prototype._updateFilterBarLayout=function(s){var n=this.aLayoutItems.length;var t=this.getParent().getFilterFieldThreshold();var u=s||n<=t+1;if(!u){var b=this.oAlgnLayout.getContent();b.some(function(o,i){if(o!=this.aLayoutItems[i]){u=true;return true;}return false;}.bind(this));}if(u){this.oAlgnLayout.removeAllContent();this.aLayoutItems.some(function(l,c){if(s||n<=t||c+1<t){this.oAlgnLayout.insertContent(l,c);return false;}return true;}.bind(this));}var S=this.oAlgnLayout.getEndContent()[0];S.setVisible(!s&&n>t);};return F;});
