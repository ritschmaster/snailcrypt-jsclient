/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/fl/Utils','sap/ui/fl/apply/api/FlexRuntimeInfoAPI'],function(U,F){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");return{properties:{value:{ignore:true},additionalValue:{ignore:true}},getStableElements:function(f){if(!f.getFieldInfo()){return[];}var o=f.getFieldInfo();var c=typeof o.getSourceControl()==="string"?sap.ui.getCore().byId(o.getSourceControl()):o.getSourceControl();if(!c){c=f;}var a=U.getAppComponentForControl(c)||U.getAppComponentForControl(f);var s=o._createPanelId(U,F);return[{id:s,appComponent:a}];},actions:{settings:function(f){if(!f.getFieldInfo()){return{};}return{name:r.getText("info.POPOVER_DEFINE_LINKS"),handler:function(c,p){var o=c.getFieldInfo();return o.getContent().then(function(P){o.addDependent(P);return F.waitForChanges({element:P}).then(function(){var e=sap.ui.mdc.p13n.Engine.getInstance();p.fnAfterClose=function(){P.destroy();};var g=function(){return e.getRTASettingsActionHandler(P,p,"LinkItems").then(function(C){C.forEach(function(b){var s=b.selectorElement;delete b.selectorElement;var A=U.getAppComponentForControl(c)||U.getAppComponentForControl(f);b.selectorControl={id:s.getId(),controlType:s===P?"sap.ui.mdc.link.Panel":"sap.ui.mdc.link.PanelItem",appComponent:A};});return C;});};var a=P.getItems();if(a.length>0){return F.waitForChanges({selectors:a}).then(function(){return g();});}else{return g();}});});},CAUTION_variantIndependent:true};}}};});
