/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core"],function(C){"use strict";var F={};var I="sap.ui.mdc.IFilter";F.setFilter=function(f){var n=typeof f==="object"?f.getId():f;var O=this.getFilter();if(O!==n){this._validateFilter(f);var b=C.byId(this.getFilter());if(b){d(this,b);}this.setAssociation("filter",f,true);var N=C.byId(this.getFilter());if(N){r(this,N);}}return this;};function o(e){this._rebind();if(this._onFilterSearch){this._onFilterSearch(e);}}function a(e){if(this._onFiltersChanged){this._onFiltersChanged(e);}}function r(c,f){f.attachSearch(o,c);if(f.attachFiltersChanged instanceof Function){f.attachFiltersChanged(a,c);}if(c._onFilterProvided instanceof Function){c._onFilterProvided(f);}}function d(c,f){f.detachSearch(o,c);if(f.detachFiltersChanged instanceof Function){f.detachFiltersChanged(a,c);}if(c._onFilterRemoved instanceof Function){c._onFilterRemoved(f);}}function _(c){if(!(c&&c.getMetadata()&&c.getMetadata().hasAssociation("filter"))){throw new Error("Please add the 'filter' association to your control metadata"+c);}if(!(c.rebind instanceof Function)){throw new Error("Please implement the method 'rebind' for the control "+c);}if(!(c.isFilteringEnabled instanceof Function)){throw new Error("Please implement the method isFilteringEnabled for the control "+c);}}F._validateFilter=function(f){_(this);var b=typeof f==="object"?f:C.byId(f);if(b&&!b.isA(I)){throw new Error("\""+f+"\" is not valid for association \"filter\"."+" Please use an object that implements the \""+I+"\" interface");}};F.rebind=function(){if(this.bIsDestroyed){return;}var p;var b;var f=C.byId(this.getFilter()),i=this.isFilteringEnabled();if(i||f){if(f){p=f.validate(true);}if(i){b=this.retrieveInbuiltFilter().then(function(c){return c.validate(true);});}Promise.all([p,b]).then(function(){this._rebind();}.bind(this),function(){});}else{this._rebind();}};return function(){this.setFilter=F.setFilter;this._validateFilter=F._validateFilter;this.rebind=F.rebind;};});
