/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","./ContactDetailsRenderer","sap/ui/core/Title","sap/m/VBox","sap/m/Text","sap/m/Link","sap/m/Label","sap/m/Image","sap/ui/layout/form/SimpleForm"],function(C,c,T,V,d,L,e,I,S){"use strict";var f=C.extend("sap.ui.mdc.link.ContactDetails",{metadata:{library:"sap.ui.mdc",defaultAggregation:"items",aggregations:{items:{type:"sap.ui.mdc.link.ContactDetailsItem",multiple:true,singularName:"item"},_content:{type:"sap.m.VBox",visibility:"hidden",multiple:false}}},renderer:c});var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");f.prototype.applySettings=function(){C.prototype.applySettings.apply(this,arguments);this._createContent();};f.prototype._createContent=function(){var s=[];this.getItems().forEach(function(o){var t=new T({text:o.getSectionTitle()});var i=new I({src:o.getPhoto(),visible:!!o.getPhoto(),decorative:false,width:"5rem",height:"5rem"});var l=new e({text:"",labelFor:i,visible:!!o.getPhoto()});var a=new d({text:o.getFormattedName(),visible:!!o.getFormattedName()});var b=new e({text:r.getText("info.POPOVER_CONTACT_SECTION_NAME"),labelFor:a,visible:!!o.getFormattedName()});var g=new d({text:o.getRole(),visible:!!o.getRole()});var h=new e({text:r.getText("info.POPOVER_CONTACT_SECTION_ROLE"),labelFor:g,visible:!!o.getRole()});var j=new d({text:o.getTitle(),visible:!!o.getTitle()});var k=new e({text:r.getText("info.POPOVER_CONTACT_SECTION_JOBTITLE"),labelFor:j,visible:!!o.getTitle()});var m=new d({text:o.getOrg(),visible:!!o.getOrg()});var n=new e({text:r.getText("info.POPOVER_CONTACT_SECTION_DEPARTMENT"),labelFor:m,visible:!!o.getOrg()});var p=new S({editable:false,layout:"ColumnLayout",content:[t,l,i,b,a,h,g,k,j,n,m]});this._addEmailsToSimpleForm(o,p,r);this._addPhonesToSimpleForm(o,p,r);this._addAddressesToSimpleForm(o,p,r);s.push(p);}.bind(this));this.setAggregation("_content",new V({items:s}));};f.prototype._addEmailsToSimpleForm=function(o,s,r){o.getEmails().filter(function(a){return!a.processed&&!!a.getTypes()&&(a.getTypes().indexOf("preferred")>-1||a.getTypes().indexOf("work")>-1);}).sort(function(a,b){if(a.getTypes().indexOf("preferred")>-1&&b.getTypes().indexOf("preferred")<0){return-1;}if(b.getTypes().indexOf("preferred")>-1&&a.getTypes().indexOf("preferred")<0){return 1;}return 0;}).forEach(function(a){this._addLabeledLink("email",r.getText("info.POPOVER_CONTACT_SECTION_EMAIL"),a,s);a.processed=true;},this);};f.prototype._addPhonesToSimpleForm=function(o,s,r){o.getPhones().filter(function(a){return!a.processed&&!!a.getTypes()&&a.getTypes().indexOf("work")>-1;}).sort(function(a,b){if(a.getTypes().indexOf("preferred")>-1){return-1;}if(b.getTypes().indexOf("preferred")>-1){return 1;}return 0;}).forEach(function(a){this._addLabeledLink("phone",r.getText("info.POPOVER_CONTACT_SECTION_PHONE"),a,s);a.processed=true;},this);o.getPhones().filter(function(a){return!a.processed&&!!a.getTypes()&&a.getTypes().indexOf("cell")>-1;}).sort(function(a,b){if(a.getTypes().indexOf("preferred")>-1){return-1;}if(b.getTypes().indexOf("preferred")>-1){return 1;}return 0;}).forEach(function(a){this._addLabeledLink("phone",r.getText("info.POPOVER_CONTACT_SECTION_MOBILE"),a,s);a.processed=true;},this);o.getPhones().filter(function(a){return!a.processed&&!!a.getTypes()&&a.getTypes().indexOf("fax")>-1;}).sort(function(a,b){if(a.getTypes().indexOf("preferred")>-1){return-1;}if(b.getTypes().indexOf("preferred")>-1){return 1;}return 0;}).forEach(function(a){this._addLabeledLink("phone",r.getText("info.POPOVER_CONTACT_SECTION_FAX"),a,s);a.processed=true;},this);o.getPhones().filter(function(a){return!a.processed&&!!a.getTypes()&&a.getTypes().indexOf("preferred")>-1;}).forEach(function(a){this._addLabeledLink("phone",r.getText("info.POPOVER_CONTACT_SECTION_PHONE"),a,s);a.processed=true;},this);};f.prototype._addAddressesToSimpleForm=function(o,s,r){o.getAddresses().filter(function(a){return!a.processed&&!!a.getTypes()&&(a.getTypes().indexOf("preferred")>-1||a.getTypes().indexOf("work")>-1);}).sort(function(a,b){if(a.getTypes().indexOf("preferred")>-1&&b.getTypes().indexOf("preferred")<0){return-1;}if(b.getTypes().indexOf("preferred")>-1&&a.getTypes().indexOf("preferred")<0){return 1;}return 0;}).forEach(function(a){this._addLabeledAddress(a,s,r);a.processed=true;},this);};f.prototype._addLabeledAddress=function(o,s,r){var a=function(g,h,i,R,j){var v=[];if(g){v.push(g);}if(h&&i){v.push(h+" "+i);}else{if(h){v.push(h);}if(i){v.push(i);}}if(R){v.push(R);}if(j){v.push(j);}return v.join(', ');};var A=function(g,h,i,R,j){return!!(g||h||i||R||j);};var p;var b;if(o.getBindingPath("street")&&o.getBindingPath("code")&&o.getBindingPath("locality")&&o.getBindingPath("region")&&o.getBindingPath("country")){p=[{path:o.getBindingPath("street")?o.getBindingPath("street"):"$notExisting"},{path:o.getBindingPath("code")?o.getBindingPath("code"):"$notExisting"},{path:o.getBindingPath("locality")?o.getBindingPath("locality"):"$notExisting"},{path:o.getBindingPath("region")?o.getBindingPath("region"):"$notExisting"},{path:o.getBindingPath("country")?o.getBindingPath("country"):"$notExisting"}];b=new d();b.bindProperty("text",{parts:p,formatter:a});b.bindProperty("visible",{parts:p,formatter:A});}else{b=new d({text:a(o.getStreet(),o.getCode(),o.getLocality(),o.getRegion(),o.getCountry()),visible:A(o.getStreet(),o.getCode(),o.getLocality(),o.getRegion(),o.getCountry())});}var l=new e({text:r.getText("info.POPOVER_CONTACT_SECTION_ADR"),labelFor:b.getId()});s.addContent(l);s.addContent(b);};f.prototype._addLabeledLink=function(l,s,o,a){var b;if(o.getBindingPath("uri")){b=new L();b.bindProperty("href",{path:o.getBindingPath("uri"),formatter:function(v){return(l==="email"?"mailto:":"tel:")+v;}});b.bindProperty("text",{path:o.getBindingPath("uri")});b.bindProperty("visible",{path:o.getBindingPath("uri"),formatter:function(v){return!!v;}});}else{b=new L({href:l==="email"?"mailto:":"tel:"+o.getUri(),text:o.getUri(),visible:!!o.getUri()});}var g=new e({text:s,labelFor:b.getId()});a.addContent(g);a.addContent(b);};return f;});
