/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/mdc/field/FieldBase','sap/ui/mdc/field/FieldBaseRenderer','sap/ui/mdc/enum/FieldDisplay','sap/base/util/merge','sap/base/util/deepEqual'],function(F,a,b,m,d){"use strict";var c=F.extend("sap.ui.mdc.FilterField",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/field/FilterField.designtime",properties:{operators:{type:"string[]",group:"Data",defaultValue:[]},defaultOperator:{type:"string",group:"Data",defaultValue:null}},events:{change:{parameters:{value:{type:"string"},valid:{type:"boolean"},conditions:{type:"object[]"},promise:{type:"boolean"}}}}},renderer:a});c.prototype.init=function(){F.prototype.init.apply(this,arguments);this._oObserver.observe(this,{properties:["value","operators"]});};c.prototype.exit=function(){F.prototype.exit.apply(this,arguments);};c.prototype.setProperty=function(p,v,s){if(p==="conditions"&&this._bParseError&&d(this.getConditions(),this.validateProperty(p,v))){if(this._oContentFactory.getBoundProperty()){if(this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true,true);}}else{var C=this._getContent()[0];if(C&&C.setValue){C.setValue();}this._removeUIMessage();}this._bParseError=false;}return F.prototype.setProperty.apply(this,arguments);};c.prototype._observeChanges=function(C){F.prototype._observeChanges.apply(this,arguments);if(C.name==="operators"){this._updateInternalContent();}};c.prototype._fireChange=function(C,v,w,p){var V;if(C){if(v){if(C.length==1){V=C[0].values[0];}}else{V=w;}}this.fireChange({value:V,valid:v,conditions:m([],C),promise:p});};c.prototype._getOperators=function(){var o=this.getOperators();if(o.length===0){o=F.prototype._getOperators.apply(this,arguments);}return o;};c.prototype.setOperators=function(o){var O=[];if(!Array.isArray(o)){o=o.split(",");}o.forEach(function(e){if(typeof e==="string"){O.push(e);}else{O.push(e.name);}});this.setProperty("operators",O);return this;};c.prototype.addOperator=function(o){var O=this._getOperators();var s=o;if(typeof o!=="string"){s=o.name;}if(O.indexOf(s)<0){O.push(s);this.setOperators(O);}return this;};c.prototype.addOperators=function(o){if(!Array.isArray(o)){o=[o];}o.forEach(function(O){this.addOperator(O);}.bind(this));return this;};c.prototype.removeOperator=function(o){var O=this.getOperators();var s=o;if(typeof o!=="string"){s=o.name;}if(O.indexOf(s)>-1){O.splice(O.indexOf(s),1);this.setOperators(O);}};c.prototype.removeOperators=function(o){if(!Array.isArray(o)){o=[o];}o.forEach(function(O){this.removeOperator(O);}.bind(this));};c.prototype.removeAllOperators=function(){this.setOperators([]);};c.prototype.setDefaultOperator=function(o){var n=o;if(o&&typeof o!=="string"){n=o.name;}this.setProperty("defaultOperator",n);return this;};c.prototype._checkCreateInternalContent=function(){if(!this.bIsDestroyed&&!this.isPropertyInitial("dataType")){var i=this.getFieldHelp();var f=sap.ui.getCore().byId(i);var B=this.getBindingInfo("conditions");var o=this.getBinding("conditions");if(this.getDisplay()!==b.Value&&i&&(!f||(B&&!o))){return;}this._oContentFactory.retrieveDataType();F.prototype._checkCreateInternalContent.apply(this,arguments);}};c.prototype._handleModelContextChange=function(e){F.prototype._handleModelContextChange.apply(this,arguments);if(this._getContent().length===0){this._triggerCheckCreateInternalContent();}};return c;});
