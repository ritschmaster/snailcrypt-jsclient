sap.ui.define(["sap/ui/webc/common/thirdparty/localization/DateFormat","sap/ui/webc/common/thirdparty/base/Keys","sap/ui/webc/common/thirdparty/base/types/Integer","sap/ui/webc/common/thirdparty/base/locale/getLocale","sap/ui/webc/common/thirdparty/localization/dates/CalendarDate","sap/ui/webc/common/thirdparty/localization/dates/ExtremeDates","./CalendarPart","./generated/templates/YearPickerTemplate.lit","./generated/themes/YearPicker.css"],function(e,t,s,a,i,r,m,n,o){"use strict";function h(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var f=h(e);var p=h(s);var l=h(a);var c=h(i);const _={tag:"ui5-yearpicker",properties:{selectedDates:{type:p,multiple:true,compareValues:true},_years:{type:Object,multiple:true},_hidden:{type:Boolean,noAttribute:true}},events:{change:{},navigate:{}}};const d=20;const y=4;class u extends m{static get metadata(){return _}static get styles(){return o}static get template(){return n}onBeforeRendering(){this._buildYears()}_buildYears(){if(this._hidden){return}const e=f.getDateInstance({format:"y",calendarType:this._primaryCalendarType},l());this._calculateFirstYear();this._lastYear=this._firstYear+d-1;const t=this._calendarDate;const s=this._minDate;const a=this._maxDate;const i=new c(t,this._primaryCalendarType);i.setYear(this._firstYear);const r=[];let m;for(let n=0;n<d;n++){m=i.valueOf()/1e3;const o=this.selectedDates.some(e=>{const t=c.fromTimestamp(e*1e3,this._primaryCalendarType);return t.getYear()===i.getYear()});const h=i.getYear()===t.getYear();const f=i.getYear()<s.getYear()||i.getYear()>a.getYear();const p={timestamp:m.toString(),_tabIndex:h?"0":"-1",focusRef:h,selected:o,ariaSelected:o?"true":"false",year:e.format(i.toLocalJSDate()),disabled:f,classes:"ui5-yp-item"};if(o){p.classes+=" ui5-yp-item--selected"}if(f){p.classes+=" ui5-yp-item--disabled"}const l=parseInt(n/y);if(r[l]){r[l].push(p)}else{r[l]=[p]}i.setYear(i.getYear()+1)}this._years=r}_calculateFirstYear(){const e=r.getMaxCalendarDate(this._primaryCalendarType).getYear();const t=this._calendarDate.getYear();if(!this._firstYear){this._firstYear=t-d/2}if(t<this._firstYear){this._firstYear-=d}else if(t>=this._firstYear+d){this._firstYear+=d}if(Math.abs(this._firstYear-t)>=d){this._firstYear=t-d/2}this._firstYear=Math.max(this._firstYear,this._minDate.getYear());this._firstYear=Math.min(this._firstYear,this._maxDate.getYear());if(this._firstYear>e-d+1){this._firstYear=e-d+1}}onAfterRendering(){if(!this._hidden){this.focus()}}_onkeydown(e){let s=true;if(t.isEnter(e)){this._selectYear(e)}else if(t.isSpace(e)){e.preventDefault()}else if(t.isLeft(e)){this._modifyTimestampBy(-1)}else if(t.isRight(e)){this._modifyTimestampBy(1)}else if(t.isUp(e)){this._modifyTimestampBy(-y)}else if(t.isDown(e)){this._modifyTimestampBy(y)}else if(t.isPageUp(e)){this._modifyTimestampBy(-d)}else if(t.isPageDown(e)){this._modifyTimestampBy(d)}else if(t.isHome(e)||t.isEnd(e)){this._onHomeOrEnd(t.isHome(e))}else if(t.isHomeCtrl(e)){this._setTimestamp(parseInt(this._years[0][0].timestamp))}else if(t.isEndCtrl(e)){this._setTimestamp(parseInt(this._years[d/y-1][y-1].timestamp))}else{s=false}if(s){e.preventDefault()}}_onHomeOrEnd(e){this._years.forEach(t=>{const s=t.findIndex(e=>c.fromTimestamp(parseInt(e.timestamp)*1e3).getYear()===this._calendarDate.getYear());if(s!==-1){const s=e?0:y-1;this._setTimestamp(parseInt(t[s].timestamp))}})}_setTimestamp(e){this._safelySetTimestamp(e);this.fireEvent("navigate",{timestamp:this.timestamp})}_modifyTimestampBy(e){this._safelyModifyTimestampBy(e,"year");this.fireEvent("navigate",{timestamp:this.timestamp})}_onkeyup(e){if(t.isSpace(e)){this._selectYear(e)}}_selectYear(e){e.preventDefault();if(e.target.className.indexOf("ui5-yp-item")>-1){const t=this._getTimestampFromDom(e.target);this._safelySetTimestamp(t);this.fireEvent("change",{timestamp:this.timestamp})}}_hasPreviousPage(){return this._firstYear>this._minDate.getYear()}_hasNextPage(){return this._firstYear+d-1<this._maxDate.getYear()}_showPreviousPage(){this._modifyTimestampBy(-d)}_showNextPage(){this._modifyTimestampBy(d)}}u.define();return u});