sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/util/PopupUtils","./OpenedPopupsRegistry"],function(e,t,n){"use strict";let o=null;const s=300;const r=[];const c=e=>{r.forEach(e=>{e.instance.reposition()})};const i=()=>{document.body.addEventListener("scroll",c,true)};const l=()=>{document.body.removeEventListener("scroll",c,true)};const p=()=>{o=setInterval(()=>{c()},s)};const d=()=>{clearInterval(o)};const a=()=>{document.addEventListener("mousedown",f)};const u=()=>{document.removeEventListener("mousedown",f)};const f=e=>{const o=n.getOpenedPopups();const s=o[o.length-1].instance.showAt;if(o.length===0||!s){return}for(let n=o.length-1;n!==-1;n--){const s=o[n].instance;if(s.isModal||s.isOpenerClicked(e)){return}if(t.isClickInRect(e,s.getBoundingClientRect())){break}s.close()}};const h=e=>{e&&e.shadowRoot.addEventListener("scroll",c,true)};const v=e=>{e&&e.shadowRoot.removeEventListener("scroll",c)};const g=e=>{const t=O(e);n.addOpenedPopup(e,t);r.push({instance:e,parentPopovers:t});h(e);if(r.length===1){i();a();p()}};const m=e=>{const t=[e];for(let n=0;n<r.length;n++){const o=r[n].parentPopovers.indexOf(e);if(r[n].parentPopovers.length>0&&o>-1){t.push(r[n].instance)}}for(let e=t.length-1;e>=0;e--){for(let o=0;o<r.length;o++){let s;if(t[e]===r[o].instance){s=o}if(s>=0){n.removeOpenedPopup(r[s].instance);v(r[s].instance);const e=r.splice(s,1);e[0].instance.close(false,true)}}}if(!r.length){l();u();d()}};const P=()=>r;const O=e=>{let t=e.parentNode;const n=[];while(t.parentNode){for(let e=0;e<r.length;e++){if(t&&t===r[e].instance){n.push(t)}}t=t.parentNode}return n};e.addOpenedPopover=g;e.getRegistry=P;e.removeOpenedPopover=m;Object.defineProperty(e,"__esModule",{value:true})});