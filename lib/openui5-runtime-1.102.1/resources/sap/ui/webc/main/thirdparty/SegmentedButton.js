sap.ui.define(["sap/ui/webc/common/thirdparty/base/UI5Element","sap/ui/webc/common/thirdparty/base/delegate/ItemNavigation","sap/ui/webc/common/thirdparty/base/renderer/LitRenderer","sap/ui/webc/common/thirdparty/base/i18nBundle","sap/ui/webc/common/thirdparty/base/delegate/ResizeHandler","sap/ui/webc/common/thirdparty/base/Render","sap/ui/webc/common/thirdparty/base/Device","sap/ui/webc/common/thirdparty/base/Keys","./generated/i18n/i18n-defaults","./SegmentedButtonItem","./generated/templates/SegmentedButtonTemplate.lit","./generated/themes/SegmentedButton.css"],function(e,t,s,i,a,n,r,d,h,o,c,l){"use strict";function m(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var u=m(e);var p=m(t);var f=m(s);var g=m(a);const I={tag:"ui5-segmented-button",altTag:"ui5-segmentedbutton",languageAware:true,properties:{accessibleName:{type:String,defaultValue:undefined}},managedSlots:true,slots:{default:{propertyName:"items",type:HTMLElement}},events:{"selection-change":{detail:{selectedItem:{type:HTMLElement}}}}};class y extends u{static get metadata(){return I}static get render(){return f}static get template(){return c}static get styles(){return l}static get dependencies(){return[o]}static async onDefine(){y.i18nBundle=await i.getI18nBundle("@ui5/webcomponents")}constructor(){super();this._itemNavigation=new p(this,{getItemsCallback:()=>this.getSlottedNodes("items")});this.absoluteWidthSet=false;this.percentageWidthSet=false;this.hasPreviouslyFocusedItem=false;this._handleResizeBound=this._doLayout.bind(this)}onEnterDOM(){g.register(this.parentNode,this._handleResizeBound)}onExitDOM(){if(this.parentNode){g.deregister(this.parentNode,this._handleResizeBound)}}onBeforeRendering(){const e=this.getSlottedNodes("items");e.forEach((e,t,s)=>{e.posInSet=t+1;e.sizeOfSet=s.length});this.normalizeSelection()}async onAfterRendering(){await this._doLayout()}prepareToMeasureItems(){this.style.width="";this.items.forEach(e=>{e.style.width=""})}async measureItemsWidth(){await n.renderFinished();this.prepareToMeasureItems();this.widths=this.items.map(e=>{let t=e.offsetWidth+1;if(r.isIE()){t+=1}return t})}normalizeSelection(){this._selectedItem=this.items.filter(e=>e.pressed).pop();if(this._selectedItem){this.items.forEach(e=>{e.pressed=false});this._selectedItem.pressed=true}}_selectItem(e){if(e.target.disabled||e.target===this.getDomRef()){return}if(e.target!==this._selectedItem){if(this._selectedItem){this._selectedItem.pressed=false}this._selectedItem=e.target;this.fireEvent("selection-change",{selectedItem:this._selectedItem})}this._selectedItem.pressed=true;this._itemNavigation.setCurrentItem(this._selectedItem);return this}_onclick(e){this._selectItem(e);this.selectedItem.focus()}_onkeydown(e){if(d.isEnter(e)){this._selectItem(e)}else if(d.isSpace(e)){e.preventDefault()}}_onkeyup(e){if(d.isSpace(e)){this._selectItem(e)}}_onfocusin(e){if(this.hasPreviouslyFocusedItem){this._itemNavigation.setCurrentItem(e.target);return}if(this.selectedItem){this.selectedItem.focus();this._itemNavigation.setCurrentItem(this._selectedItem);this.hasPreviouslyFocusedItem=true}}async _doLayout(){const e=this.widths&&this.widths.some(e=>e.offsetWidth>2);if(!e){await this.measureItemsWidth()}const t=this.parentNode?this.parentNode.offsetWidth:0;if(!this.style.width||this.percentageWidthSet){this.style.width=`${Math.max(...this.widths)*this.items.length}px`;this.absoluteWidthSet=true}this.items.forEach(e=>{e.style.width="100%"});if(t<=this.offsetWidth&&this.absoluteWidthSet){this.style.width="100%";this.percentageWidthSet=true}}get selectedItem(){return this._selectedItem}get ariaDescribedBy(){return y.i18nBundle.getText(h.SEGMENTEDBUTTON_ARIA_DESCRIBEDBY)}get ariaDescription(){return y.i18nBundle.getText(h.SEGMENTEDBUTTON_ARIA_DESCRIPTION)}}y.define();return y});