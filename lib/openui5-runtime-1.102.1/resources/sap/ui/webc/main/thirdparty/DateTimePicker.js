sap.ui.define(["sap/ui/webc/common/thirdparty/base/delegate/ResizeHandler","sap/ui/webc/common/thirdparty/base/locale/getLocale","sap/ui/webc/common/thirdparty/localization/getCachedLocaleDataInstance","sap/ui/webc/common/thirdparty/localization/dates/modifyDateBy","sap/ui/webc/common/thirdparty/localization/dates/CalendarDate","sap/ui/webc/common/thirdparty/icons/date-time","./Button","./ToggleButton","./SegmentedButton","./Calendar","./DatePicker","./TimeSelection","./generated/i18n/i18n-defaults","./generated/templates/DateTimePickerPopoverTemplate.lit","./generated/themes/DateTimePicker.css","./generated/themes/DateTimePickerPopover.css"],function(e,t,i,a,s,r,n,o,l,u,h,c,d,m,p,g){"use strict";function _(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var T=_(e);var w=_(t);var V=_(i);var v=_(a);var S=_(s);const D=640;const f={tag:"ui5-datetime-picker",properties:{_showTimeView:{type:Boolean,noAttribute:true},_phoneMode:{type:Boolean},_previewValues:{type:Object},_currentTimeSlider:{type:String,defaultValue:"hours"}}};class b extends h{static get metadata(){return f}static get staticAreaTemplate(){return m}static get styles(){return[super.styles,p]}static get staticAreaStyles(){return[super.staticAreaStyles,g]}static get dependencies(){return[...h.dependencies,u,n,o,l,c]}constructor(){super();this._handleResizeBound=this._handleResize.bind(this)}onResponsivePopoverAfterClose(){super.onResponsivePopoverAfterClose();this._showTimeView=false;this._previewValues={}}onEnterDOM(){T.register(document.body,this._handleResizeBound)}onExitDOM(){T.deregister(document.body,this._handleResizeBound)}async openPicker(){await super.openPicker();this._currentTimeSlider="hours";this._previewValues.timeSelectionValue=this.value||this.getFormat().format(new Date)}get classes(){return{picker:{"ui5-dt-picker-content--phone":this.phone},dateTimeView:{"ui5-dt-cal--hidden":this.phone&&this.showTimeView,"ui5-dt-time--hidden":this.phone&&this.showDateView},footer:{"ui5-dt-picker-footer-time-hidden":this.phone&&this.showTimeView||this.phone&&this.showDateView}}}get _formatPattern(){const e=!!this.formatPattern.match(/H/i);const t=!this.formatPattern||!e;const i=V(w());return t?i.getCombinedDateTimePattern("medium","medium",this._primaryCalendarType):this.formatPattern}get _calendarTimestamp(){return this._previewValues.calendarTimestamp?this._previewValues.calendarTimestamp:super._calendarTimestamp}get _calendarSelectedDates(){return this._previewValues.calendarValue?[this._previewValues.calendarValue]:super._calendarSelectedDates}get _timeSelectionValue(){return this._previewValues.timeSelectionValue?this._previewValues.timeSelectionValue:this.value}get openIconName(){return"date-time"}get btnOKLabel(){return b.i18nBundle.getText(d.TIMEPICKER_SUBMIT_BUTTON)}get btnCancelLabel(){return b.i18nBundle.getText(d.TIMEPICKER_CANCEL_BUTTON)}get btnDateLabel(){return b.i18nBundle.getText(d.DATETIME_PICKER_DATE_BUTTON)}get btnTimeLabel(){return b.i18nBundle.getText(d.DATETIME_PICKER_TIME_BUTTON)}get showFooter(){return true}get showDateView(){return this.phone?!this._showTimeView:true}get showTimeView(){return this.phone?this._showTimeView:true}get phone(){return super.phone||this._phoneMode}get dateAriaDescription(){return b.i18nBundle.getText(d.DATETIME_DESCRIPTION)}get _shouldHideHeader(){return true}onSelectedDatesChange(e){e.preventDefault();const t=e.path?e.path[1]:e.composedPath()[1];this._previewValues={...this._previewValues,calendarTimestamp:e.detail.timestamp,calendarValue:e.detail.values[0],timeSelectionValue:t.lastChild.value}}onTimeSelectionChange(e){this._previewValues={...this._previewValues,timeSelectionValue:e.detail.value}}onTimeSliderChange(e){this._currentTimeSlider=e.detail.slider}_handleResize(){const e=document.body.offsetWidth;const t=e<=D;const i=t&&!this._phoneMode||!t&&this._phoneMode;if(i){this._phoneMode=t}}get _submitDisabled(){return!this._calendarSelectedDates||!this._calendarSelectedDates.length}_submitClick(){const e=this.getSelectedDateTime();const t=this.getFormat().format(e);const i=this.isValid(t);if(this.value!==t){this.value=t;this.fireEvent("change",{value:this.value,valid:i});this.fireEvent("value-changed",{value:this.value,valid:i})}this._updateValueState();this.closePicker()}_cancelClick(){this.closePicker()}_dateTimeSwitchChange(e){this._showTimeView=e.target.getAttribute("key")==="Time";if(this._showTimeView){this._currentTimeSlider="hours"}}_modifyDateValue(e,t){if(!this.dateValue){return}const i=v(S.fromLocalJSDate(this.dateValue),e,t,this._minDate,this._maxDate);const a=i.toLocalJSDate();a.setHours(this.dateValue.getHours());a.setMinutes(this.dateValue.getMinutes());a.setSeconds(this.dateValue.getSeconds());const s=this.formatValue(a);this._updateValueAndFireEvents(s,true,["change","value-changed"])}async getPicker(){const e=await this.getStaticAreaItemDomRef();return e.querySelector("[ui5-responsive-popover]")}getSelectedDateTime(){const e=this.getFormat().parse(this._calendarSelectedDates[0]);const t=this.getFormat().parse(this._timeSelectionValue);e.setHours(t.getHours());e.setMinutes(t.getMinutes());e.setSeconds(t.getSeconds());return e}}b.define();return b});