sap.ui.define(["sap/ui/webc/common/thirdparty/base/UI5Element","sap/ui/webc/common/thirdparty/base/renderer/LitRenderer","sap/ui/webc/common/thirdparty/base/Keys","sap/ui/webc/common/thirdparty/base/Device","sap/ui/webc/main/thirdparty/Icon","sap/ui/webc/common/thirdparty/icons/background","./types/MediaGalleryItemLayout","./generated/templates/MediaGalleryItemTemplate.lit","./generated/themes/MediaGalleryItem.css"],function(t,e,n,i,a,o,s,r,u){"use strict";function h(t){return t&&typeof t==="object"&&"default"in t?t["default"]:t}var l=h(t);var d=h(e);var m=h(a);const c={tag:"ui5-media-gallery-item",managedSlots:true,properties:{selected:{type:Boolean},disabled:{type:Boolean},layout:{type:s,defaultValue:s.Square},_interactive:{type:Boolean},_square:{type:Boolean},_contentImageNotFound:{type:Boolean},_thumbnailNotFound:{type:Boolean},_thumbnailDesign:{type:Boolean},focused:{type:Boolean},_tabIndex:{type:String,defaultValue:undefined},contentHeight:{type:String,noAttribute:true,defaultValue:""}},slots:{default:{propertyName:"content",type:HTMLElement},thumbnail:{type:HTMLElement}}};class _ extends l{constructor(){super();this._monitoredContent=null;this._monitoredThumbnail=null}onEnterDOM(){this._thumbnailDesign=!i.isPhone();this._interactive=!i.isPhone();this._square=true}static get metadata(){return c}static get render(){return d}static get styles(){return u}static get template(){return r}get _thumbnail(){return this.thumbnail.length&&this.thumbnail[0]}get _content(){return this.content.length&&this.content[0]}get _isThubmnailAvailable(){return this._thumbnail&&!this._thumbnailNotFound}get _isContentAvailable(){return this._content&&!this._contentImageNotFound}get _useThumbnail(){return this._thumbnailDesign&&this._isThubmnailAvailable}get _useContent(){return!this._useThumbnail&&this._isContentAvailable}get tabIndex(){return this.disabled?undefined:this._tabIndex}get _showBackgroundIcon(){return this._thumbnailNotFound||this._contentImageNotFound}get styles(){return{wrapper:{height:this.contentHeight}}}get _role(){return this._interactive?"button":undefined}onBeforeRendering(){this._monitorLoadingError()}_monitorLoadingError(){let t,e;if(this._thumbnailDesign&&this.thumbnail.length&&this._monitoredThumbnail!==this._thumbnail){this._thumbnailNotFound=undefined;t=this._updateThumbnailLoaded;e=this._attachListeners(this._thumbnail,t);e&&(this._monitoredThumbnail=this._thumbnail)}if(!this._useThumbnail&&this.content.length&&this._monitoredContent!==this._content){this._contentImageNotFound=undefined;t=this._updateContentImageLoaded;e=this._attachListeners(this._content,t);e&&(this._monitoredContent=this._content)}}_attachListeners(t,e){const n=t.tagName==="IMG",i=n?t:t.querySelector("img");if(i){e.call(this,i);i.addEventListener("error",()=>{if(this.contains(i)){e.call(this,i)}});i.addEventListener("load",()=>{if(this.contains(i)){e.call(this,i)}});return true}}_updateContentImageLoaded(t){this._contentImageNotFound=t.naturalHeight===0&&t.naturalWidth===0}_updateThumbnailLoaded(t){this._thumbnailNotFound=t.naturalHeight===0&&t.naturalWidth===0}_onkeydown(t){if(n.isSpace(t)){t.preventDefault()}if(n.isEnter(t)){this._fireItemClick()}}_onkeyup(t){if(n.isSpace(t)){this._fireItemClick()}}_onfocusout(){this.focused=false}_onfocusin(){this.focused=true}_fireItemClick(){this.fireEvent("click",{item:this})}static get dependencies(){return[m]}}_.define();return _});