sap.ui.define(["../Device","../EventProvider","../animations/scroll"],function(t,s,e){"use strict";const o="scroll";const i=t.supportsTouch()?"touchend":"mouseup";class r extends s{constructor(s){super();this.containerComponent=s;this.mouseMove=this.ontouchmove.bind(this);this.mouseUp=this.ontouchend.bind(this);this.touchStart=this.ontouchstart.bind(this);this.supportsTouch=t.supportsTouch();this.cachedValue={};this.startX=0;this.startY=0;if(this.supportsTouch){s.addEventListener("touchstart",this.touchStart,{passive:true});s.addEventListener("touchmove",this.mouseMove,{passive:true});s.addEventListener("touchend",this.mouseUp,{passive:true})}else{s.addEventListener("mousedown",this.touchStart,{passive:true})}}set scrollContainer(t){this._container=t}get scrollContainer(){return this._container}async scrollTo(t,s,e=0,o=0){let i=this.scrollContainer.clientHeight>0&&this.scrollContainer.clientWidth>0;while(!i&&e>0){await new Promise(t=>{setTimeout(()=>{i=this.scrollContainer.clientHeight>0&&this.scrollContainer.clientWidth>0;e--;t()},o)})}this._container.scrollLeft=t;this._container.scrollTop=s}move(t,s,o){if(o){this._container.scrollLeft+=t;this._container.scrollTop+=s;return}return e({element:this._container,dx:t,dy:s})}getScrollLeft(){return this._container.scrollLeft}getScrollTop(){return this._container.scrollTop}_isTouchInside(t){const s=this._container.getBoundingClientRect();const e=this.supportsTouch?t.clientX:t.x;const o=this.supportsTouch?t.clientY:t.y;return e>=s.left&&e<=s.right&&o>=s.top&&o<=s.bottom}ontouchstart(t){const s=this.supportsTouch?t.touches[0]:null;if(!this.supportsTouch){document.addEventListener("mouseup",this.mouseUp,{passive:true});document.addEventListener("mousemove",this.mouseMove,{passive:true})}else{this.startX=s.pageX;this.startY=s.pageY}this._prevDragX=this.supportsTouch?s.pageX:t.x;this._prevDragY=this.supportsTouch?s.pageY:t.y;this._canScroll=this._isTouchInside(this.supportsTouch?s:t)}ontouchmove(t){if(!this._canScroll){return}const s=this._container;const e=this.supportsTouch?t.touches[0]:null;const i=this.supportsTouch?e.pageX:t.x;const r=this.supportsTouch?e.pageY:t.y;s.scrollLeft+=this._prevDragX-i;s.scrollTop+=this._prevDragY-r;this.fireEvent(o,{isLeft:i>this._prevDragX,isRight:i<this._prevDragX});this.cachedValue.dragX=this._prevDragX;this.cachedValue.dragY=this._prevDragY;this._prevDragX=i;this._prevDragY=r}ontouchend(t){if(this.supportsTouch){const s=Math.abs(t.changedTouches[0].pageX-this.startX);const e=Math.abs(t.changedTouches[0].pageY-this.startY);if(s<10&&e<10){return}}if(!this._canScroll){return}const s=this._container;const e=this.supportsTouch?t.changedTouches[0].pageX:t.x;const o=this.supportsTouch?t.changedTouches[0].pageY:t.y;s.scrollLeft+=this._prevDragX-e;s.scrollTop+=this._prevDragY-o;const r=e===this._prevDragX;const h=r?this.cachedValue.dragX:e;this.fireEvent(i,{isLeft:h<this._prevDragX,isRight:h>this._prevDragX});this._prevDragX=e;this._prevDragY=o;if(!this.supportsTouch){document.removeEventListener("mousemove",this.mouseMove,{passive:true});document.removeEventListener("mouseup",this.mouseUp)}}}return r});