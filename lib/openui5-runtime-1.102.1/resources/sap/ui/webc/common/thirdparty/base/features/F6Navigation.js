sap.ui.define(["../FeaturesRegistry","../Keys","../util/FocusableElements"],function(e,t,s){"use strict";class i{init(){this.keydownHandler=this._keydownHandler.bind(this);this.attachEventListeners();this.selectedGroup=null;this.groups=[]}attachEventListeners(){document.addEventListener("keydown",this.keydownHandler)}async _keydownHandler(e){e.preventDefault();if(t.isF6Next(e)){this.updateGroups();if(this.groups.length<1){return}const e=this.groups.indexOf(this.selectedGroup);let t=null;if(e>-1){if(e+1>=this.groups.length){t=this.groups[0]}else{t=this.groups[e+1]}}else{t=this.groups[0]}const i=await s.getFirstFocusableElement(t.isUI5Element?t.getDomRef():t,true);i.focus()}if(t.isF6Previous(e)){this.updateGroups();if(this.groups.length<1){return}const e=this.groups.indexOf(this.selectedGroup);let t=null;if(e>-1){if(e-1<0){t=this.groups[this.groups.length-1]}else{const i=await s.getFirstFocusableElement(this.groups[e-1],true);const r=i===await s.getFirstFocusableElement(this.groups[e],true);t=this.groups[r?e-2:e-1]}}else{t=this.groups[this.groups.length-1]}const i=await s.getFirstFocusableElement(t.isUI5Element?t.getDomRef():t,true);i.focus()}}removeEventListeners(){document.removeEventListener("keydown",this.keydownHandler)}updateGroups(){this.setSelectedGroup(document.activeElement);this.setGroups()}setGroups(){this.groups=Array.from(document.querySelectorAll("[data-sap-ui-fastnavgroup='true']")).filter(e=>e.clientWidth&&window.getComputedStyle(e).visibility!=="hidden")}setSelectedGroup(e){while(e&&e.getAttribute("data-sap-ui-fastnavgroup")!=="true"&&e!==document.querySelector("html")){e=e.parentElement?e.parentNode:e.parentNode.host}this.selectedGroup=e}destroy(){this.removeEventListeners()}}const r=new i;e.registerFeature("F6Navigation",r);return i});