/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/core/CalendarType','sap/ui/core/Locale','sap/ui/core/LocaleData','sap/ui/core/date/UniversalDate','sap/ui/core/format/TimezoneUtil',"sap/base/util/deepEqual","sap/base/strings/formatMessage","sap/base/Log","sap/base/util/extend"],function(C,L,a,U,T,d,f,b,c){"use strict";var D=function(){throw new Error();};var m={DATE:"date",TIME:"time",DATETIME:"datetime",DATETIME_WITH_TIMEZONE:"datetimeWithTimezone"};var g={};var h=function(e){if(typeof e!=="string"&&!(e instanceof String)&&e!=null){throw new TypeError("The given timezone must be a string.");}};D.oDateInfo={type:m.DATE,oDefaultFormatOptions:{style:"medium",relativeScale:"day",relativeStyle:"wide"},aFallbackFormatOptions:[{style:"short"},{style:"medium"},{pattern:"yyyy-MM-dd"},{pattern:"yyyyMMdd",strictParsing:true}],bShortFallbackFormatOptions:true,bPatternFallbackWithoutDelimiter:true,getPattern:function(e,S,i){return e.getDatePattern(S,i);},oRequiredParts:{"text":true,"year":true,"weekYear":true,"month":true,"day":true},aRelativeScales:["year","month","week","day"],aRelativeParseScales:["year","quarter","month","week","day","hour","minute","second"],aIntervalCompareFields:["Era","FullYear","Quarter","Month","Week","Date"]};D.oDateTimeInfo={type:m.DATETIME,oDefaultFormatOptions:{style:"medium",relativeScale:"auto",relativeStyle:"wide"},aFallbackFormatOptions:[{style:"short"},{style:"medium"},{pattern:"yyyy-MM-dd'T'HH:mm:ss"},{pattern:"yyyyMMdd HHmmss"}],getPattern:function(e,S,i){var j=S.indexOf("/");if(j>0){return e.getCombinedDateTimePattern(S.substr(0,j),S.substr(j+1),i);}else{return e.getCombinedDateTimePattern(S,S,i);}},oRequiredParts:{"text":true,"year":true,"weekYear":true,"month":true,"day":true,"hour0_23":true,"hour1_24":true,"hour0_11":true,"hour1_12":true},aRelativeScales:["year","month","week","day","hour","minute","second"],aRelativeParseScales:["year","quarter","month","week","day","hour","minute","second"],aIntervalCompareFields:["Era","FullYear","Quarter","Month","Week","Date","DayPeriod","Hours","Minutes","Seconds"]};D._getDateTimeWithTimezoneInfo=function(e){var S=e.showDate===undefined||e.showDate;var i=e.showTime===undefined||e.showTime;var j=e.showTimezone===undefined||e.showTimezone;var B=D.oDateTimeInfo;if(S&&!i){B=D.oDateInfo;}else if(!S&&i){B=D.oTimeInfo;}return Object.assign({},B,{type:m.DATETIME_WITH_TIMEZONE,getTimezonePattern:function(P){if(!S&&!i&&j){return"VV";}else if(!j){return P;}else{return P+" VV";}},getPattern:function(u,v,w){if(!S&&!i&&j){return"VV";}if(!j){return B.getPattern(u,v,w);}var P=B.getPattern(u,v,w);return u.applyTimezonePattern(P);}});};D.oTimeInfo={type:m.TIME,oDefaultFormatOptions:{style:"medium",relativeScale:"auto",relativeStyle:"wide"},aFallbackFormatOptions:[{style:"short"},{style:"medium"},{pattern:"HH:mm:ss"},{pattern:"HHmmss"}],getPattern:function(e,S,i){return e.getTimePattern(S,i);},oRequiredParts:{"text":true,"hour0_23":true,"hour1_24":true,"hour0_11":true,"hour1_12":true},aRelativeScales:["hour","minute","second"],aRelativeParseScales:["year","quarter","month","week","day","hour","minute","second"],aIntervalCompareFields:["DayPeriod","Hours","Minutes","Seconds"]};D.getInstance=function(e,i){return this.getDateInstance(e,i);};D.getDateInstance=function(e,i){return this.createInstance(e,i,this.oDateInfo);};D.getDateTimeInstance=function(e,i){return this.createInstance(e,i,this.oDateTimeInfo);};D.getDateTimeWithTimezoneInstance=function(e,i){if(e&&!(e instanceof L)){e=Object.assign({},e);if(typeof e.showTimezone==="string"){var S=e.showTimezone;if(e.showDate===undefined&&e.showTime===undefined){if(S==="Hide"){e.showTimezone=false;}else if(S==="Only"){e.showDate=false;e.showTime=false;}}e.showTimezone=S!=="Hide";}if(e.showDate===false&&e.showTime===false&&e.showTimezone===false){throw new TypeError("Invalid Configuration. One of the following format options must be true: showDate, showTime or showTimezone.");}}return this.createInstance(e,i,D._getDateTimeWithTimezoneInfo(e||{}));};D.getTimeInstance=function(e,i){return this.createInstance(e,i,this.oTimeInfo);};function k(e){var P=e.oLocaleData.getIntervalPattern("",e.oFormatOptions.calendarType);P=P.replace(/[^\{\}01 ]/,"-");return P.replace(/\{(0|1)\}/g,e.oFormatOptions.pattern);}D.createInstance=function(e,i,I){var j=Object.create(this.prototype);if(e instanceof L){i=e;e=undefined;}if(!i){i=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();}j.oLocale=i;j.oLocaleData=a.getInstance(i);j.oFormatOptions=c({},I.oDefaultFormatOptions,e);if(I.type===m.DATETIME_WITH_TIMEZONE){j.oFormatOptions.interval=false;j.oFormatOptions.singleIntervalValue=false;j.oFormatOptions.UTC=false;}else{j.oFormatOptions.showTimezone=undefined;j.oFormatOptions.showDate=undefined;j.oFormatOptions.showTime=undefined;}j.type=I.type;if(!j.oFormatOptions.calendarType){j.oFormatOptions.calendarType=sap.ui.getCore().getConfiguration().getCalendarType();}if(!j.oFormatOptions.pattern){if(j.oFormatOptions.format){j.oFormatOptions.pattern=j.oLocaleData.getCustomDateTimePattern(j.oFormatOptions.format,j.oFormatOptions.calendarType);}else{j.oFormatOptions.pattern=I.getPattern(j.oLocaleData,j.oFormatOptions.style,j.oFormatOptions.calendarType);}}if(j.oFormatOptions.interval){if(j.oFormatOptions.format){j.intervalPatterns=j.oLocaleData.getCustomIntervalPattern(j.oFormatOptions.format,null,j.oFormatOptions.calendarType);if(typeof j.intervalPatterns==="string"){j.intervalPatterns=[j.intervalPatterns];}j.intervalPatterns.push(j.oLocaleData.getCustomDateTimePattern(j.oFormatOptions.format,j.oFormatOptions.calendarType));}else{j.intervalPatterns=[j.oLocaleData.getCombinedIntervalPattern(j.oFormatOptions.pattern,j.oFormatOptions.calendarType),j.oFormatOptions.pattern];}var u=k(j);j.intervalPatterns.push(u);}if(!j.oFormatOptions.fallback){if(!I.oFallbackFormats){I.oFallbackFormats={};}var v=i.toString(),w=j.oFormatOptions.calendarType,K=v+"-"+w,P,x;if(j.oFormatOptions.pattern&&I.bPatternFallbackWithoutDelimiter){K=K+"-"+j.oFormatOptions.pattern;}if(j.oFormatOptions.interval){K=K+"-"+"interval";}var y=I.oFallbackFormats[K]?Object.assign({},I.oFallbackFormats[K]):undefined;if(!y){x=I.aFallbackFormatOptions;if(I.bShortFallbackFormatOptions){P=I.getPattern(j.oLocaleData,"short");x=x.concat(D._createFallbackOptionsWithoutDelimiter(P));}if(j.oFormatOptions.pattern&&I.bPatternFallbackWithoutDelimiter){x=D._createFallbackOptionsWithoutDelimiter(j.oFormatOptions.pattern).concat(x);}y=D._createFallbackFormat(x,w,i,I,j.oFormatOptions);}j.aFallbackFormats=y;}j.oRequiredParts=I.oRequiredParts;j.aRelativeScales=I.aRelativeScales;j.aRelativeParseScales=I.aRelativeParseScales;j.aIntervalCompareFields=I.aIntervalCompareFields;j.init();return j;};D.prototype.init=function(){var e=this.oFormatOptions.calendarType;this.aMonthsAbbrev=this.oLocaleData.getMonths("abbreviated",e);this.aMonthsWide=this.oLocaleData.getMonths("wide",e);this.aMonthsNarrow=this.oLocaleData.getMonths("narrow",e);this.aMonthsAbbrevSt=this.oLocaleData.getMonthsStandAlone("abbreviated",e);this.aMonthsWideSt=this.oLocaleData.getMonthsStandAlone("wide",e);this.aMonthsNarrowSt=this.oLocaleData.getMonthsStandAlone("narrow",e);this.aDaysAbbrev=this.oLocaleData.getDays("abbreviated",e);this.aDaysWide=this.oLocaleData.getDays("wide",e);this.aDaysNarrow=this.oLocaleData.getDays("narrow",e);this.aDaysShort=this.oLocaleData.getDays("short",e);this.aDaysAbbrevSt=this.oLocaleData.getDaysStandAlone("abbreviated",e);this.aDaysWideSt=this.oLocaleData.getDaysStandAlone("wide",e);this.aDaysNarrowSt=this.oLocaleData.getDaysStandAlone("narrow",e);this.aDaysShortSt=this.oLocaleData.getDaysStandAlone("short",e);this.aQuartersAbbrev=this.oLocaleData.getQuarters("abbreviated",e);this.aQuartersWide=this.oLocaleData.getQuarters("wide",e);this.aQuartersNarrow=this.oLocaleData.getQuarters("narrow",e);this.aQuartersAbbrevSt=this.oLocaleData.getQuartersStandAlone("abbreviated",e);this.aQuartersWideSt=this.oLocaleData.getQuartersStandAlone("wide",e);this.aQuartersNarrowSt=this.oLocaleData.getQuartersStandAlone("narrow",e);this.aErasNarrow=this.oLocaleData.getEras("narrow",e);this.aErasAbbrev=this.oLocaleData.getEras("abbreviated",e);this.aErasWide=this.oLocaleData.getEras("wide",e);this.aDayPeriods=this.oLocaleData.getDayPeriods("abbreviated",e);this.aFormatArray=this.parseCldrDatePattern(this.oFormatOptions.pattern);this.sAllowedCharacters=this.getAllowedCharacters(this.aFormatArray);};D._createFallbackFormat=function(e,i,j,I,P){return e.map(function(O){var u=Object.assign({},O);u.showDate=P.showDate;u.showTime=P.showTime;u.showTimezone=P.showTimezone;if(typeof I.getTimezonePattern==="function"&&u.pattern){u.pattern=I.getTimezonePattern(u.pattern);}if(P.interval){u.interval=true;}u.calendarType=i;u.fallback=true;var v=D.createInstance(u,j,I);v.bIsFallback=true;return v;});};D._createFallbackOptionsWithoutDelimiter=function(B){var e=/[^dMyGU]/g,i={regex:/d+/g,replace:"dd"},M={regex:/M+/g,replace:"MM"},y={regex:/[yU]+/g,replace:["yyyy","yy"]};B=B.replace(e,"");B=B.replace(i.regex,i.replace);B=B.replace(M.regex,M.replace);return y.replace.map(function(j){return{pattern:B.replace(y.regex,j),strictParsing:true};});};var p={isNumber:function(i){return i>=48&&i<=57;},findNumbers:function(v,M){var i=0;while(i<M&&this.isNumber(v.charCodeAt(i))){i++;}if(typeof v!=="string"){v=v.toString();}return v.substr(0,i);},startsWithIgnoreCase:function(v,S,i){if(v.startsWith(S)){return true;}try{var j=S.toLocaleUpperCase(i);var V=v.toLocaleUpperCase(i);if(j.length!==S.length||V.length!==v.length){return false;}return V.startsWith(j);}catch(e){return false;}},findEntry:function(v,e,i){var u=-1,M=0;for(var j=0;j<e.length;j++){if(e[j]&&e[j].length>M&&this.startsWithIgnoreCase(v,e[j],i)){u=j;M=e[j].length;}}return{index:u,length:M};},parseTZ:function(v,e){var i=0;var j=v.charAt(0)=="+"?-1:1;var P;i++;P=this.findNumbers(v.substr(i),2);var u=parseInt(P);i+=2;if(e){i++;}P=this.findNumbers(v.substr(i),2);var w=0;if(P){i+=2;w=parseInt(P);}return{length:i,tzDiff:(w+60*u)*60*j};},checkValid:function(e,P,i){if(e in i.oRequiredParts&&P){return false;}}};D.prototype.oSymbols={"":{name:"text",format:function(e,i){return e.value;},parse:function(v,P,e,i){var j;var V=true;var u=0;var w=0;var x="\u002d\u007E\u2010\u2011\u2012\u2013\u2014\ufe58\ufe63\uff0d\uFF5E";for(;w<P.value.length;w++){j=P.value.charAt(w);if(j===" "){while(v.charAt(u)===" "){u++;}}else if(x.includes(j)){if(!x.includes(v.charAt(u))){V=false;}u++;}else{if(v.charAt(u)!==j){V=false;}u++;}if(!V){break;}}if(V){return{length:u};}else{var y=false;if(i.index<i.formatArray.length-1){y=(i.formatArray[i.index+1].type in e.oRequiredParts);}return{valid:p.checkValid(P.type,y,e)};}}},"G":{name:"era",format:function(e,i,u,j){var E=i.getUTCEra();if(e.digits<=3){return j.aErasAbbrev[E];}else if(e.digits===4){return j.aErasWide[E];}else{return j.aErasNarrow[E];}},parse:function(v,P,e,j){var E=[e.aErasWide,e.aErasAbbrev,e.aErasNarrow];for(var i=0;i<E.length;i++){var V=E[i];var u=p.findEntry(v,V,e.oLocaleData.sCLDRLocaleId);if(u.index!==-1){return{era:u.index,length:u.length};}}return{era:e.aErasWide.length-1,valid:p.checkValid(P.type,true,e)};}},"y":{name:"year",format:function(e,i,u,j){var y=i.getUTCFullYear();var Y=String(y);var v=j.oFormatOptions.calendarType;if(e.digits==2&&Y.length>2){Y=Y.substr(Y.length-2);}if(v!=C.Japanese&&e.digits==1&&y<100){Y=Y.padStart(4,"0");}return Y.padStart(e.digits,"0");},parse:function(v,P,e,i){var j=e.oFormatOptions.calendarType;var u;if(P.digits==1){u=p.findNumbers(v,4);}else if(P.digits==2){u=p.findNumbers(v,2);}else{u=p.findNumbers(v,P.digits);}var y=parseInt(u);if(j!=C.Japanese&&u.length<=2){var w=U.getInstance(new Date(),j),x=w.getUTCFullYear(),z=Math.floor(x/100),Y=z*100+y-x;if(Y<-70){y+=(z+1)*100;}else if(Y<30){y+=z*100;}else{y+=(z-1)*100;}}return{length:u.length,valid:p.checkValid(P.type,u==="",e),year:y};}},"Y":{name:"weekYear",format:function(e,i,u,j){var w=i.getUTCWeek();var W=w.year;var v=String(W);var x=j.oFormatOptions.calendarType;if(e.digits==2&&v.length>2){v=v.substr(v.length-2);}if(x!=C.Japanese&&e.digits==1&&W<100){v=v.padStart(4,"0");}return v.padStart(e.digits,"0");},parse:function(v,P,e,i){var j=e.oFormatOptions.calendarType;var u;if(P.digits==1){u=p.findNumbers(v,4);}else if(P.digits==2){u=p.findNumbers(v,2);}else{u=p.findNumbers(v,P.digits);}var y=parseInt(u);var w=y;if(j!=C.Japanese&&u.length<=2){var x=U.getInstance(new Date(),j),z=x.getUTCFullYear(),A=Math.floor(z/100),Y=A*100+w-z;if(Y<-70){w+=(A+1)*100;}else if(Y<30){w+=A*100;}else{w+=(A-1)*100;}}return{length:u.length,valid:p.checkValid(P.type,u==="",e),year:y,weekYear:w};}},"M":{name:"month",format:function(e,i,u,j){var M=i.getUTCMonth();if(e.digits==3){return j.aMonthsAbbrev[M];}else if(e.digits==4){return j.aMonthsWide[M];}else if(e.digits>4){return j.aMonthsNarrow[M];}else{return String(M+1).padStart(e.digits,"0");}},parse:function(v,P,e,j){var M=[e.aMonthsWide,e.aMonthsWideSt,e.aMonthsAbbrev,e.aMonthsAbbrevSt,e.aMonthsNarrow,e.aMonthsNarrowSt];var V;var u;var w;if(P.digits<3){w=p.findNumbers(v,Math.max(P.digits,2));V=p.checkValid(P.type,w==="",e);u=parseInt(w)-1;if(j.strict&&(u>11||u<0)){V=false;}}else{for(var i=0;i<M.length;i++){var x=M[i];var y=p.findEntry(v,x,e.oLocaleData.sCLDRLocaleId);if(y.index!==-1){return{month:y.index,length:y.length};}}V=p.checkValid(P.type,true,e);}return{month:u,length:w?w.length:0,valid:V};}},"L":{name:"monthStandalone",format:function(e,i,u,j){var M=i.getUTCMonth();if(e.digits==3){return j.aMonthsAbbrevSt[M];}else if(e.digits==4){return j.aMonthsWideSt[M];}else if(e.digits>4){return j.aMonthsNarrowSt[M];}else{return String(M+1).padStart(e.digits,"0");}},parse:function(v,P,e,j){var M=[e.aMonthsWide,e.aMonthsWideSt,e.aMonthsAbbrev,e.aMonthsAbbrevSt,e.aMonthsNarrow,e.aMonthsNarrowSt];var V;var u;var w;if(P.digits<3){w=p.findNumbers(v,Math.max(P.digits,2));V=p.checkValid(P.type,w==="",e);u=parseInt(w)-1;if(j.strict&&(u>11||u<0)){V=false;}}else{for(var i=0;i<M.length;i++){var x=M[i];var y=p.findEntry(v,x,e.oLocaleData.sCLDRLocaleId);if(y.index!==-1){return{month:y.index,length:y.length};}}V=p.checkValid(P.type,true,e);}return{month:u,length:w?w.length:0,valid:V};}},"w":{name:"weekInYear",format:function(e,i,u,j){var w=i.getUTCWeek();var W=w.week;var v=String(W+1);if(e.digits<3){v=v.padStart(e.digits,"0");}else{v=j.oLocaleData.getCalendarWeek(e.digits===3?"narrow":"wide",v.padStart(2,"0"));}return v;},parse:function(v,P,e,i){var V;var j;var w;var u=0;if(P.digits<3){j=p.findNumbers(v,2);u=j.length;w=parseInt(j)-1;V=p.checkValid(P.type,!j,e);}else{j=e.oLocaleData.getCalendarWeek(P.digits===3?"narrow":"wide");j=j.replace("{0}","([0-9]+)");var x=new RegExp(j),y=x.exec(v);if(y){u=y[0].length;w=parseInt(y[y.length-1])-1;}else{V=p.checkValid(P.type,true,e);}}return{length:u,valid:V,week:w};}},"W":{name:"weekInMonth",format:function(e,i){return"";},parse:function(){return{};}},"D":{name:"dayInYear",format:function(e,i){},parse:function(){return{};}},"d":{name:"day",format:function(e,i){var j=i.getUTCDate();return String(j).padStart(e.digits,"0");},parse:function(v,P,e,i){var j=p.findNumbers(v,Math.max(P.digits,2));var V=p.checkValid(P.type,j==="",e);var u=parseInt(j);if(i.strict&&(u>31||u<1)){V=false;}return{day:u,length:j.length,valid:V};}},"Q":{name:"quarter",format:function(e,i,u,j){var Q=i.getUTCQuarter();if(e.digits==3){return j.aQuartersAbbrev[Q];}else if(e.digits==4){return j.aQuartersWide[Q];}else if(e.digits>4){return j.aQuartersNarrow[Q];}else{return String(Q+1).padStart(e.digits,"0");}},parse:function(v,P,e,j){var V;var Q;var u;var w=[e.aQuartersWide,e.aQuartersWideSt,e.aQuartersAbbrev,e.aQuartersAbbrevSt,e.aQuartersNarrow,e.aQuartersNarrowSt];if(P.digits<3){u=p.findNumbers(v,Math.max(P.digits,2));V=p.checkValid(P.type,u==="",e);Q=parseInt(u)-1;if(j.strict&&Q>3){V=false;}}else{for(var i=0;i<w.length;i++){var x=w[i];var y=p.findEntry(v,x,e.oLocaleData.sCLDRLocaleId);if(y.index!==-1){return{quarter:y.index,length:y.length};}}V=p.checkValid(P.type,true,e);}return{length:u?u.length:0,quarter:Q,valid:V};}},"q":{name:"quarterStandalone",format:function(e,i,u,j){var Q=i.getUTCQuarter();if(e.digits==3){return j.aQuartersAbbrevSt[Q];}else if(e.digits==4){return j.aQuartersWideSt[Q];}else if(e.digits>4){return j.aQuartersNarrowSt[Q];}else{return String(Q+1).padStart(e.digits,"0");}},parse:function(v,P,e,j){var V;var Q;var u;var w=[e.aQuartersWide,e.aQuartersWideSt,e.aQuartersAbbrev,e.aQuartersAbbrevSt,e.aQuartersNarrow,e.aQuartersNarrowSt];if(P.digits<3){u=p.findNumbers(v,Math.max(P.digits,2));V=p.checkValid(P.type,u==="",e);Q=parseInt(u)-1;if(j.strict&&Q>3){V=false;}}else{for(var i=0;i<w.length;i++){var x=w[i];var y=p.findEntry(v,x,e.oLocaleData.sCLDRLocaleId);if(y.index!==-1){return{quarter:y.index,length:y.length};}}V=p.checkValid(P.type,true,e);}return{length:u?u.length:0,quarter:Q,valid:V};}},"F":{name:"dayOfWeekInMonth",format:function(e,i,j){return"";},parse:function(){return{};}},"E":{name:"dayNameInWeek",format:function(e,i,u,j){var v=i.getUTCDay();if(e.digits<4){return j.aDaysAbbrev[v];}else if(e.digits==4){return j.aDaysWide[v];}else if(e.digits==5){return j.aDaysNarrow[v];}else{return j.aDaysShort[v];}},parse:function(v,P,e,j){var u=[e.aDaysWide,e.aDaysWideSt,e.aDaysAbbrev,e.aDaysAbbrevSt,e.aDaysShort,e.aDaysShortSt,e.aDaysNarrow,e.aDaysNarrowSt];for(var i=0;i<u.length;i++){var V=u[i];var w=p.findEntry(v,V,e.oLocaleData.sCLDRLocaleId);if(w.index!==-1){return{dayOfWeek:w.index,length:w.length};}}}},"c":{name:"dayNameInWeekStandalone",format:function(e,i,u,j){var v=i.getUTCDay();if(e.digits<4){return j.aDaysAbbrevSt[v];}else if(e.digits==4){return j.aDaysWideSt[v];}else if(e.digits==5){return j.aDaysNarrowSt[v];}else{return j.aDaysShortSt[v];}},parse:function(v,P,e,j){var u=[e.aDaysWide,e.aDaysWideSt,e.aDaysAbbrev,e.aDaysAbbrevSt,e.aDaysShort,e.aDaysShortSt,e.aDaysNarrow,e.aDaysNarrowSt];for(var i=0;i<u.length;i++){var V=u[i];var w=p.findEntry(v,V,e.oLocaleData.sCLDRLocaleId);if(w.index!==-1){return{day:w.index,length:w.length};}}}},"u":{name:"dayNumberOfWeek",format:function(e,i,u,j){var v=i.getUTCDay();return j._adaptDayOfWeek(v);},parse:function(v,P,e,i){var j=p.findNumbers(v,P.digits);return{dayNumberOfWeek:parseInt(j),length:j.length};}},"a":{name:"amPmMarker",format:function(e,i,u,j){var v=i.getUTCDayPeriod();return j.aDayPeriods[v];},parse:function(v,P,e,i){var j;var u;var A=e.aDayPeriods[0],w=e.aDayPeriods[1];var x=/[aApP](?:\.)?[\x20\xA0]?[mM](?:\.)?/;var M=v.match(x);var V=(M&&M.index===0);if(V){v=M[0];A=A.replace(/[\x20\xA0]/g,"");w=w.replace(/[\x20\xA0]/g,"");v=v.replace(/[\x20\xA0]/g,"");A=A.replace(/\./g,"").toLowerCase();w=w.replace(/\./g,"").toLowerCase();v=v.replace(/\./g,"").toLowerCase();}if(v.indexOf(A)===0){j=false;u=(V?M[0].length:A.length);}else if(v.indexOf(w)===0){j=true;u=(V?M[0].length:w.length);}return{pm:j,length:u};}},"H":{name:"hour0_23",format:function(e,i){var H=i.getUTCHours();return String(H).padStart(e.digits,"0");},parse:function(v,P,e,i){var V;var j=p.findNumbers(v,Math.max(P.digits,2));var H=parseInt(j);V=p.checkValid(P.type,j==="",e);if(i.strict&&H>23){V=false;}return{hour:H,length:j.length,valid:V};}},"k":{name:"hour1_24",format:function(e,i){var H=i.getUTCHours();var j=(H===0?"24":String(H));return j.padStart(e.digits,"0");},parse:function(v,P,e,i){var V;var j=p.findNumbers(v,Math.max(P.digits,2));var H=parseInt(j);V=p.checkValid(P.type,j==="",e);if(H==24){H=0;}if(i.strict&&H>23){V=false;}return{hour:H,length:j.length,valid:V};}},"K":{name:"hour0_11",format:function(e,i){var H=i.getUTCHours();var j=String(H>11?H-12:H);return j.padStart(e.digits,"0");},parse:function(v,P,e,i){var V;var j=p.findNumbers(v,Math.max(P.digits,2));var H=parseInt(j);V=p.checkValid(P.type,j==="",e);if(i.strict&&H>11){V=false;}return{hour:H,length:j.length,valid:V};}},"h":{name:"hour1_12",format:function(e,i){var H=i.getUTCHours();var j;if(H>12){j=String(H-12);}else if(H==0){j="12";}else{j=String(H);}return j.padStart(e.digits,"0");},parse:function(v,P,e,i){var j=i.dateValue.pm;var u=p.findNumbers(v,Math.max(P.digits,2));var H=parseInt(u);var V=p.checkValid(P.type,u==="",e);if(H==12){H=0;j=(j===undefined)?true:j;}if(i.strict&&H>11){V=false;}return{hour:H,length:u.length,pm:j,valid:V};}},"m":{name:"minute",format:function(e,i){var M=i.getUTCMinutes();return String(M).padStart(e.digits,"0");},parse:function(v,P,e,i){var V;var j=p.findNumbers(v,Math.max(P.digits,2));var M=parseInt(j);V=p.checkValid(P.type,j==="",e);if(i.strict&&M>59){V=false;}return{length:j.length,minute:M,valid:V};}},"s":{name:"second",format:function(e,i){var S=i.getUTCSeconds();return String(S).padStart(e.digits,"0");},parse:function(v,P,e,i){var V;var j=p.findNumbers(v,Math.max(P.digits,2));var S=parseInt(j);V=p.checkValid(P.type,j==="",e);if(i.strict&&S>59){V=false;}return{length:j.length,second:S,valid:V};}},"S":{name:"fractionalsecond",format:function(e,i){var M=i.getUTCMilliseconds();var j=String(M);var u=j.padStart(3,"0");u=u.substr(0,e.digits);u=u.padEnd(e.digits,"0");return u;},parse:function(v,P,e,i){var j=p.findNumbers(v,P.digits);var u=j.length;j=j.substr(0,3);j=j.padEnd(3,"0");var M=parseInt(j);return{length:u,millisecond:M};}},"z":{name:"timezoneGeneral",format:function(e,i,u,j,v){if(e.digits>3&&i.getTimezoneLong&&i.getTimezoneLong()){return i.getTimezoneLong();}else if(i.getTimezoneShort&&i.getTimezoneShort()){return i.getTimezoneShort();}var w=T.calculateOffset(i,v);var x="GMT";var y=Math.abs(w/60);var P=w>0;var H=Math.floor(y/60);var M=Math.floor(y%60);if(!u&&y!=0){x+=(P?"-":"+");x+=String(H).padStart(2,"0");x+=":";x+=String(M).padStart(2,"0");}else{x+="Z";}return x;},parse:function(v,P,e,i){var j=0;var u;var w=v.substring(0,3);if(w==="GMT"||w==="UTC"){j=3;}else if(v.substring(0,2)==="UT"){j=2;}else if(v.charAt(0)==="Z"){j=1;u=0;}else{return{error:"cannot be parsed correctly by sap.ui.core.format.DateFormat: The given timezone is not supported!"};}if(v.charAt(0)!=="Z"){var x=p.parseTZ(v.substr(j),true);j+=x.length;u=x.tzDiff;}return{length:j,tzDiff:u};}},"Z":{name:"timezoneRFC822",format:function(e,i,u,j,v){var w=T.calculateOffset(i,v);var x=Math.abs(w/60);var P=w>0;var H=Math.floor(x/60);var M=Math.floor(x%60);var y="";if(!u){y+=(P?"-":"+");y+=String(H).padStart(2,"0");y+=String(M).padStart(2,"0");}return y;},parse:function(v,P,e,i){return p.parseTZ(v,false);}},"X":{name:"timezoneISO8601",format:function(e,i,u,j,v){var w=T.calculateOffset(i,v);var x=Math.abs(w/60);var P=w>0;var H=Math.floor(x/60);var M=Math.floor(x%60);var y="";if(!u&&x!=0){y+=(P?"-":"+");y+=String(H).padStart(2,"0");if(e.digits>1||M>0){if(e.digits===3||e.digits===5){y+=":";}y+=String(M).padStart(2,"0");}}else{y+="Z";}return y;},parse:function(v,P,e,i){if(v.charAt(0)==="Z"){return{length:1,tzDiff:0};}else{return p.parseTZ(v,P.digits===3||P.digits===5);}}},"V":{name:"timezoneID",format:function(e,i,u,j,v){if(!u&&e.digits===2){return j.oLocaleData.getTimezoneTranslations()[v]||v;}return"";},parse:function(v,P,e,j,u){var w={timezone:"",length:0};if(P.digits===2){var x=e.oLocaleData.getTimezoneTranslations();if(v===x[u]){return{timezone:u,length:v.length};}var y=Object.values(x);var z=p.findEntry(v,y,e.oLocaleData.sCLDRLocaleId);if(z.index!==-1){return{timezone:Object.keys(x)[z.index],length:z.length};}var A="";for(var i=0;i<v.length;i++){A+=v[i];if(T.isValidTimezone(A)){w.timezone=A;w.length=A.length;}}}return w;}}};D.prototype._format=function(j,u,e){if(this.oFormatOptions.relative){var v=this.formatRelative(j,u,this.oFormatOptions.relativeRange,e);if(v){return v;}}var w=this.oFormatOptions.calendarType;var x=U.getInstance(j,w);var B=[],P,y,S;for(var i=0;i<this.aFormatArray.length;i++){P=this.aFormatArray[i];S=P.symbol||"";B.push(this.oSymbols[S].format(P,x,u,this,e));}y=B.join("");if(sap.ui.getCore().getConfiguration().getOriginInfo()){y=new String(y);y.originInfo={source:"Common Locale Data Repository",locale:this.oLocale.toString(),style:this.oFormatOptions.style,pattern:this.oFormatOptions.pattern};}return y;};D.prototype.format=function(j,u){var e;if(this.type===m.DATETIME_WITH_TIMEZONE){e=u;u=false;h(e);if(e&&!T.isValidTimezone(e)){b.error("The given timezone isn't valid.");return"";}}var i=this.oFormatOptions.calendarType,v;if(u===undefined){u=this.oFormatOptions.UTC;}e=e||sap.ui.getCore().getConfiguration().getTimezone();if(Array.isArray(j)){if(!this.oFormatOptions.interval){b.error("Non-interval DateFormat can't format more than one date instance.");return"";}if(j.length!==2){b.error("Interval DateFormat can only format with 2 date instances but "+j.length+" is given.");return"";}j=j.map(function(J){return l(J,e,u);});if(this.oFormatOptions.singleIntervalValue){if(j[0]===null){b.error("First date instance which is passed to the interval DateFormat shouldn't be null.");return"";}if(j[1]===null){v=this._format(j[0],u,e);}}if(v===undefined){if(!j.every(r)){b.error("At least one date instance which is passed to the interval DateFormat isn't valid.");return"";}v=this._formatInterval(j,u);}}else{if(!r(j)){if(this.type===m.DATETIME_WITH_TIMEZONE&&this.oFormatOptions.pattern.includes("VV")){return this.oLocaleData.getTimezoneTranslations()[e]||e;}b.error("The given date instance isn't valid.");return"";}if(this.oFormatOptions.interval){b.error("Interval DateFormat expects an array with two dates for the first argument but only one date is given.");return"";}j=l(j,e,u);v=this._format(j,u,e);}if(i==C.Japanese&&this.oLocale.getLanguage()==="ja"){v=v.replace(/(^|[^\d])1年/g,"$1元年");}return v;};D.prototype._formatInterval=function(j,u){var e=this.oFormatOptions.calendarType;var v=U.getInstance(j[0],e);var w=U.getInstance(j[1],e);var x;var P;var S;var B=[];var y;var z=[];var A=this._getGreatestDiffField([v,w]);if(!A){return this._format(j[0],u);}if(this.oFormatOptions.format){y=this.oLocaleData.getCustomIntervalPattern(this.oFormatOptions.format,A,e);}else{y=this.oLocaleData.getCombinedIntervalPattern(this.oFormatOptions.pattern,e);}z=this.parseCldrDatePattern(y);x=v;for(var i=0;i<z.length;i++){P=z[i];S=P.symbol||"";if(P.repeat){x=w;}B.push(this.oSymbols[S].format(P,x,u,this));}return B.join("");};var F={Era:"Era",FullYear:"Year",Quarter:"Quarter",Month:"Month",Week:"Week",Date:"Day",DayPeriod:"DayPeriod",Hours:"Hour",Minutes:"Minute",Seconds:"Second"};D.prototype._getGreatestDiffField=function(e){var i=false,j={};this.aIntervalCompareFields.forEach(function(u){var G="getUTC",M=G+u,v=F[u],w=e[0][M].apply(e[0]),x=e[1][M].apply(e[1]);if(!d(w,x)){i=true;j[v]=true;}});if(i){return j;}return null;};D.prototype._parse=function(v,e,u,S,j){var I=0,P,w,x;var y={valid:true,lastTimezonePatternSymbol:""};var z={formatArray:e,dateValue:y,strict:S};for(var i=0;i<e.length;i++){w=v.substr(I);P=e[i];z.index=i;x=this.oSymbols[P.symbol||""].parse(w,P,this,z,j)||{};if(x.tzDiff!==undefined||x.timezone){x.lastTimezonePatternSymbol=P.symbol;}y=c(y,x);if(x.valid===false){break;}I+=x.length||0;}y.index=I;if(y.pm){y.hour+=12;}if(y.dayNumberOfWeek===undefined&&y.dayOfWeek!==undefined){y.dayNumberOfWeek=this._adaptDayOfWeek(y.dayOfWeek);}if(y.quarter!==undefined&&y.month===undefined&&y.day===undefined){y.month=3*y.quarter;y.day=1;}return y;};D.prototype._parseInterval=function(v,e,u,S,j){var w,x,y;this.intervalPatterns.some(function(P){var z=this.parseCldrDatePattern(P);x=undefined;for(var i=0;i<z.length;i++){if(z[i].repeat){x=i;break;}}if(x===undefined){y=this._parse(v,z,u,S,j);if(y.index===0||y.index<v.length){y.valid=false;}if(y.valid===false){return;}w=[y,y];return true;}else{w=[];y=this._parse(v,z.slice(0,x),u,S,j);if(y.valid===false){return;}w.push(y);var A=y.index;y=this._parse(v.substring(A),z.slice(x),u,S,j);if(y.index===0||y.index+A<v.length){y.valid=false;}if(y.valid===false){return;}w.push(y);return true;}}.bind(this));return w;};var l=function(j,e,u){if(!u&&r(j)){return T.convertToTimezone(j,e);}return j;};var n=function(e,i,u,S,j){if(!e.valid){return null;}var v,y=typeof e.year==="number"?e.year:1970;v=U.getInstance(new Date(0),i);v.setUTCEra(e.era||U.getCurrentEra(i));v.setUTCFullYear(y);v.setUTCMonth(e.month||0);v.setUTCDate(e.day||1);v.setUTCHours(e.hour||0);v.setUTCMinutes(e.minute||0);v.setUTCSeconds(e.second||0);v.setUTCMilliseconds(e.millisecond||0);if(S&&(e.day||1)!==v.getUTCDate()){return null;}if(e.week!==undefined&&(e.month===undefined||e.day===undefined)){v.setUTCWeek({year:e.weekYear||e.year,week:e.week});if(e.dayNumberOfWeek!==undefined){v.setUTCDate(v.getUTCDate()+e.dayNumberOfWeek-1);}}v=v.getJSDate();if(!u&&((e.lastTimezonePatternSymbol==="V"&&e.timezone)||e.tzDiff===undefined)){if(e.timezone){j=e.timezone;}if(j){e.tzDiff=T.calculateOffset(v,j);}}if(e.tzDiff){v.setUTCSeconds((e.second||0)+e.tzDiff);}return v;};function o(e,i){if(e===i){return e;}var M={};Object.keys(e).forEach(function(K){M[K]=e[K];});Object.keys(i).forEach(function(K){if(!M.hasOwnProperty(K)){M[K]=i[K];}});return M;}function q(S,e){if(S.getTime()>e.getTime()){return false;}return true;}function r(e){return e&&typeof e.getTime==="function"&&!isNaN(e.getTime());}D.prototype.parse=function(v,u,S){var e=this.oFormatOptions.showDate===undefined||this.oFormatOptions.showDate;var i=this.oFormatOptions.showTime===undefined||this.oFormatOptions.showTime;if(this.type===m.DATETIME_WITH_TIMEZONE&&(e&&!i||!e&&i)){throw new TypeError("The input can only be parsed back to date if both date and time are supplied.");}var j;if(u===undefined&&this.type!==m.DATETIME_WITH_TIMEZONE){u=this.oFormatOptions.UTC;}var w=u;if(this.type===m.DATETIME_WITH_TIMEZONE){j=u;u=false;h(j);if(j&&!T.isValidTimezone(j)){b.error("The given timezone isn't valid.");return null;}}v=v==null?"":String(v).trim();var x;var y=this.oFormatOptions.calendarType;j=j||sap.ui.getCore().getConfiguration().getTimezone();if(S===undefined){S=this.oFormatOptions.strictParsing;}if(y==C.Japanese&&this.oLocale.getLanguage()==="ja"){v=v.replace(/元年/g,"1年");}if(!this.oFormatOptions.interval){var J=this.parseRelative(v,u);if(J){return J;}x=this._parse(v,this.aFormatArray,u,S,j);if(x.index===0||x.index<v.length){x.valid=false;}J=n(x,y,u,S,j);if(J){if(this.type===m.DATETIME_WITH_TIMEZONE){var z=this.oFormatOptions.showTimezone===undefined||this.oFormatOptions.showTimezone;if(!z&&e&&i){return[J,undefined];}else if(z&&!e&&!i){return[undefined,x.timezone];}return[J,x.timezone||undefined];}return J;}}else{var A=this._parseInterval(v,y,u,S,j);var B,E;if(A&&A.length==2){var G=o(A[0],A[1]);var H=o(A[1],A[0]);B=n(G,y,u,S,j);E=n(H,y,u,S,j);if(B&&E){if(this.oFormatOptions.singleIntervalValue&&B.getTime()===E.getTime()){return[B,null];}var V=q(B,E);if(S&&!V){b.error("StrictParsing: Invalid date range. The given end date is before the start date.");return[null,null];}return[B,E];}}}if(!this.bIsFallback){var I;this.aFallbackFormats.every(function(K){I=K.parse(v,w,S);if(Array.isArray(I)){if(K.type===m.DATETIME_WITH_TIMEZONE){return false;}return!(I[0]&&I[1]);}else{return!I;}});return I;}if(!this.oFormatOptions.interval){return null;}else{return[null,null];}};D.prototype.parseCldrDatePattern=function(P){if(g[P]){return g[P];}var e=[],i,Q=false,j=null,S="",N="",A={},I=false;for(i=0;i<P.length;i++){var u=P.charAt(i),v,w,x;if(Q){if(u=="'"){w=P.charAt(i-1);x=P.charAt(i-2);v=P.charAt(i+1);if(w=="'"&&x!="'"){Q=false;}else if(v=="'"){i+=1;}else{Q=false;continue;}}if(S=="text"){j.value+=u;}else{j={type:"text",value:u};e.push(j);S="text";}}else{if(u=="'"){Q=true;}else if(this.oSymbols[u]){N=this.oSymbols[u].name;if(S==N){j.digits++;}else{j={type:N,symbol:u,digits:1};e.push(j);S=N;if(!I){if(A[N]){j.repeat=true;I=true;}else{A[N]=true;}}}}else{if(S=="text"){j.value+=u;}else{j={type:"text",value:u};e.push(j);S="text";}}}}g[P]=e;return e;};D.prototype.parseRelative=function(v,u){var P,e,j,w,V;if(!v){return null;}P=this.oLocaleData.getRelativePatterns(this.aRelativeParseScales,this.oFormatOptions.relativeStyle);for(var i=0;i<P.length;i++){e=P[i];j=new RegExp("^\\s*"+e.pattern.replace(/\{0\}/,"(\\d+)")+"\\s*$","i");w=j.exec(v);if(w){if(e.value!==undefined){return x(e.value,e.scale);}else{V=parseInt(w[1]);return x(V*e.sign,e.scale);}}}function x(y,S){var z,A=new Date(),J;if(u){z=A.getTime();}else{z=Date.UTC(A.getFullYear(),A.getMonth(),A.getDate(),A.getHours(),A.getMinutes(),A.getSeconds(),A.getMilliseconds());}J=new Date(z);switch(S){case"second":J.setUTCSeconds(J.getUTCSeconds()+y);break;case"minute":J.setUTCMinutes(J.getUTCMinutes()+y);break;case"hour":J.setUTCHours(J.getUTCHours()+y);break;case"day":J.setUTCDate(J.getUTCDate()+y);break;case"week":J.setUTCDate(J.getUTCDate()+y*7);break;case"month":J.setUTCMonth(J.getUTCMonth()+y);break;case"quarter":J.setUTCMonth(J.getUTCMonth()+y*3);break;case"year":J.setUTCFullYear(J.getUTCFullYear()+y);break;}if(u){return J;}else{return new Date(J.getUTCFullYear(),J.getUTCMonth(),J.getUTCDate(),J.getUTCHours(),J.getUTCMinutes(),J.getUTCSeconds(),J.getUTCMilliseconds());}}};D.prototype.formatRelative=function(j,u,e,i){var v=l(new Date(),i),w,S=this.oFormatOptions.relativeScale||"day",x,P,y;y=(j.getTime()-v.getTime())/1000;if(this.oFormatOptions.relativeScale=="auto"){S=this._getScale(y,this.aRelativeScales);S=s(j,v,S,y);}if(!e){e=this._mRanges[S];}if(S=="year"||S=="month"||S=="day"){v=new Date(Date.UTC(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()));w=new Date(0);w.setUTCFullYear(j.getUTCFullYear(),j.getUTCMonth(),j.getUTCDate());j=w;}x=this._getDifference(S,[v,j]);if(this.oFormatOptions.relativeScale!="auto"&&(x<e[0]||x>e[1])){return null;}P=this.oLocaleData.getRelativePattern(S,x,y>0,this.oFormatOptions.relativeStyle);return f(P,[Math.abs(x)]);};D.prototype._mRanges={second:[-60,60],minute:[-60,60],hour:[-24,24],day:[-6,6],week:[-4,4],month:[-12,12],year:[-10,10]};D.prototype._mScales={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592000,quarter:7776000,year:31536000};D.prototype._getScale=function(e,S){var j,u;e=Math.abs(e);for(var i=0;i<S.length;i++){u=S[i];if(e>=this._mScales[u]){j=u;break;}}if(!j){j=S[S.length-1];}return j;};function s(j,e,S,i){var M=Math.abs(j.getUTCMonth()-e.getUTCMonth());if(S==="week"&&M===2){return"month";}else if(S==="week"&&M===1){if(j.getUTCDate()===e.getUTCDate()||(i<0&&j.getUTCDate()<e.getUTCDate())||(i>0&&j.getUTCDate()>e.getUTCDate())){return"month";}}else if(S==="month"&&M===1){if((i>0&&j.getUTCDate()<e.getUTCDate())||(i<0&&j.getUTCDate()>e.getUTCDate())){return"week";}}return S;}function t(e,S){var j=["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],M;var u=new Date(e.getTime());for(var i=S;i<j.length;i++){M="setUTC"+j[S];u[M].apply(u,[0]);}return u;}var R={year:function(e,i){return i.getUTCFullYear()-e.getUTCFullYear();},month:function(e,i){return i.getUTCMonth()-e.getUTCMonth()+(this.year(e,i)*12);},week:function(e,i,j){var u=j._adaptDayOfWeek(e.getUTCDay());var v=j._adaptDayOfWeek(i.getUTCDay());e=t(e,3);i=t(i,3);return(i.getTime()-e.getTime()-(v-u)*j._mScales.day*1000)/(j._mScales.week*1000);},day:function(e,i,j){e=t(e,3);i=t(i,3);return(i.getTime()-e.getTime())/(j._mScales.day*1000);},hour:function(e,i,j){e=t(e,4);i=t(i,4);return(i.getTime()-e.getTime())/(j._mScales.hour*1000);},minute:function(e,i,j){e=t(e,5);i=t(i,5);return(i.getTime()-e.getTime())/(j._mScales.minute*1000);},second:function(e,i,j){e=t(e,6);i=t(i,6);return(i.getTime()-e.getTime())/(j._mScales.second*1000);}};D.prototype._adaptDayOfWeek=function(i){var e=a.getInstance(sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale()).getFirstDayOfWeek();var j=i-(e-1);if(j<=0){j+=7;}return j;};D.prototype._getDifference=function(S,e){var i=e[0];var j=e[1];return Math.round(R[S](i,j,this));};D.prototype.getAllowedCharacters=function(e){if(this.oFormatOptions.relative){return"";}var A="";var N=false;var j=false;var P;for(var i=0;i<e.length;i++){P=e[i];switch(P.type){case"text":if(A.indexOf(P.value)<0){A+=P.value;}break;case"day":case"year":case"weekYear":case"dayNumberOfWeek":case"weekInYear":case"hour0_23":case"hour1_24":case"hour0_11":case"hour1_12":case"minute":case"second":case"fractionalsecond":if(!N){A+="0123456789";N=true;}break;case"month":case"monthStandalone":if(P.digits<3){if(!N){A+="0123456789";N=true;}}else{j=true;}break;default:j=true;break;}}if(j){A="";}return A;};return D;},true);
