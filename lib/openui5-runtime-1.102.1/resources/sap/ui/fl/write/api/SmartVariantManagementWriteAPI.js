/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/apply/_internal/flexState/compVariants/Utils","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/write/_internal/flexState/compVariants/CompVariantState","sap/ui/fl/write/_internal/transport/TransportSelection","sap/base/util/UriParameters","sap/ui/fl/registry/Settings"],function(C,M,a,T,U,S){"use strict";function s(p,f){p.persistencyKey=C.getPersistencyKey(p.control);if(!p.reference){p.reference=M.getFlexReferenceForControl(p.control);}return f(p);}var b={addVariant:function(p){return s(p,a.addVariant);},updateVariant:function(p){return s(p,a.updateVariant);},removeVariant:function(p){return s(p,a.removeVariant);},revert:function(p){return s(p,a.revert);},save:function(p){return s(p,a.persist);},setDefaultVariantId:function(p){return s(p,a.setDefault);},isVariantSharingEnabled:function(){return S.getInstance().then(function(i){return i.isVariantSharingEnabled();});},isVariantPersonalizationEnabled:function(){return S.getInstance().then(function(i){return i.isVariantPersonalizationEnabled();});},isVariantAdaptationEnabled:function(){return S.getInstance().then(function(i){return i.isVariantAdaptationEnabled();});},overrideStandardVariant:function(p){s(p,a.overrideStandardVariant);},revertSetDefaultVariantId:function(p){return s(p,a.revertSetDefaultVariantId);},_getTransportSelection:function(){function t(){var l=U.fromQuery(window.location.search).get("sap-ui-layer")||"";return!!l;}var o=new T();o.selectTransport=function(O,f,e,c,d,g){if(!t()){f(o._createEventObject(O,{transportId:""}));return;}T.prototype.selectTransport.call(this,O,f,e,c,d,g);};return o;}};return b;});
