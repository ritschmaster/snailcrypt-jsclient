/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Component","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/Utils","sap/base/Log"],function(C,M,a,U,L){"use strict";var b=function(){};function i(o){return o.getChangeType()==="codeExt";}function c(s,o){var S=o.getSelector().controllerName;return s===S;}function g(d){if(d.length===0){return Promise.resolve([]);}return new Promise(function(r){sap.ui.require(d,function(){r(Array.prototype.slice.call(arguments));},function(e){L.error("Code Extension not found",e.message);r([]);});});}b.prototype.getControllerExtensions=function(s,d,A){if(A){if(!d){L.warning("No component ID for determining the anchor of the code extensions was passed.");return Promise.resolve([]);}var o=C.get(d);var e=U.getAppComponentForControl(o);if(!e){L.warning("No application component for determining the anchor of the code extensions was identified.");return Promise.resolve([]);}if(!U.isApplication(e.getManifestObject())){return Promise.resolve([]);}var f=M.getFlexReferenceForControl(e);var h=a.getChangePersistenceForComponent(f);return h.getChangesForComponent().then(function(j){var E=j.filter(function(k){return i(k)&&c(s,k);}).map(function(k){return k.getModuleName();});return g(E);});}L.warning("Synchronous extensions are not supported via UI5 Flexibility");return[];};return b;});
