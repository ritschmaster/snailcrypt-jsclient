/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/fl/Utils","sap/ui/fl/changeHandler/condenser/Classification","sap/base/Log"],function(q,F,C,L){"use strict";var P={};function i(p){return F.isBinding(p)||q.isPlainObject(p);}function c(o,p,v,m){try{if(i(v)){m.setPropertyBinding(o,p,v);}else{m.setProperty(o,p,v);}}catch(e){throw new Error("Applying property changes failed: "+e);}}P.applyChange=function(o,a,p){var d=o.getDefinition();var s=d.content.property;var v=d.content.newValue;var m=p.modifier;return Promise.resolve().then(m.getPropertyBindingOrProperty.bind(m,a,s)).then(function(O){o.setRevertData({originalValue:O});c(a,s,v,m);});};P.revertChange=function(o,a,p){var r=o.getRevertData();if(r){var d=o.getDefinition();var s=d.content.property;var v=r.originalValue;var m=p.modifier;c(a,s,v,m);o.resetRevertData();}else{L.error("Attempt to revert an unapplied change.");}};P.completeChangeContent=function(o,s){return Promise.resolve().then(function(){var a=o.getDefinition();if(!s.content){throw new Error("oSpecificChangeInfo attribute required");}a.content=s.content;});};P.getCondenserInfo=function(o){return{affectedControl:o.getSelector(),classification:C.LastOneWins,uniqueKey:o.getContent().property};};return P;},true);
