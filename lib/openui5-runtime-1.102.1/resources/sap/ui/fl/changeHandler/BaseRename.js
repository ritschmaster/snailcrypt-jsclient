/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/changeHandler/Base","sap/base/Log","sap/ui/fl/changeHandler/condenser/Classification"],function(B,L,C){"use strict";var a={createRenameChangeHandler:function(r){r.changePropertyName=r.changePropertyName||"newText";return{applyChange:function(c,o,p){var m=p.modifier;var P=r.propertyName;var b=c.getDefinition();var t=b.texts[r.changePropertyName];var v=t.value;return Promise.resolve().then(function(){if(b.texts&&t&&typeof(v)==="string"){return m.getPropertyBindingOrProperty(o,P).then(function(d){c.setRevertData(d);return m.setPropertyBindingOrProperty(o,P,v);});}L.error("Change does not contain sufficient information to be applied: ["+b.layer+"]"+b.namespace+"/"+b.fileName+"."+b.fileType);return undefined;});},revertChange:function(c,o,p){var m=p.modifier;var P=r.propertyName;var O=c.getRevertData();if(O||O===""){m.setPropertyBindingOrProperty(o,P,O);c.resetRevertData();return;}L.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange.");},completeChangeContent:function(c,s,p){var o=c.getDefinition();var b=r.changePropertyName;var t=r.translationTextType;return Promise.resolve().then(function(){return p.modifier.bySelector(c.getSelector(),p.appComponent);}).then(function(d){o.content.originalControlType=p.modifier.getControlType(d);if(typeof(s.value)==="string"){B.setTextInChange(o,b,s.value,t);}else{return Promise.reject(new Error("oSpecificChangeInfo.value attribute required"));}});},getCondenserInfo:function(c){return{affectedControl:c.getSelector(),classification:C.LastOneWins,uniqueKey:r.propertyName||r.changePropertyName};},getChangeVisualizationInfo:function(c){var n=(c.getDefinition().texts&&c.getDefinition().texts[r.changePropertyName]);return{payload:{originalLabel:c.getRevertData(),newLabel:n&&n.value}};}};}};return a;},true);
