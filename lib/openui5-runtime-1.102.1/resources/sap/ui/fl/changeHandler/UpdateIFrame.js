/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/extend"],function(e){"use strict";var U={};var u=["width","height","url","_settings"];function g(m,i){var s={};var p=[];u.forEach(function(P){var o=Promise.resolve().then(m.getProperty.bind(m,i,P)).then(function(v){if(v!==undefined){s[P]=v;}});p.push(o);});return Promise.all(p).then(function(){return s;});}function a(m,i,s){var f=e({_settings:s},s);return Promise.resolve().then(m.applySettings.bind(m,i,f));}U.applyChange=function(c,C,p){var m=p.modifier;var o=c.getDefinition();return m.getControlMetadata(C).then(function(b){if(b.getName()!=="sap.ui.fl.util.IFrame"){return Promise.reject(new Error("UpdateIFrame only for sap.ui.fl.util.IFrame"));}return g(m,C);}).then(function(O){c.setRevertData({originalSettings:O});return a(m,C,o.settings);});};U.revertChange=function(c,C,p){var r=c.getRevertData();return Promise.resolve().then(function(){if(r){if(r.originalSettings._settings&&r.originalSettings._settings.url){r.originalSettings.url=r.originalSettings._settings.url;}return a(p.modifier,C,r.originalSettings);}return Promise.reject(new Error("Attempt to revert an unapplied change."));}).then(function(){c.resetRevertData();});};U.completeChangeContent=function(c,s){var C=c.getDefinition();if(!s.content||!Object.keys(s.content).some(function(p){return u.indexOf(p)!==-1;})){throw new Error("oSpecificChangeInfo attribute required");}C.settings=s.content;};return U;},true);
