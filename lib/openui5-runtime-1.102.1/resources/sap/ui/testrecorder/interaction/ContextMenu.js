/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ui/testrecorder/Constants","sap/ui/testrecorder/interaction/Commands","sap/ui/testrecorder/interaction/CommandExecutor","sap/ui/testrecorder/CommunicationBus","sap/ui/testrecorder/CommunicationChannels"],function($,B,c,C,a,b,d){"use strict";var e=5;var f=null;var s={};var m={};var S={};var g=B.extend("sap.ui.testrecorder.interaction.ContextMenu",{});g.show=function(D){s=D.domElementId;if(f===null&&!document.getElementById(c.CONTEXTMENU_ID)){f=_(D);}if(D.items){var h=Object.keys(m).filter(function(I){return!(D.items[I]||D.items[I]===undefined);});var v=Object.keys(m).filter(function(I){return D.items[I]||D.items[I]===undefined;});if(h.length===Object.keys(m).length){this.hide();return this;}h.forEach(function(I){m[I].hide();});v.forEach(function(I){m[I].show();});}var i=$(sap.ui.getCore().getStaticAreaRef());$.map(i.find(":visible"),function(o){var p=$(o);if(p.control&&p.control()[0]){var q=p.control()[0];if(q.oPopup&&q.oPopup.setAutoClose&&!S[q.getId()]){S[q.getId()]={autoClose:q.oPopup.getAutoClose()};q.oPopup.setAutoClose(false);}}});var V=$(window).width();var j=$(window).height();var M=f.width();var k=f.height();var l=D.location.x+M+e>=V?D.location.x-M:D.location.x;var n=D.location.y+k+e>=j?D.location.y-k:D.location.y;f.css("top",(n+e)+"px");f.css("left",(l+e)+"px");g._show();return this;};g.hide=function(){if(f){f.hide();}Object.keys(S).forEach(function(i){var p=sap.ui.getCore().byId(i).oPopup;p.setAutoClose(S[i].autoClose);p._$().focus();});S={};};g._show=function(){if(f){f.show();}};function _(D){var f=$("<div></div>");var h=$("<div></div>");var i=$("<div></div>");var j=$("<div></div>");m={highlight:h,press:i,enterText:j};h.text("Highlight");i.text("Press");j.text("Enter Text");h.on("click",function(){g.hide();var k={domElementId:s};if(D.withEvents){b.publish(d.CONTEXT_MENU_HIGHLIGHT,k);}else{a.execute(C.HIGHLIGHT,k);}});i.on("click",function(){g.hide();var k={domElementId:s};if(D.withEvents){b.publish(d.CONTEXT_MENU_PRESS,k);}else{a.execute(C.PRESS,k);}});j.on("click",function(){g.hide();var k={domElementId:s};if(D.withEvents){b.publish(d.CONTEXT_MENU_ENTER_TEXT,k);}else{a.execute(C.ENTER_TEXT,k);}});f.attr("id",c.CONTEXTMENU_ID);f.css("min-width","150px");f.css("position","absolute");f.css("z-index",1001);f.css("border","1px solid rgb(200, 142, 250)");f.css("border-radius","3px");f.css("background","#fff");f.css("box-sizing","border-box");[h,j,i].forEach(function(k){k.css("padding","16px");k.css("cursor","pointer");k.on("mouseenter",function(){k.css("background-color","#ebf5fe");}).on("mouseleave",function(){k.css("background-color","transparent");});});[h,i].forEach(function(k){k.css("border-bottom","1px solid #d9d9d9");});f.append(h);f.append(i);f.append(j);$(document.body).append(f);return f;}return g;});
