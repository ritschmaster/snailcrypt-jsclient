/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/testrecorder/interaction/ContextMenu","sap/ui/testrecorder/interaction/CommandExecutor","sap/ui/testrecorder/interaction/Commands","sap/ui/testrecorder/CommunicationBus","sap/ui/testrecorder/CommunicationChannels"],function(B,C,a,b,c,d){"use strict";var r=null;var R=B.extend("sap.ui.testrecorder.interaction.RecordListener",{constructor:function(){if(!r){B.apply(this,arguments);this._fnClickListener=this._onClick.bind(this);this._fnContextmenuListener=this._onContextmenu.bind(this);}else{return r;}}});R.prototype.init=function(){document.addEventListener("click",this._fnClickListener);document.addEventListener("contextmenu",this._fnContextmenuListener);c.subscribe(d.CONTEXT_MENU_HIGHLIGHT,this._onContextHighlight.bind(this));c.subscribe(d.CONTEXT_MENU_PRESS,this._onContextPress.bind(this));c.subscribe(d.CONTEXT_MENU_ENTER_TEXT,this._onContextEnterText.bind(this));c.subscribe(d.ASSERT_PROPERTY,this._onAssertProperty.bind(this));};R.prototype.stop=function(){C.hide();document.removeEventListener("click",this._fnClickListener);document.removeEventListener("contextmenu",this._fnContextmenuListener);};R.prototype._onClick=function(e){e.preventDefault();e.stopPropagation();C.hide();};R.prototype._onContextmenu=function(e){e.preventDefault();var D=_(e.target);C.show({domElementId:D,location:{x:e.pageX,y:e.pageY}});};R.prototype._onContextHighlight=function(D){a.execute(b.HIGHLIGHT,D);};R.prototype._onContextPress=function(D){a.execute(b.PRESS,D);};R.prototype._onAssertProperty=function(D){a.execute(b.ASSERT,D);};R.prototype._onContextEnterText=function(D){a.execute(b.ENTER_TEXT,D);};function _(D){if(D.id){return D.id;}else if(D.parentElement){return _(D.parentElement);}else{return"";}}r=new R();return r;},true);
