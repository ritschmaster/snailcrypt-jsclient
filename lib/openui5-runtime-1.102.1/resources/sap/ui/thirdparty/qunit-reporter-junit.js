/**
 * JUnit reporter for QUnit v1.1.1
 *
 * https://github.com/JamesMGreene/qunit-reporter-junit
 *
 * ##### BEGIN: MODIFIED BY SAP
 * Support for nested modules was inspired by
 * https://github.com/JamesMGreene/qunit-reporter-junit/pull/30
 * (https://github.com/abstraktor/qunit-reporter-junit/commit/526cd95adf147f9867f5ec025e61d2cd9ee1aa3f).
 * ##### END: MODIFIED BY SAP
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * https://jquery.org/license/
 */
(function(){'use strict';var c,b,e,f,u,_,g=[],U=[];QUnit.jUnitReport=function(){};QUnit.jUnitDone=function(a){if(typeof a==='function'){if(u){a(u);}else{U.push(a);}}};_=function(){var a;do{a=U.shift();if(typeof a==='function'){a(u);}}while(U.length>0);if(typeof QUnit.jUnitReport==='function'){QUnit.jUnitReport(u);}};QUnit.begin(function(){c={modules:[],total:0,passed:0,failed:0,start:new Date(),time:0};});QUnit.moduleStart(function(d){g.push(b);b={name:d.name,tests:[],total:0,passed:0,failed:0,start:new Date(),time:0,stdout:[],stderr:[]};c.modules.push(b);});QUnit.testStart(function(d){if(!b){b={name:d.module||'default',tests:[],total:0,passed:0,failed:0,start:new Date(),time:0,stdout:[],stderr:[]};c.modules.push(b);}f=0;e={name:d.name,failedAssertions:[],total:0,passed:0,failed:0,start:new Date(),time:0};b.tests.push(e);});QUnit.log(function(d){f++;if(!d.result){e.failedAssertions.push(d);b.stdout.push('['+b.name+', '+e.name+', '+f+'] '+d.message+(d.source?'\nSource: '+d.source:''));}});QUnit.testDone(function(d){e.time=(new Date()).getTime()-e.start.getTime();e.total=d.total;e.passed=d.passed;e.failed=d.failed;e=null;});QUnit.moduleDone(function(d){b.time=(new Date()).getTime()-b.start.getTime();b.total=d.total;b.passed=d.passed;b.failed=d.failed;b=g.pop();});QUnit.done(function(d){c.time=d.runtime||((new Date()).getTime()-c.start.getTime());c.total=d.total;c.passed=d.passed;c.failed=d.failed;h(d,c);});var h=function(r,j){var p=function(n){return n<10?'0'+n:n;};var k=function(d){return d.getUTCFullYear()+'-'+p(d.getUTCMonth()+1)+'-'+p(d.getUTCDate())+'T'+p(d.getUTCHours())+':'+p(d.getUTCMinutes())+':'+p(d.getUTCSeconds())+'Z';};var l=function(d){return Math.round(d*1000)/1000000;};var x=function(d){var i={'<':'&lt;','>':'&gt;','&':'&amp;','"':'&quot;','\'':'&apos;','\r':'','\n':'&#10;','\t':'&#9;'};return(''+d).replace(/[<>&"'\r\n\t]/g,function(n){return i.hasOwnProperty(n)?i[n]:n;});};var X=function(d){if(!(this instanceof X)){return new X(d);}d=d||{};var n=[],A=[],B;var C=function(i){if(B[i]&&n[n.length-1]!=='\n'){n.push('\n');}};B=(function(D){var i,E={};D=D||[];i=D.length;while(i--){E[D[i]]={};}return E;})(d.linebreak_at);this.start=function(i,D,E){if(!E){A.push(i);}n.push('<'+i);for(var F in D){n.push(' '+x(F)+'="'+x(D[F])+'"');}n.push(E?' />':'>');C(i);};this.end=function(){var i=A.pop();C(i);n.push('</'+i+'>');C(i);};this.text=function(i){n.push(x(i));};this.cdata=function(i){n.push('<![CDATA['+i+']]>');};this.comment=function(i){n.push('<!--'+i+'-->');};this.pi=function(i,D){n.push('<?'+i+(D?' '+D:'')+'?>\n');};this.doctype=function(i){n.push('<!DOCTYPE'+i+'>\n');};this.getString=function(){while(A.length){this.end();}return n.join('').replace(/\n$/,'');};this.reset=function(){n.length=0;A.length=0;};this.pi(d.xmldecl||'xml version="1.0" encoding="UTF-8"');};var m,L,o,t,q,s,a,v,w,y,z=new X({linebreak_at:['testsuites','testsuite','testcase','failure','expected','actual','system-out','system-err']});z.start('testsuites',{name:(typeof location!=='undefined'&&location&&location.href)||(j.modules.length===1&&j.modules[0].name)||null,tests:j.total,failures:j.failed,errors:0,time:l(j.time)});for(m=0,L=j.modules.length;m<L;m++){o=j.modules[m];z.start('testsuite',{id:m,name:o.name,hostname:'localhost',tests:o.total,failures:o.failed,errors:0,time:l(o.time),timestamp:k(o.start)});for(t=0,q=o.tests.length;t<q;t++){s=o.tests[t];z.start('testcase',{name:s.name,time:l(s.time),timestamp:k(s.start)});for(a=0,v=s.failedAssertions.length;a<v;a++){w=s.failedAssertions[a];y=w&&!(w.actual&&w.expected);z.start('failure',{type:'AssertionFailedError',message:w.message},y);if(!y){z.start('actual',{value:w.actual},true);z.start('expected',{value:w.expected},true);z.end();}}z.end();}if(o.stdout&&o.stdout.length){z.start('system-out');z.cdata('\n'+o.stdout.join('\n')+'\n');z.end();}if(o.stderr&&o.stderr.length){z.start('system-err');z.cdata('\n'+o.stderr.join('\n')+'\n');z.end();}z.end();}z.end();u={results:r,xml:z.getString()};_();};})();
