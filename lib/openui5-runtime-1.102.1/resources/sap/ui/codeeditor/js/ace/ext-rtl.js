ace.define("ace/ext/rtl",[],function(r,a,m){"use strict";var c=[{name:"leftToRight",bindKey:{win:"Ctrl-Alt-Shift-L",mac:"Command-Alt-Shift-L"},exec:function(e){e.session.$bidiHandler.setRtlDirection(e,false);},readOnly:true},{name:"rightToLeft",bindKey:{win:"Ctrl-Alt-Shift-R",mac:"Command-Alt-Shift-R"},exec:function(e){e.session.$bidiHandler.setRtlDirection(e,true);},readOnly:true}];var E=r("../editor").Editor;r("../config").defineOptions(E.prototype,"editor",{rtlText:{set:function(v){if(v){this.on("change",d);this.on("changeSelection",o);this.renderer.on("afterRender",u);this.commands.on("exec",b);this.commands.addCommands(c);}else{this.off("change",d);this.off("changeSelection",o);this.renderer.off("afterRender",u);this.commands.off("exec",b);this.commands.removeCommands(c);f(this.renderer);}this.renderer.updateFull();}},rtl:{set:function(v){this.session.$bidiHandler.$isRtl=v;if(v){this.setOption("rtlText",false);this.renderer.on("afterRender",u);this.session.$bidiHandler.seenBidi=true;}else{this.renderer.off("afterRender",u);f(this.renderer);}this.renderer.updateFull();}}});function o(e,g){var l=g.getSelection().lead;if(g.session.$bidiHandler.isRtlLine(l.row)){if(l.column===0){if(g.session.$bidiHandler.isMoveLeftOperation&&l.row>0){g.getSelection().moveCursorTo(l.row-1,g.session.getLine(l.row-1).length);}else{if(g.getSelection().isEmpty())l.column+=1;else l.setPosition(l.row,l.column+1);}}}}function b(e){e.editor.session.$bidiHandler.isMoveLeftOperation=/gotoleft|selectleft|backspace|removewordleft/.test(e.command.name);}function d(e,g){var s=g.session;s.$bidiHandler.currentRow=null;if(s.$bidiHandler.isRtlLine(e.start.row)&&e.action==='insert'&&e.lines.length>1){for(var h=e.start.row;h<e.end.row;h++){if(s.getLine(h+1).charAt(0)!==s.$bidiHandler.RLE)s.doc.$lines[h+1]=s.$bidiHandler.RLE+s.getLine(h+1);}}}function u(e,g){var s=g.session;var $=s.$bidiHandler;var h=g.$textLayer.$lines.cells;var w=g.layerConfig.width-g.layerConfig.padding+"px";h.forEach(function(i){var j=i.element.style;if($&&$.isRtlLine(i.row)){j.direction="rtl";j.textAlign="right";j.width=w;}else{j.direction="";j.textAlign="";j.width="";}});}function f(e){var l=e.$textLayer.$lines;l.cells.forEach(g);l.cellCache.forEach(g);function g(h){var s=h.element.style;s.direction=s.textAlign=s.width="";}}});(function(){ace.require(["ace/ext/rtl"],function(m){if(typeof module=="object"&&typeof exports=="object"&&module){module.exports=m;}});})();
