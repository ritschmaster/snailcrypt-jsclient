/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/rta/plugin/Plugin","sap/ui/fl/Utils","sap/ui/rta/Utils"],function(P,F,R){"use strict";var B=P.extend("sap.ui.rta.plugin.BaseCreate",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});B.prototype._isEditable=function(o){return Promise.all([this._isEditableCheck(o,true),this._isEditableCheck(o,false)]).then(function(p){return{asSibling:p[0],asChild:p[1]};});};B.prototype._isEditableCheck=function(o,O){var p=this._getParentOverlay(O,o);var a;if(!p||!p.getParentElementOverlay()){return Promise.resolve(false);}if(O){a=o.getParentAggregationOverlay().getAggregationName();}return this.checkAggregationsOnSelf(p,this.getActionName(),a).then(function(e){if(e){var b=F.getViewForControl(p.getElement());return this.hasStableId(o)&&F.checkControlId(b);}return false;}.bind(this));};B.prototype._getParentOverlay=function(s,o){var p;var r=this.getResponsibleElementOverlay(o);if(s){p=r.getParentElementOverlay();}else{p=r;}return p;};B.prototype.getCreateActions=function(s,o){var r=this.getResponsibleElementOverlay(o);var p=this._getParentOverlay(s,r);var d=p.getDesignTimeMetadata();var a=d.getActionDataFromAggregations(this.getActionName(),r.getElement());if(s){var b=r.getParentAggregationOverlay().getAggregationName();return a.filter(function(A){return A.aggregation===b;});}return a;};B.prototype.getCreateAction=function(s,o,a){var A=this.getCreateActions(s,o);if(a){var c;A.some(function(b){if(b.aggregation===a){c=b;return true;}});return c;}return A[0];};B.prototype.isAvailable=function(s,e){return this._isEditableByPlugin(e[0],s);};B.prototype.isActionEnabled=function(a,s,e){if(!a){return false;}if(a.isEnabled&&typeof a.isEnabled==="function"){var I=a.isEnabled;var p=this._getParentOverlay(s,e);return I(p.getElement());}return true;};B.prototype.getCreatedContainerId=function(a,n){var I=n;if(a.getCreatedContainerId&&typeof a.getCreatedContainerId==="function"){var m=a.getCreatedContainerId;I=m(n);}return I;};B.prototype._determineIndex=function(p,s,a,g){return R.getIndex(p,s,a,g);};B.prototype._getText=function(a,e,d,t){if(!a){return t;}var A=d.getAggregationDescription(a.aggregation,e);if(!A){return t;}var c=A.singular;var T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");return T.getText(t,c);};B.prototype.getActionName=function(){throw new Error("abstract");};function i(){}B.prototype.getMenuItems=function(e){i(e);throw new Error("abstract");};B.prototype.handleCreate=function(s,o){i(s,o);throw new Error("abstract");};return B;});
