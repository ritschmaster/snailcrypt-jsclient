/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/BindingParser","sap/base/util/extend","sap/base/util/isPlainObject","sap/ui/integration/formatters/DateTimeFormatter","sap/ui/integration/formatters/NumberFormatter","sap/ui/integration/formatters/TextFormatter","sap/ui/integration/bindingFeatures/DateRange","sap/ui/integration/formatters/InitialsFormatter"],function(B,e,i,D,N,T,a,I){"use strict";var r=/\{\{([^}]+)\}\}/g,b=/\{\{(parameters\.[^}]+)\}\}/g,c=/\{\{(dataSources\.[^}]+)\}\}/g;var d={};var f={date:D.date,dateTime:D.dateTime,currency:N.currency,"float":N.float,integer:N.integer,percent:N.percent,text:T.text,unit:N.unit,initials:I.initials};d.mLocals={"format":f,"dateRange":a};d.extractBindingInfo=function(v,l){v=d.escapeCardPlaceholders(v);return B.complexParser(v,undefined,true,undefined,undefined,undefined,e({},d.mLocals,l));};d.createBindingInfos=function(v,l){if(!v){return v;}if(Array.isArray(v)){return v.map(function(v){return d.createBindingInfos(v,l);});}if(i(v)){var o={};for(var k in v){o[k]=d.createBindingInfos(v[k],l);}return o;}if(typeof v==="string"){var g=d.extractBindingInfo(v,l);return d.escapeParametersAndDataSources(g||v);}return v;};d.formattedProperty=function(v,F){if(v===undefined){return v;}var o={};if(Array.isArray(v)){o.parts=v.map(function(h){return typeof h==="object"?e({},h):{value:h};});o.formatter=F;}else if(typeof v==="object"){o=e({},v);if(v.formatter){var g=o.formatter;o.formatter=function(){var s=g.apply(this,arguments);return F(s);};}else{o.formatter=F;}}else{o={value:v,formatter:F};}return o;};d.escapeCardPlaceholders=function(v){if(typeof v!=="string"){return v;}return v.replace(r,"\\{\\{$1\\}\\}");};d.escapeParametersAndDataSources=function(v){if(typeof v!=="string"){return v;}return v.replace(b,"\\{\\{$1\\}\\}").replace(c,"\\{\\{$1\\}\\}");};d.isAbsolutePath=function(p){return p.startsWith("/");};d.prependRelativePaths=function(v,p){if(typeof v!=="object"){return v;}var o=e({},v);if(o.path&&!this.isAbsolutePath(o.path)){o.path=p+"/"+o.path;}if(o.parts){o.parts=o.parts.map(function(g){return d.prependRelativePaths(g,p);});}return o;};d.propagateModels=function(s,t){var S=e({},s.oPropagatedProperties.oModels,s.oModels),m=Object.keys(S),o=s.getModel();if(o){t.setModel(o);}m.forEach(function(M){if(M==="undefined"){return;}var g=s.getModel(M);if(g){t.setModel(g,M);}});};d.reuse=function(v){if(typeof v==="object"){return e({},v);}return v;};return d;});
