/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/integration/util/BindingHelper","sap/ui/integration/util/BindingResolver","sap/ui/integration/util/Utils"],function(B,a,U){"use strict";var M={};M.resolveCard=function(c){c.startManifestProcessing();return M._awaitReadyEvent(c).then(M._handleCardReady);};M._awaitReadyEvent=function(c){return new Promise(function(r,b){c.attachEvent("_ready",function(e){r(c);});});};M._handleCardReady=function(c){var m=c.getManifestEntry("/");var f=[];var e=c.getFundamentalErrors();if(e.length){return Promise.reject(e.join(" "));}if(c.getAggregation("_filterBar")){f=c.getAggregation("_filterBar")._getFilters().map(function(F){return["/sap.card/configuration/filters/"+F.getKey(),F];});}f.concat([["/sap.card/content",c.getCardContent()],["/sap.card/header",c.getCardHeader()],["/sap.card",c]]).filter(function(p){return!!c.getManifestEntry(p[0]);}).forEach(function(p){var s=p[0];var C=p[1];var S;if(C.getStaticConfiguration){S=C.getStaticConfiguration();}else if(C._oCardOriginalContent&&C._oCardOriginalContent.getStaticConfiguration){S=C._oCardOriginalContent.getStaticConfiguration();}else{S=U.getNestedPropertyValue(m,s);}if(S.data){var d=S.data.path;delete S.data;S=B.createBindingInfos(S,c.getBindingNamespaces());S=a.resolveValue(S,C,d);}U.setNestedPropertyValue(m,s,S);});return JSON.stringify(m);};return M;});
