/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/integration/designtime/baseEditor/propertyEditor/BasePropertyEditor","sap/ui/core/format/DateFormat"],function(B,D){"use strict";var a=B.extend("sap.ui.integration.designtime.baseEditor.propertyEditor.dateEditor.DateEditor",{xmlFragment:"sap.ui.integration.designtime.baseEditor.propertyEditor.dateEditor.DateEditor",metadata:{library:"sap.ui.integration"},renderer:B.getMetadata().getRenderer().render});a.prototype.getDefaultValidators=function(){var c=this.getConfig();return Object.assign({},B.prototype.getDefaultValidators.call(this),{isValidBinding:{type:"isValidBinding",isEnabled:c.allowBindings},notABinding:{type:"notABinding",isEnabled:!c.allowBindings},isDate:{type:"isDate",config:{formatterInstance:function(){var d=(this.getConfig()||{}).pattern;var c=d?{pattern:d}:undefined;return this.getFormatterInstance(c);}.bind(this)}}});};a.prototype.formatValue=function(v){var d=this._parse(v);return this._format(d,true)||v;};a.configMetadata=Object.assign({},B.configMetadata,{allowBindings:{defaultValue:true},typeLabel:{defaultValue:"BASE_EDITOR.TYPES.DATE"},pattern:{defaultValue:"YYYY-MM-dd'T'HH:mm:ss.SSS'Z'"},utc:{defaultValue:false}});a.prototype.onFragmentReady=function(){var d=this.getContent();d.onkeypress=function(e){if(!e.charCode||e.metaKey||e.ctrlKey){return;}};};a.prototype._onChange=function(e){var v=e.getParameter("newValue");var d=this._parse(v,true);var s=this._format(d)||v;this.setValue(s);};a.prototype._parse=function(v,u){if(v==null||v===""){return v;}var U=(this.getConfig()||{}).utc!==false;if(u){return this.getFormatterInstance().parse(v,U);}var d=(this.getConfig()||{}).pattern;if(d){var o=this.getFormatterInstance({pattern:d});return o.parse(v,U);}return undefined;};a.prototype._format=function(d,u){if(!this._isValidDate(d)){return undefined;}var U=(this.getConfig()||{}).utc!==false;if(u){return this.getFormatterInstance().format(d,U);}var s=(this.getConfig()||{}).pattern;if(s){var o=this.getFormatterInstance({pattern:s});return o.format(d,U);}return undefined;};a.prototype._isValidDate=function(d){return d&&!isNaN(d.getTime());};a.prototype.getFormatterInstance=function(o){return D.getDateInstance(o||{pattern:"YYYY-MM-dd"});};return a;});
