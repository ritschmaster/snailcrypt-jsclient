/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/m/ColorPalettePopover","sap/m/Button","sap/ui/core/Core","sap/base/util/merge","sap/ui/core/theming/Parameters"],function(C,a,B,b,m,P){"use strict";var c=C.extend("sap.ui.integration.editor.fields.viz.ColorSelect",{metadata:{library:"sap.ui.integration",properties:{enumValue:{type:"string",defaultValue:""},colorValue:{type:"string",defaultValue:""},editable:{type:"boolean",defaultValue:true},colorEnum:{type:"string",defaultValue:"sap.m.AvatarColor"},background:{type:"boolean",defaultValue:true},allowCustomColors:{type:"boolean",defaultValue:false}},aggregations:{_colorpalette:{type:"sap.m.ColorPalettePopover",multiple:false,visibility:"hidden"},_button:{type:"sap.m.Button",multiple:false,visibility:"hidden"}}},renderer:function(r,f){var g=f.getAggregation("_button");r.openStart("div");r.addClass("sapUiIntegrationColorSelect");if(!f._colorValue||f._colorValue==="transparent"){r.addClass("noColorValueOrTransparentValue");}else{r.addClass("hasColorValue");}if(f._colorValue){r.addStyle("--colorValue",f._colorValue);}r.writeElementData(f);r.openEnd();r.renderControl(g);r.close("div");}});var e={};function s(){var v=["sapUiAccent1","sapUiAccent2","sapUiAccent3","sapUiAccent4","sapUiAccent5","sapUiAccent6","sapUiAccent7","sapUiAccent8","sapUiAccent9","sapUiAccent10","sapUiTileIconColor","sapUiContentImagePlaceholderBackground"];var p=P.get({name:v,callback:function(_){}});if(p){e={"sap.m.AvatarColor":{"Accent1":p["sapUiAccent1"],"Accent2":p["sapUiAccent2"],"Accent3":p["sapUiAccent3"],"Accent4":p["sapUiAccent4"],"Accent5":p["sapUiAccent5"],"Accent6":p["sapUiAccent6"],"Accent7":p["sapUiAccent7"],"Accent8":p["sapUiAccent8"],"Accent9":p["sapUiAccent9"],"Accent10":p["sapUiAccent10"],"TileIcon":p["sapUiTileIconColor"],"Transparent":"transparent","Placeholder":p["sapUiContentImagePlaceholderBackground"]}};}}s();b.attachThemeChanged(s);var o,d=new a("oColorPalettePopoverFull",{colorSelect:function(E){var f=E.getParameter("value"),g=e[o.getColorEnum()],i=Object.values(g).indexOf(f);o.setEnumValue(Object.keys(g)[i]);o.setColorValue(f);o._colorValue=f;}});c.prototype.init=function(){this._oButton=new B({icon:"sap-icon://color-fill",press:function(){this._openPalette();}.bind(this)});this._colorValue="transparent";this.setAggregation("_button",this._oButton);};c.prototype._openPalette=function(){o=this;d.setShowDefaultColorButton(true);d.setShowMoreColorsButton(false);d.setDefaultColor("");var E=e[this.getColorEnum()];if(E){var f=[];for(var n in E){f.push(E[n]);}d.setColors(f);}d.openBy(this._oButton);};c.prototype.setEnumValue=function(v){this.setProperty("enumValue",v,true);this._colorValue=e[this.getColorEnum()][v];this.rerender();};c.prototype.bindProperty=function(p,f){C.prototype.bindProperty.apply(this,arguments);if(p==="editable"){var g=m({},f);this._oButton.bindProperty("enabled",g);}return this;};return c;});
