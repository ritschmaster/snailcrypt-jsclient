/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./BaseFilter","sap/ui/core/library","sap/m/DynamicDateRange","sap/m/DynamicDateUtil"],function(B,c,D,a){"use strict";var V=c.ValueState;var M=new Date(-8640000000000000);var b=new Date("1753-01-01");var d=new Date(8640000000000000);var e=new Date("9999-12-31");var o={"DATE":"date","TODAY":"today","YESTERDAY":"yesterday","TOMORROW":"tomorrow","DATERANGE":"dateRange","FROM":"from","TO":"to","YEARTODATE":"yearToDate","LASTDAYS":"lastDays","LASTWEEKS":"lastWeeks","LASTMONTHS":"lastMonths","LASTQUARTERS":"lastQuarters","LASTYEARS":"lastYears","NEXTDAYS":"nextDays","NEXTWEEKS":"nextWeeks","NEXTMONTHS":"nextMonths","NEXTQUARTERS":"nextQuarters","NEXTYEARS":"nextYears","TODAYFROMTO":"todayFromTo","THISWEEK":"thisWeek","LASTWEEK":"lastWeek","NEXTWEEK":"nextWeek","SPECIFICMONTH":"specificMonth","THISMONTH":"thisMonth","LASTMONTH":"lastMonth","NEXTMONTH":"nextMonth","THISQUARTER":"thisQuarter","LASTQUARTER":"lastQuarter","NEXTQUARTER":"nextQuarter","QUARTER1":"quarter1","QUARTER2":"quarter2","QUARTER3":"quarter3","QUARTER4":"quarter4","THISYEAR":"thisYear","LASTYEAR":"lastYear","NEXTYEAR":"nextYear"};function f(O){return o[O];}var g=B.extend("sap.ui.integration.cards.filters.DateRangeFilter",{metadata:{library:"sap.ui.integration",aggregations:{_ddr:{type:"sap.m.DynamicDateRange",multiple:false,visibility:"hidden"}}},renderer:{apiVersion:2}});g.prototype.getField=function(){return this._getDdr();};g.prototype.getValueForModel=function(){var h=this._getDdr().getValue();var v;var r;var R;if(h){v={option:f(h.operator),values:h.values.slice()};var i=a.toDates(h),s=i[0].getJSDate?i[0].getJSDate():i[0],S=h.operator==="TO"||h.operator==="FROM"?0:1,E=i[S]&&i[S].getJSDate?i[S].getJSDate():i[S];r={start:s.toISOString(),end:E.toISOString()};R={start:s.toISOString(),end:E.toISOString()};if(h.operator==="TO"){r.start=M.toISOString();R.start=b.toISOString();}if(h.operator==="FROM"){r.end=d.toISOString();R.end=e.toISOString();}}return{value:v,range:r,rangeOData:R};};g.prototype._getDdr=function(){var C=this.getAggregation("_ddr");if(!C){C=this._createDdr();this.setAggregation("_ddr",C);}return C;};g.prototype._createDdr=function(){var C=Object.assign({},this.getConfig());var v;if(C.value){var O=C.value.option.toUpperCase();var t=a.getOption(O).getValueTypes();v={operator:O,values:C.value.values.map(function(j,i){if(t[i]==="date"){return new Date(j);}return j;})};}C.options=C.options||this._getDefaultOptions();C.options=C.options.map(function(O){return O.toUpperCase();});var h=new D({value:v,options:C.options}).addStyleClass("sapFCardDateRangeField");h.attachChange(function(E){if(E.getParameter("valid")){h.setValueState(V.None);this.setValue(this.getValueForModel());}else{h.setValueState(V.Error);}}.bind(this));var l=this.createLabel(C);if(l){h.addAriaLabelledBy(l);}return h;};g.prototype._getDefaultOptions=function(){return["date","today","dateRange","from","to","lastDays","nextDays","lastWeeks","nextWeeks"];};g.prototype.getOptions=function(){return o;};return g;});
