/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./BaseAction","sap/m/Dialog","sap/ui/core/Core","sap/ui/dom/jquery/Focusable"],function(B,D,C){"use strict";var S=B.extend("sap.ui.integration.cards.actions.ShowCardAction",{metadata:{library:"sap.ui.integration"}});S.prototype.execute=function(){var p=this.getParameters()||{},P=this.getCardInstance(),h=P.getHostInstance(),c;if(p._cardId){c=C.byId(p._cardId);}else{c=P._createChildCard(p);}if(h&&h.onShowCard){h.onShowCard(c,p);return;}this._openDialog(c,P);};S.prototype._openDialog=function(c,p){var d=new D({content:[c],showHeader:false,ariaLabelledBy:c.getId(),escapeHandler:function(P){c.hide();P.resolve();}});d.addStyleClass("sapUiIntCardDialog");p.addDependent(d);c.startManifestProcessing();c.attachManifestApplied(function(){d.open();});c.attachEvent("_ready",function(){setTimeout(function(){this._setFocus(c,d);}.bind(this),0);}.bind(this));d.attachAfterClose(function(){d.destroy();});};S.prototype._setFocus=function(c,d){var f=c.getAggregation("_filter"),o=c.getAggregation("_content"),F=c.getAggregation("_footer"),a;a=f&&f.$().firstFocusableDomRef()||o&&o.$().firstFocusableDomRef()||F&&F.$().firstFocusableDomRef();if(a){d.setInitialFocus(a.id);a.focus();}};return S;});
