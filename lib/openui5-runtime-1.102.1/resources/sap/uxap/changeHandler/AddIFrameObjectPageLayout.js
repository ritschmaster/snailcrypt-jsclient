/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/Utils","sap/base/Log","sap/ui/fl/changeHandler/AddIFrame","sap/ui/fl/changeHandler/common/getTargetAggregationIndex","sap/ui/fl/changeHandler/common/createIFrame"],function(U,L,B,g,c){"use strict";var A=Object.assign({},B);A.applyChange=function(C,o,p){var m=p.modifier;var a=C.getDefinition();var s=a.content.targetAggregation;if(s!=="sections"){return Promise.resolve().then(B.applyChange.bind(B,C,o,p));}var v=p.view;var b=p.appComponent;var d=a.content.selector;var D=sap.ui.getCore().getLibraryResourceBundle("sap.uxap").getText("SECTION_TITLE_FOR_IFRAME");var O;var e;return Promise.resolve().then(m.createControl.bind(m,"sap.uxap.ObjectPageSection",b,v,d,{title:D},false)).then(function(f){O=f;var h=Object.create(d);h.id+="-subSection";return m.createControl("sap.uxap.ObjectPageSubSection",b,v,h,{title:D},false);}).then(function(f){e=f;return m.insertAggregation(O,"subSections",e,0,v);}).then(function(){var i=Object.create(d);i.id+="-iframe";return c(C,p,i);}).then(function(i){return m.insertAggregation(e,"blocks",i,0,v);}).then(g.bind(null,C,o,p)).then(function(i){return m.insertAggregation(o,"sections",O,i,v);}).then(function(){C.setRevertData([m.getId(O)]);});};return A;},true);
