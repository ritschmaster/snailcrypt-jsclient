/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/changeHandler/condenser/Classification"],function(C){"use strict";var M={};var A="actions";M.applyChange=function(c,o,p){var m=p.modifier;var v=p.view;var a=p.appComponent;var b=c.getDefinition().content.movedElements[0];var t=b.targetIndex;var d;var O;return Promise.resolve().then(m.bySelector.bind(m,b.selector,a,v)).then(function(e){d=e;return m.getAggregation(o,A);}).then(function(B){var P;B.some(function(e,i){if(m.getId(e)===m.getId(d)){O=i;P=Promise.resolve().then(m.removeAggregation.bind(m,o,A,e)).then(m.insertAggregation.bind(m,o,"dependents",e,undefined,v));return true;}return false;});return P.then(function(){c.setRevertData({index:O,sourceParent:m.getSelector(o,a),aggregation:A});return m.insertAggregation(o,A,d,t,v);});});};M.revertChange=function(c,o,p){var m=p.modifier;var v=p.view;var a=p.appComponent;var b=c.getDefinition().content.movedElements[0];var r=c.getRevertData();var d;var t;var s;d=m.bySelector(b.selector,a,v);t=r?r.index:b.targetIndex;s=b.sourceIndex;return Promise.resolve().then(m.removeAggregation.bind(m,o,A,d,t,v)).then(m.insertAggregation.bind(m,o,A,d,s,v));};M.completeChangeContent=function(c,s,p){var m=p.modifier,a=p.appComponent,o=c.getDefinition();o.content={movedElements:[],targetAggregation:s.target.aggregation,targetContainer:s.selector};s.movedElements.forEach(function(e){var E=e.element||m.bySelector(e.id,a);o.content.movedElements.push({selector:m.getSelector(E,a),sourceIndex:e.sourceIndex,targetIndex:e.targetIndex});});};M.getCondenserInfo=function(c){var o=c.getContent();var r=c.getRevertData();return{affectedControl:o.movedElements[0].selector,classification:C.Move,sourceContainer:r.sourceParent,targetContainer:o.targetContainer,sourceIndex:r.index,sourceAggregation:r.aggregation,targetAggregation:o.targetAggregation,setTargetIndex:function(c,n){c.getContent().movedElements[0].targetIndex=n;},getTargetIndex:function(c){return c.getContent().movedElements[0].targetIndex;}};};return M;},true);
