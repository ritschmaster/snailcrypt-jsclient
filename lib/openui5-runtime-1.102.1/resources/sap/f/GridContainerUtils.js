/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/core/InvisibleRenderer","sap/ui/thirdparty/jquery"],function(L,I,q){"use strict";return{findDropTargetsAbove:function(g,i){return this._findDropTargets(g,i,this._isAbove);},findDropTargetsBelow:function(g,i){return this._findDropTargets(g,i,this._isBelow);},getItemWrapper:function(i){var o=i.getDomRef(),a;if(o){return o.parentElement;}a=document.getElementById(I.createInvisiblePlaceholderId(i));if(a){return a.parentElement;}return null;},createConfig:function(g,i){return{grid:g,item:i};},_findDropTargets:function(g,i,m){var t=[],o=this.getItemWrapper(i),c=g.getItems().filter(function(a){return m(o,this.getItemWrapper(a));}.bind(this)),C=this.createConfig(g,this._findClosest(i,c),i,m);if(C.item){t.push(C);}else{t=Array.from(document.querySelectorAll(".sapFGridContainer")).filter(function(a){return m(o,a);}).map(function(g){var n=q(g).control(0);var a=this.createConfig(n,this._findClosest(i,n.getItems()),i,m);a.distFromItemToGrid=this._getDistance(i,n,m);return a;}.bind(this)).sort(function(a,b){return a.distFromItemToGrid-b.distFromItemToGrid;});}return t;},_findClosest:function(i,c,m){var C=null,f=Number.POSITIVE_INFINITY;c.forEach(function(o){var d=this._getDistance(i,o,m);if(d<f){C=o;f=d;}}.bind(this));return C;},_getDistance:function(a,b,m){var r=a.getDomRef().getBoundingClientRect(),R=b.getDomRef().getBoundingClientRect();var c={x:R.left};if(m===this._isAbove){c.y=R.top+R.height;}else{c.y=R.top;}var d={x:c.x+R.width,y:c.y};var e={x:r.left+r.width/2,y:r.top+r.height/2};var n=(d.x-c.x)*(d.x-c.x)+(d.y-c.y)*(d.y-c.y);var C=((e.x-c.x)*(d.x-c.x)+(e.y-c.y)*(d.y-c.y))/n;var P={};if(C<0){P.x=c.x;P.y=c.y;}else if(C>1){P.x=d.x;P.y=d.y;}else{P.x=c.x+C*(d.x-c.x);P.y=c.y+C*(d.y-c.y);}var D=(P.x-e.x),f=(P.y-e.y),g=D*D+f*f;if(g>Number.MAX_SAFE_INTEGER){L.warning("Maximum safe integer value exceeded.",g,"GridContainerUtils");}return g;},_isAbove:function(a,b){var y=a.getBoundingClientRect().top,Y=b.getBoundingClientRect().top;return Y-y<0;},_isBelow:function(a,b){var y=a.getBoundingClientRect().top,Y=b.getBoundingClientRect().top;return Y-y>0;}};});
