/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/core/Element','sap/ui/base/ManagedObjectObserver','./shellBar/Search'],function(E,M,S){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.m");var a=E.extend("sap.f.SearchManager",{metadata:{library:"sap.f",properties:{value:{type:"string",group:"Data",defaultValue:null,bindable:"bindable"},placeholder:{type:"string",group:"Misc",defaultValue:null},maxLength:{type:"int",group:"Behavior",defaultValue:0},enabled:{type:"boolean",group:"Behavior",defaultValue:true},enableSuggestions:{type:"boolean",group:"Behavior",defaultValue:false}},aggregations:{suggestionItems:{type:"sap.m.SuggestionItem",multiple:true,forwarding:{getter:"_getSearchField",aggregation:"suggestionItems"},singularName:"suggestionItem"}},events:{search:{parameters:{query:{type:"string"},clearButtonPressed:{type:"boolean"}}},liveChange:{parameters:{newValue:{type:"string"}}},suggest:{parameters:{suggestValue:{type:"string"}}}}}});a.prototype.init=function(){this.setProperty("placeholder",r.getText("FACETFILTER_SEARCH"),true);this._oConfigObserver=new M(this._synchronizePropertiesWithConfig.bind(this));this._oConfigObserver.observe(this,{properties:Object.keys(this.getMetadata().getProperties())});this._initShellBarManagedSearch();};a.prototype._synchronizePropertiesWithConfig=function(){var s=this._oSearch._getSearchField(),o=s.getMetadata(),c=this.getMetadata(),k,n;Object.keys(c.getAllProperties()).forEach(function(p){k=o.hasProperty(p);if(k){n=c.getProperty(p).get(this);o.getProperty(p).set(s,n);}},this);};a.prototype._initShellBarManagedSearch=function(){if(!this._oSearch){this._oSearch=new S({search:this._onSearch.bind(this),liveChange:this._onLiveChange.bind(this),suggest:this._onSuggest.bind(this)});}};a.prototype.exit=function(){if(this._oConfigObserver){this._oConfigObserver.disconnect();this._oConfigObserver=null;}if(this._oSearch){this._oSearch.destroy();}};a.prototype._onLiveChange=function(e){var n=e.getParameters(),b=e.getParameter("newValue");n.id=this.getId();this.setProperty("value",b,true);this.fireLiveChange(n);};a.prototype._onSearch=function(e){var n=e.getParameters();n.id=this.getId();this.fireSearch(n);};a.prototype._onSuggest=function(e){var n=e.getParameters();n.id=this.getId();this.fireSuggest(n);};a.prototype.suggest=function(s){this._getSearchField().suggest(s);};a.prototype._getSearchField=function(){return this._oSearch._getSearchField();};return a;});
